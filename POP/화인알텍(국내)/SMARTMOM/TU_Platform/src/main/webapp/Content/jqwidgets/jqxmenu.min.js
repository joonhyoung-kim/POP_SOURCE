(function(n){n.jqx.jqxWidget("jqxMenu","",{});n.extend(n.jqx._jqxMenu.prototype,{defineInstance:function(){var t={items:[],mode:"horizontal",width:null,height:null,minimizeWidth:"auto",easing:"easeInOutSine",animationShowDuration:200,animationHideDuration:200,autoCloseInterval:0,animationHideDelay:100,animationShowDelay:100,menuElements:[],autoSizeMainItems:!1,autoCloseOnClick:!0,autoCloseOnMouseLeave:!0,enableRoundedCorners:!0,disabled:!1,autoOpenPopup:!0,enableHover:!0,autoOpen:!0,autoGenerate:!0,clickToOpen:!1,showTopLevelArrows:!1,touchMode:"auto",source:null,popupZIndex:17e3,rtl:!1,keyboardNavigation:!1,lockFocus:!1,title:"",events:["shown","closed","itemclick","initialized","open","close"]};return n.extend(!0,this,t),t},createInstance:function(){var i=this,r,t;this.host.attr("role","menubar");n.jqx.utilities.resize(this.host,function(){i.refresh()},!1,this.mode!="popup");this.minimizeWidth!="auto"&&this.minimizeWidth!=null&&this.width&&this.width.toString().indexOf("%")==-1&&n(window).resize(function(){i.refresh()});this.host.css("outline","none");this.source&&this.source!=null&&(r=this.loadItems(this.source),this.element.innerHTML=r);this._tmpHTML=this.element.innerHTML;this.element.innerHTML.indexOf("UL")&&(t=this.host.find("ul:first"),t.length>0&&this._createMenu(t[0]));this.host.data("autoclose",{});this._render();this.setSize();n.jqx.browser.msie&&n.jqx.browser.version<8&&this.host.attr("hideFocus",!0)},focus:function(){var r,t,i;try{this.host.focus();this.mode==="popup"&&(r=this.host.closest("div.jqx-menu-wrapper"),r.focus());this.keyboardNavigation&&(t=this,i=function(){if(n.jqx.isHidden(n(t.items[0].element))){var i=t._nextVisibleItem(t.items[0],0);i&&(n(i.element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=i)}else n(t.items[0].element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=t.items[0]},this.activeItem?n.jqx.isHidden(n(this.activeItem.element))?(n(this.activeItem.element).removeClass(this.toThemeProperty("jqx-fill-state-focus")),i()):n(this.activeItem.element).addClass(this.toThemeProperty("jqx-fill-state-focus")):i())}catch(u){}},loadItems:function(t,i){var u,r;if(t!=null)return t.length==0?"":(u=this,this.items=[],r='<ul class="jqx-menu-ul">',i&&(r='<ul class="jqx-menu-ul" style="width:'+i+';">'),n.map(t,function(n){if(n==undefined)return null;r+=u._parseItem(n)}),r+="<\/ul>")},_parseItem:function(n){var t="",i,u,r;return n==undefined?null:(i=n.label,!n.label&&n.html&&(i=n.html),i||(i="Item"),typeof n=="string"&&(i=n),u=!1,n.selected!=undefined&&n.selected&&(u=!0),r=!1,n.disabled!=undefined&&n.disabled&&(r=!0),t+="<li",r&&(t+=' item-disabled="true" '),n.label&&!n.html&&(t+=' item-label="'+i+'" '),n.value!=null&&(t+=' item-value="'+n.value+'" '),n.id!=undefined&&(t+=' id="'+n.id+'" '),t+=">"+i,n.items&&(t+=n.subMenuWidth?this.loadItems(n.items,n.subMenuWidth):this.loadItems(n.items)),t+"<\/li>")},setSize:function(){var e,t,i,f,r,u;if(this.width!=null&&this.width.toString().indexOf("%")!=-1?this.host.width(this.width):this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("%")!=-1?this.host.height(this.height):this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height),this.height===null&&this.host.height("auto"),e=this,this.minimizeWidth!=null&&this.mode!="popup"){if(t=n(window).width(),!n.jqx.response&&(i=!1,navigator.userAgent.match(/Windows|Linux|MacOS/)&&(f=navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0,f||(i=!0)),r=this.minimizeWidth,i&&this.minimizeWidth=="auto"))return;this.minimizeWidth=="auto"&&n.jqx.response?(u=new n.jqx.response,(u.device.type=="Phone"||u.device.type=="Tablet")&&(this.minimized||this.minimize())):t<r&&!this.minimized?this.minimize():this.minimized&&t>=r&&this.restore()}},minimize:function(){var i,f,u,r,t,e,o;this.minimized||(i=this,this.host.addClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!0,this._tmpMode=this.mode,this.mode="simple",t=this.host.closest("div.jqx-menu-wrapper"),t.remove(),n("#menuWrapper"+this.element.id).remove(),n.each(this.items,function(){var t=this,u=n(t.element),i=n(t.subMenuElement),r=i.closest("div.jqx-menu-popup");r.remove()}),this.source&&(f=this.loadItems(this.source),this.element.innerHTML=f,this._tmpHTML=this.element.innerHTML),this.element.innerHTML=this._tmpHTML,this.element.innerHTML.indexOf("UL")&&(u=this.host.find("ul:first"),u.length>0&&this._createMenu(u[0])),this._render(),r=this.host.find("ul:first"),r.wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"><\/div>'),t=r.closest("div.jqx-menu-wrapper"),t[0].id="menuWrapper"+this.element.id,t.detach(),t.appendTo(n(document.body)),t.addClass(this.toThemeProperty("jqx-widget")),t.addClass(this.toThemeProperty("jqx-menu")),t.addClass(this.toThemeProperty("jqx-menu-minimized")),t.addClass(this.toThemeProperty("jqx-widget-header")),r.children().hide(),t.hide(),t.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.minimizedItem=n("<div><\/div>"),this.minimizedItem.addClass(this.toThemeProperty("jqx-item")),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top")),this.addHandler(t,"keydown",function(n){return i.handleKeyDown(n)}),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button")),this.minimizedItem.prependTo(this.host),this.titleElement=n("<div>"+this.title+"<\/div>"),this.titleElement.addClass(this.toThemeProperty("jqx-item")),this.titleElement.addClass(this.toThemeProperty("jqx-menu-title")),this.titleElement.prependTo(this.host),n("<div style='clear:both;'><\/div>").insertAfter(this.minimizedItem),i.minimizedHidden=!0,e=function(){i.minimizedHidden=!0;i.minimizedItem.show();var n=!1;i.minimizedItem.css("float")=="right"&&(n=!0);t.animate({left:n?i.host.coord().left+i.host.width()+t.width():-t.outerWidth(),opacity:0},i.animationHideDuration,function(){t.find("ul:first").children().hide();t.hide()})},o=function(n){if(i.minimizedHidden){t.find("ul:first").children().show();i.minimizedHidden=!1;t.show();t.css("opacity",0);t.css("left",-t.outerWidth());var r=!1,u=t.width();i.minimizedItem.css("float")=="right"&&(t.css("left",i.host.coord().left+i.host.width()+u),r=!0);t.css("top",i.host.coord().top+i.host.height());t.animate({left:r?i.host.coord().left+i.host.width()-u:i.host.coord().left,opacity:.95},i.animationShowDuration,function(){})}else e(n);i._raiseEvent("2",{type:"mouse",item:i.minimizedItem[0],event:n});i.setSize()},this.addHandler(n(window),"orientationchange.jqxmenu"+this.element.id,function(){setTimeout(function(){if(!i.minimizedHidden){var r=t.width(),n=!1,r=t.width();i.minimizedItem.css("float")=="right"&&(n=!0);t.css("top",i.host.coord().top+i.host.height());t.css({left:n?i.host.coord().left+i.host.width()-r:i.host.coord().left})}},25)}),this.addHandler(this.minimizedItem,"click",function(n){o(n)}))},restore:function(){var r,t,i;this.minimized&&(this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.host.removeClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!1,this.mode=this._tmpMode,this.minimizedItem&&this.minimizedItem.remove(),r=n("#menuWrapper"+this.element.id),r.remove(),this.source&&(t=this.loadItems(this.source),this.element.innerHTML=t,this._tmpHTML=t),this.element.innerHTML=this._tmpHTML,this.element.innerHTML.indexOf("UL")&&(i=this.host.find("ul:first"),i.length>0&&this._createMenu(i[0])),this.setSize(),this._render())},isTouchDevice:function(){if(this._isTouchDevice!=undefined)return this._isTouchDevice;var t=n.jqx.mobile.isTouchDevice();return this.touchMode==!0?t=!0:this.touchMode==!1&&(t=!1),t&&(this.host.addClass(this.toThemeProperty("jqx-touch")),n(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))),this._isTouchDevice=t,t},refresh:function(n){n||this.setSize()},resize:function(n,t){this.width=n;this.height=t;this.refresh()},_closeAll:function(t){var i=t!=null?t.data:this,u=i.items,r;n.each(u,function(){var n=this;n.hasItems==!0&&n.isOpen&&i._closeItem(i,n)});i.mode=="popup"&&t!=null&&(r=i._isRightClick(t),r||i.close())},closeItem:function(t){if(t==null)return!1;var r=t,u=document.getElementById(r),i=this;return n.each(i.items,function(){var n=this;n.isOpen==!0&&n.element==u&&(i._closeItem(i,n),n.parentId&&i.closeItem(n.parentId))}),!0},openItem:function(t){if(t==null)return!1;var r=t,u=document.getElementById(r),i=this;return n.each(i.items,function(){var n=this;n.isOpen==!1&&n.element==u&&(i._openItem(i,n),n.parentId&&i.openItem(n.parentId))}),!0},_getClosedSubMenuOffset:function(t){var i=n(t.subMenuElement),u=-i.outerHeight(),r=-i.outerWidth(),f=t.level==0&&this.mode=="horizontal";f?r=0:u=0;switch(t.openVerticalDirection){case"up":case"center":u=i.outerHeight()}switch(t.openHorizontalDirection){case this._getDir("left"):r=f?0:i.outerWidth();break;case"center":r=f?0:i.outerWidth()}return{left:r,top:u}},_closeItem:function(t,i,r,u){var o,s,a;if(t==null||i==null)return!1;var f=n(i.subMenuElement),v=i.level==0&&this.mode=="horizontal",h=this._getClosedSubMenuOffset(i),c=h.top,l=h.left,y=n(i.element),e=f.closest("div.jqx-menu-popup");e!=null&&(o=t.animationHideDelay,u==!0&&(o=0),f.data("timer")&&f.data("timer").show!=null&&(clearTimeout(f.data("timer").show),f.data("timer").show=null),s=function(){i.isOpen=!1;v?f.stop().animate({top:c},t.animationHideDuration,function(){n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed"));n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected"));n(i.element).removeClass(t.toThemeProperty("jqx-rc-b-expanded"));e.removeClass(t.toThemeProperty("jqx-rc-t-expanded"));var r=n(i.arrow);r.length>0&&t.showTopLevelArrows&&(r.removeClass(),i.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up"))));n.jqx.aria(n(i.element),"aria-expanded",!1);e.css({display:"none"});t.animationHideDuration==0&&f.css({top:c});t._raiseEvent("1",i)}):(!n.jqx.browser.msie,f.stop().animate({left:l},t.animationHideDuration,function(){var r;t.animationHideDuration==0&&f.css({left:l});i.level>0?(n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))):(n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left"))))));n.jqx.aria(n(i.element),"aria-expanded",!1);e.css({display:"none"});t._raiseEvent("1",i)}))},o>0?f.data("timer")&&(f.data("timer").hide=setTimeout(function(){s()},o)):s(),r!=undefined&&r&&(a=f.children(),n.each(a,function(){if(t.menuElements[this.id]&&t.menuElements[this.id].isOpen){var i=n(t.menuElements[this.id].subMenuElement);t._closeItem(t,t.menuElements[this.id],!0,!0)}})))},getSubItems:function(t,i){var u,r;if(t==null)return!1;u=this;r=[];i!=null&&n.extend(r,i);var f=t,e=this.menuElements[f],o=n(e.subMenuElement),s=o.find(".jqx-menu-item");return n.each(s,function(){r[this.id]=u.menuElements[this.id];var t=u.getSubItems(this.id,r);n.extend(r,t)}),r},disable:function(t,i){var e,u,f,r;t!=null&&(e=t,u=this,this.menuElements[e]&&(f=this.menuElements[e],f.disabled=i,r=n(f.element),f.element.disabled=i,n.each(r.children(),function(){this.disabled=i}),i?(r.addClass(u.toThemeProperty("jqx-menu-item-disabled")),r.addClass(u.toThemeProperty("jqx-fill-state-disabled"))):(r.removeClass(u.toThemeProperty("jqx-menu-item-disabled")),r.removeClass(u.toThemeProperty("jqx-fill-state-disabled")))))},getItem:function(n){return this.menuElements[n]?this.menuElements[n]:null},disableItem:function(n){this.disable(n,!0)},hideItem:function(t){if(this.menuElements[t]){var i=this.menuElements[t];n(i.element).hide()}},showItem:function(t){if(this.menuElements[t]){var i=this.menuElements[t];n(i.element).show()}},enableItem:function(n){this.disable(n,!1)},_setItemProperty:function(n,t,i){var r,f,u;n!=null&&(r=n,f=this,this.menuElements[r]&&(u=this.menuElements[r],u[t]&&(u[t]=i)))},setItemOpenDirection:function(t,i,r){var f,u,o;if(t!=null){var h=t,e=this,s=n.jqx.browser.msie&&n.jqx.browser.version<8;if(this.menuElements[h]&&(f=this.menuElements[h],i!=null&&(f.openHorizontalDirection=i,f.hasItems&&f.level>0&&(o=n(f.element),o!=undefined&&(u=n(f.arrow),f.arrow==null&&(u=n('<span id="arrow'+o[0].id+'"><\/span>'),s?u.appendTo(o):u.prependTo(o),f.arrow=u[0]),u.removeClass(),f.openHorizontalDirection=="left"?(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("left"))),u.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("left")))):(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("right"))),u.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("right")))),u.css("visibility","visible"),s?(u.css("display","inline-block"),u.css("float","none")):(u.css("display","block"),u.css("float","right"))))),r!=null)){if(f.openVerticalDirection=r,u=n(f.arrow),o=n(f.element),!e.showTopLevelArrows)return;o!=undefined&&(f.arrow==null&&(u=n('<span id="arrow'+o[0].id+'"><\/span>'),s?u.appendTo(o):u.prependTo(o),f.arrow=u[0]),u.removeClass(),f.openVerticalDirection=="down"?(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-down")),u.addClass(e.toThemeProperty("jqx-icon-arrow-down"))):(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-up")),u.addClass(e.toThemeProperty("jqx-icon-arrow-up"))),u.css("visibility","visible"),s?(u.css("display","inline-block"),u.css("float","none")):(u.css("display","block"),u.css("float","right")))}}},_getSiblings:function(n){for(var i=[],r=0,t=0;t<this.items.length;t++)this.items[t]!=n&&this.items[t].parentId==n.parentId&&this.items[t].hasItems&&(i[r++]=this.items[t]);return i},_openItem:function(t,i,r){var c,p,s,u,w,h,b,k,y,l,a,v,d;if(t==null||i==null||i.isOpen||i.disabled||t.disabled)return!1;c=t.popupZIndex;r!=undefined&&(c=r);p=t.animationHideDuration;t.animationHideDuration=0;t._closeItem(t,i,!0,!0);t.animationHideDuration=p;n(i.element).focus();s=[5,5];u=n(i.subMenuElement);u!=null&&u.stop();u.data("timer")&&u.data("timer").hide!=null&&clearTimeout(u.data("timer").hide);var f=u.closest("div.jqx-menu-popup"),e=n(i.element),o=i.level==0?this._getOffset(i.element):e.position();i.level>0&&this.hasTransform&&(w=parseInt(e.coord().top)-parseInt(this._getOffset(i.element).top),o.top+=w);i.level==0&&this.mode=="popup"&&(o=e.coord());h=i.level==0&&this.mode=="horizontal";b=h?o.left:this.menuElements[i.parentId]!=null&&this.menuElements[i.parentId].subMenuElement!=null?parseInt(n(n(this.menuElements[i.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-s[0]:parseInt(u.outerWidth());f.css({visibility:"visible",display:"block",left:b,top:h?o.top+e.outerHeight():o.top,zIndex:c});u.css("display","block");this.mode!="horizontal"&&i.level==0?(k=this._getOffset(this.element),f.css("left",-1+k.left+this.host.outerWidth()),u.css("left",-u.outerWidth())):(y=this._getClosedSubMenuOffset(i),u.css("left",y.left),u.css("top",y.top));f.css({height:parseInt(u.outerHeight())+parseInt(s[1])+"px"});l=0;a=0;switch(i.openVerticalDirection){case"up":h?(u.css("top",u.outerHeight()),l=s[1],v=parseInt(u.parent().css("padding-bottom")),isNaN(v)&&(v=0),v>0&&f.addClass(this.toThemeProperty("jqx-menu-popup-clear")),u.css("top",u.outerHeight()-v),f.css({display:"block",top:o.top-f.outerHeight(),zIndex:c})):(l=s[1],u.css("top",u.outerHeight()),f.css({display:"block",top:o.top-f.outerHeight()+s[1]+e.outerHeight(),zIndex:c}));break;case"center":h?(u.css("top",0),f.css({display:"block",top:o.top-f.outerHeight()/2+s[1],zIndex:c})):(u.css("top",0),f.css({display:"block",top:o.top+e.outerHeight()/2-f.outerHeight()/2+s[1],zIndex:c}))}switch(i.openHorizontalDirection){case this._getDir("left"):h?f.css({left:o.left-(f.outerWidth()-e.outerWidth()-s[0])}):(a=0,u.css("left",f.outerWidth()),f.css({left:o.left-f.outerWidth()+2*i.level}));break;case"center":h?f.css({left:o.left-(f.outerWidth()/2-e.outerWidth()/2-s[0]/2)}):(f.css({left:o.left-(f.outerWidth()/2-e.outerWidth()/2-s[0]/2)}),u.css("left",f.outerWidth()))}if(h){if(parseInt(u.css("top"))==l){i.isOpen=!0;return}}else if(parseInt(u.css("left"))==a){i.isOpen==!0;return}n.each(t._getSiblings(i),function(){t._closeItem(t,this,!0,!0)});d=n.data(t.element,"animationHideDelay");t.animationHideDelay=d;this.autoCloseInterval>0&&(this.host.data("autoclose")!=null&&this.host.data("autoclose").close!=null&&clearTimeout(this.host.data("autoclose").close),this.host.data("autoclose")!=null&&(this.host.data("autoclose").close=setTimeout(function(){t._closeAll()},this.autoCloseInterval)));u.data("timer")&&(u.data("timer").show=setTimeout(function(){var r;f!=null&&(h?(u.stop(),u.css("left",a),!n.jqx.browser.msie,e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),i.openVerticalDirection=="down"?(n(i.element).addClass(t.toThemeProperty("jqx-rc-b-expanded")),f.addClass(t.toThemeProperty("jqx-rc-t-expanded"))):(n(i.element).addClass(t.toThemeProperty("jqx-rc-t-expanded")),f.addClass(t.toThemeProperty("jqx-rc-b-expanded"))),r=n(i.arrow),r.length>0&&t.showTopLevelArrows&&(r.removeClass(),i.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),t.animationShowDuration==0?(u.css({top:l}),i.isOpen=!0,t._raiseEvent("0",i),n.jqx.aria(n(i.element),"aria-expanded",!0)):u.animate({top:l},t.animationShowDuration,t.easing,function(){i.isOpen=!0;n.jqx.aria(n(i.element),"aria-expanded",!0);t._raiseEvent("0",i)})):(u.stop(),u.css("top",l),!n.jqx.browser.msie,i.level>0?(e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))):(e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))),!n.jqx.browser.msie,t.animationShowDuration==0?(u.css({left:a}),t._raiseEvent("0",i),i.isOpen=!0,n.jqx.aria(n(i.element),"aria-expanded",!0)):u.animate({left:a},t.animationShowDuration,t.easing,function(){t._raiseEvent("0",i);i.isOpen=!0;n.jqx.aria(n(i.element),"aria-expanded",!0)})))},this.animationShowDelay))},_getDir:function(n){switch(n){case"left":return this.rtl?"right":"left";case"right":return this.rtl?"left":"right"}return"left"},_applyOrientation:function(t,i){var r=this,e=0,f,u,o,s;r.host.removeClass(r.toThemeProperty("jqx-menu-horizontal"));r.host.removeClass(r.toThemeProperty("jqx-menu-vertical"));r.host.removeClass(r.toThemeProperty("jqx-menu"));r.host.removeClass(r.toThemeProperty("jqx-widget"));r.host.addClass(r.toThemeProperty("jqx-widget"));r.host.addClass(r.toThemeProperty("jqx-menu"));t!=undefined&&i!=undefined&&i=="popup"?r.host.parent().length>0&&r.host.parent().parent().length>0&&r.host.parent().parent()[0]==document.body&&(f=n.data(document.body,"jqxMenuOldHost"+r.element.id),f!=null&&(u=r.host.closest("div.jqx-menu-wrapper"),u.remove(),u.appendTo(f),r.host.css("display","block"),r.host.css("visibility","visible"),u.css("display","block"),u.css("visibility","visible"))):t==undefined&&i==undefined&&n.data(document.body,"jqxMenuOldHost"+r.element.id,r.host.parent()[0]);r.autoOpenPopup?r.mode=="popup"?(r.addHandler(n(document),"contextmenu."+r.element.id,function(){return!1}),r.addHandler(n(document),"mousedown.menu"+r.element.id,function(n){r._openContextMenu(n)})):(r.removeHandler(n(document),"contextmenu."+r.element.id),r.removeHandler(n(document),"mousedown.menu"+r.element.id)):(r.removeHandler(n(document),"contextmenu."+r.element.id),r.removeHandler(n(document),"mousedown.menu"+r.element.id),r.addHandler(n(document),"contextmenu."+r.element.id,function(n){if(n.target&&n.target.className.indexOf&&n.target.className.indexOf("jqx-menu")>=0)return!1}));r.rtl&&r.host.addClass(r.toThemeProperty("jqx-rtl"));switch(r.mode){case"horizontal":r.host.addClass(r.toThemeProperty("jqx-widget-header"));r.host.addClass(r.toThemeProperty("jqx-menu-horizontal"));n.each(r.items,function(){var i=this,u,t;$element=n(i.element);t=n(i.arrow);t.removeClass();i.hasItems&&i.level>0&&(t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>'),t.prependTo($element),t.css("float",r._getDir("right")),t.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right"))),i.arrow=t[0]);i.level==0&&(n(i.element).css("float",r._getDir("left")),!i.ignoretheme&&i.hasItems&&r.showTopLevelArrows?(t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>'),u=n.jqx.browser.msie&&n.jqx.browser.version<8,i.arrow==null?u?t.appendTo($element):t.prependTo($element):t=n(i.arrow),i.openVerticalDirection=="down"?(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-down")),t.addClass(r.toThemeProperty("jqx-icon-arrow-down"))):(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-up")),t.addClass(r.toThemeProperty("jqx-icon-arrow-up"))),t.css("visibility","visible"),u?t.css("display","inline-block"):(t.css("display","block"),t.css("float","right")),i.arrow=t[0]):i.ignoretheme||!i.hasItems||r.showTopLevelArrows||i.arrow!=null&&(t=n(i.arrow),t.remove(),i.arrow=null),e=Math.max(e,$element.height()))});break;case"vertical":case"popup":case"simple":r.host.addClass(r.toThemeProperty("jqx-menu-vertical"));n.each(r.items,function(){var i=this,t;if($element=n(i.element),i.hasItems&&!i.ignoretheme){if(i.arrow&&n(i.arrow).remove(),r.mode=="simple")return!0;t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>');t.prependTo($element);t.css("float","right");i.level==0?(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-top-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right")))):(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right"))));i.arrow=t[0]}$element.css("float","none")});r.mode=="popup"?(r.host.addClass(r.toThemeProperty("jqx-widget-content")),r.host.wrap('<div tabindex=0 class="jqx-menu-wrapper" style="z-index:'+r.popupZIndex+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"><\/div>'),u=r.host.closest("div.jqx-menu-wrapper"),r.host.addClass(r.toThemeProperty("jqx-popup")),u[0].id="menuWrapper"+r.element.id,u.appendTo(n(document.body)),r.addHandler(u,"keydown",function(n){return r.handleKeyDown(n)})):r.host.addClass(r.toThemeProperty("jqx-widget-header"));r.mode=="popup"&&(o=r.host.height(),r.host.css("position","absolute"),r.host.css("top","0"),r.host.css("left","0"),r.mode!="simple"&&(r.host.height(o),r.host.css("display","none")))}s=r.isTouchDevice();r.autoCloseOnClick&&(r.removeHandler(n(document),"mousedown.menu"+r.element.id,r._closeAfterClick),r.addHandler(n(document),"mousedown.menu"+r.element.id,r._closeAfterClick,r),s&&(r.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+r.element.id,r._closeAfterClick,r),r.addHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+r.element.id,r._closeAfterClick,r)))},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_getOffset:function(t){var u=n.jqx.mobile.isSafariMobileBrowser(),f=n(t).coord(!0),i=f.top,r=f.left,e,o;return n("body").css("border-top-width")!="0px"&&(i=parseInt(i)+this._getBodyOffset().top),n("body").css("border-left-width")!="0px"&&(r=parseInt(r)+this._getBodyOffset().left),e=n.jqx.mobile.isWindowsPhone(),o=n.jqx.mobile.isTouchDevice(),this.hasTransform||u!=null&&u||e||o?{left:n.jqx.mobile.getLeftPos(t),top:n.jqx.mobile.getTopPos(t)}:{left:r,top:i}},_isRightClick:function(n){var t,n;return n||(n=window.event),n.which?t=n.which==3:n.button&&(t=n.button==2),t},_openContextMenu:function(n){var t=this,i=t._isRightClick(n);i&&t.open(parseInt(n.clientX)+5,parseInt(n.clientY)+5)},close:function(){var t=this,i=n.data(this.element,"contextMenuOpened"+this.element.id),r;i&&(r=this.host,n.each(t.items,function(){var n=this;n.hasItems&&t._closeItem(t,n)}),n.each(t.items,function(){var t=this,i;t.isOpen==!0&&($submenu=n(t.subMenuElement),i=$submenu.closest("div.jqx-menu-popup"),i.hide(this.animationHideDuration))}),this.host.hide(this.animationHideDuration),n.data(t.element,"contextMenuOpened"+this.element.id,!1),t._raiseEvent("1",t),t._raiseEvent("5"))},open:function(t,i){var u,r;this.mode=="popup"&&(u=0,this.host.css("display")=="block"&&(this.close(),u=this.animationHideDuration),r=this,(t==undefined||t==null)&&(t=0),(i==undefined||i==null)&&(i=0),setTimeout(function(){r.host.show(r.animationShowDuration);r.host.css("visibility","visible");n.data(r.element,"contextMenuOpened"+r.element.id,!0);r._raiseEvent("0",r);r._raiseEvent("4",{left:t,top:i});r.host.css("z-index",9999);t!=undefined&&i!=undefined&&r.host.css({left:t,top:i});r.focus()},u))},_renderHover:function(n,t){var i=this;t.ignoretheme||(this.addHandler(n,"mouseenter",function(){i.hoveredItem=t;t.disabled||t.separator||!i.enableHover||i.disabled||(t.level>0?(n.addClass(i.toThemeProperty("jqx-fill-state-hover")),n.addClass(i.toThemeProperty("jqx-menu-item-hover"))):(n.addClass(i.toThemeProperty("jqx-fill-state-hover")),n.addClass(i.toThemeProperty("jqx-menu-item-top-hover"))))}),this.addHandler(n,"mouseleave",function(){t.disabled||t.separator||!i.enableHover||i.disabled||(t.level>0?(n.removeClass(i.toThemeProperty("jqx-fill-state-hover")),n.removeClass(i.toThemeProperty("jqx-menu-item-hover"))):(n.removeClass(i.toThemeProperty("jqx-fill-state-hover")),n.removeClass(i.toThemeProperty("jqx-menu-item-top-hover"))))}))},_closeAfterClick:function(t){var i=t!=null?t.data:this,r=!1;i.autoCloseOnClick&&(n.each(n(t.target).parents(),function(){if(this.className.indexOf&&this.className.indexOf("jqx-menu")!=-1)return r=!0,!1}),r||(t.data=i,i._closeAll(t)))},_autoSizeHorizontalMenuItems:function(){var i=this,t;i.autoSizeMainItems&&this.mode=="horizontal"&&(t=this.maxHeight,parseInt(t)>parseInt(this.host.height())&&(t=parseInt(this.host.height())),t=parseInt(this.host.height()),n.each(this.items,function(){var f=this,u;if($element=n(f.element),f.level==0&&t>0){var h=$element.children().length>0?parseInt($element.children().height()):$element.height(),e=i.host.find("ul:first"),c=parseInt(e.css("padding-top")),l=parseInt(e.css("margin-top")),o=t-2*(l+c),s=parseInt(o)/2-h/2,r=parseInt(s),a=parseInt(s);$element.css("padding-top",r);$element.css("padding-bottom",a);parseInt($element.outerHeight())>o&&(u=1,$element.css("padding-top",r-u),r=r-u)}}));n.each(this.items,function(){var t=this,r,i;$element=n(t.element);t.hasItems&&t.level>0&&t.arrow&&(r=n(t.arrow),i=n(t.element).height(),i>15&&r.css("margin-top",(i-15)/2))})},_nextVisibleItem:function(n,t){if(n==null||n==undefined)return null;for(var i=n;i!=null;)if(i=i.nextItem,this._isVisible(i)&&!i.disabled&&i.type!=="separator"){if(this.minimized)return i;if(t!=undefined&&i&&i.level!=t)continue;return i}return null},_prevVisibleItem:function(n,t){if(n==null||n==undefined)return null;for(var i=n;i!=null;)if(i=i.prevItem,this._isVisible(i)&&!i.disabled&&i.type!=="separator"){if(this.minimized)return i;if(t!=undefined&&i&&i.level!=t)continue;return i}return null},_parentItem:function(t){var i,r;return t==null||t==undefined?null:(i=t.parentElement,!i)?null:(r=null,n.each(this.items,function(){if(this.element==i)return r=this,!1}),r)},_isElementVisible:function(t){return t==null?!1:n(t).css("display")!="none"&&n(t).css("visibility")!="hidden"?!0:!1},_isVisible:function(n){if(n==null||n==undefined||!this._isElementVisible(n.element))return!1;var t=this._parentItem(n);if(t==null||this.minimized)return!0;if(t!=null){if(!this._isElementVisible(t.element))return!1;if(t.isOpen||this.minimized){while(t!=null)if((t=this._parentItem(t),t!=null&&!this._isElementVisible(t.element))||t!=null&&!t.isOpen)return!1}else return!1}return!0},_render:function(t,i){var s;this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-menu-disabled")));this.host.attr("tabindex")==undefined&&this.host.attr("tabindex",0);var e=this.popupZIndex,o=[5,5],r=this;n.data(r.element,"animationHideDelay",r.animationHideDelay);var u=this.isTouchDevice(),f=u&&(n.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("Touch")>=0),h=!1;navigator.platform.toLowerCase().indexOf("win")!=-1&&(navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0?this.touchDevice=!0:navigator.userAgent.indexOf("Touch")>=0&&(s="MSPointerDown"in window,(s||n.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("ARM")>=0)&&(h=!0,f=!0,r.clickToOpen=!0,r.autoCloseOnClick=!1,r.enableHover=!1)));n.data(document.body,"menuel",this);this.hasTransform=n.jqx.utilities.hasTransform(this.host);this._applyOrientation(t,i);this.removeHandler(this.host,"blur");this.removeHandler(this.host,"focus");this.addHandler(this.host,"blur",function(){if(r.keyboardNavigation&&r.activeItem){if(r.mode==="popup"&&document.activeElement&&document.activeElement.className.indexOf("jqx-menu-wrapper")>=0)return;n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus"));r.activeItem=null}});this.addHandler(this.host,"focus",function(){if(r.keyboardNavigation&&!r.activeItem)if(r.hoveredItem)n(r.hoveredItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.hoveredItem;else{var t=function(){if(n.jqx.isHidden(n(r.items[0].element))){var t=r._nextVisibleItem(r.items[0],0);t&&(n(t.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=t)}else n(r.items[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.items[0]};r.activeItem?n.jqx.isHidden(n(r.activeItem.element))?(n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),t()):n(r.activeItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")):t()}});this.removeHandler(this.host,"keydown");r.handleKeyDown=function(t){var i,a,p,o,l,v,w,y,f,s,u,e,b,c;if(r.keyboardNavigation){if(t.target.nodeName.toLowerCase()==="input")return!0;if(i=null,a=null,n.each(r.items,function(){var n=this;return this.disabled?!0:(this.element.className.indexOf("pressed")>=0&&(a=this),this.element.className.indexOf("focus")>=0?(i=this,!1):void 0)}),!i&&a&&(i=a),i||(n(r.items[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.items[0],i=r.activeItem),p=!1,t.keyCode==27){if(t.data=r,r._closeAll(t),i)for(o=i;o!=null;)o.parentItem?o=o.parentItem:(n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=o,n(r.activeItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),o=o.parentItem);p=!0}t.keyCode==13&&i&&(p=!0,r._raiseEvent("2",{item:i.element,event:t,type:"keyboard"}),l=i.anchor!=null?n(i.anchor):null,l!=null&&l.length>0&&(v=l.attr("href"),w=l.attr("target"),v!=null&&(w!=null?window.open(v,w):window.location=v)),t.preventDefault(),t.stopPropagation(),n(i.element).focus());y=function(n){var i,u,t;if(n==null)return[];for(i=[],u=0,t=0;t<r.items.length;t++)r.items[t].parentId==n.parentId&&(i[u++]=r.items[t]);return i};f="";switch(t.keyCode){case 40:f="down";break;case 38:f="up";break;case 39:f="right";break;case 37:f="left"}if(i&&i.openHorizontalDirection==="left"&&f==="left"&&(f="right"),i&&i.openHorizontalDirection==="left"&&f==="right"&&(f="left"),i&&i.openVerticalDirection==="top"&&f==="top"&&(f="bottom"),i&&i.openVerticalDirection==="top"&&f==="bottom"&&(f="top"),r.rtl&&(f==="right"?f="left":f==="left"&&(f="right")),f==="right"&&!r.minimized){if(t.altKey&&(i.level!=0&&i.hasItems||r.mode!="horizontal"))r._openItem(r,i);else{var u=r._nextVisibleItem(i,0),h=r._nextVisibleItem(i),e=y(h);u||(u=h);u&&(u.parentId===i.parentId&&u.level==0&&r.mode=="horizontal"||h.id==e[0].id&&h.level!=0)&&(h.id==e[0].id&&(i.level!=0||i.level==0&&r.mode!="horizontal")&&(u=h),n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)}t.preventDefault();t.stopPropagation()}if(f!=="left"||r.minimized||(t.altKey&&(i.level!=0&&r.mode!=="horizontal"||i.level>1&&r.mode==="horizontal"||i.level==1&&i.hasItems&&r.mode==="horizontal")?i.hasItems?r._closeItem(r,i):i.parentItem&&(r._closeItem(r,i.parentItem),n(i.parentItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=i.parentItem):(u=r._prevVisibleItem(i,0),s=i.parentItem,u&&u.parentId===i.parentId&&u.level==0&&r.mode=="horizontal"?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):s&&s.level==0&&r.mode=="horizontal"||!s||s.level!=i.level-1||(n(s.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=s)),t.preventDefault(),t.stopPropagation()),f==="down"?(t.altKey?(i.level==0&&i.hasItems&&r._openItem(r,i),r.minimized&&r.minimizedHidden&&r.minimizedItem.trigger("click")):(u=r._nextVisibleItem(i,i.level),e=y(u),r.minimized&&u?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):(u&&(u.parentId===i.parentId||u.id==e[0].id&&r.mode=="horizontal")&&(u.level==0&&r.mode=="horizontal"||(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)),r.mode==="horizontal"&&i.level===0&&i.isOpen&&i.hasItems&&(u=r._nextVisibleItem(i),n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u))),t.preventDefault(),t.stopPropagation()):f==="up"&&(t.altKey?(i.parentItem&&i.parentItem.level==0?(r._closeItem(r,i.parentItem),n(i.parentItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=i.parentItem):i.parentItem===null&&i.level===0&&r.mode==="horizontal"&&r._closeItem(r,i),r.minimized&&(r.minimizedHidden||r.minimizedItem.trigger("click"))):(u=r._prevVisibleItem(i,i.level),e=y(i),r.minimized&&u?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):u&&(u.parentId===i.parentId||u.id==i.parentId&&u.level==0&&r.mode=="horizontal")?u.level==0&&r.mode==="horizontal"&&i.level===0||(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):i&&i.id==e[0].id&&i.parentItem&&i.parentItem.level===0&&r.mode==="horizontal"&&(u=i.parentItem,n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)),t.preventDefault(),t.stopPropagation()),t.keyCode==9)if(u=t.shiftKey?r._prevVisibleItem(i):r._nextVisibleItem(i),u)n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u,t.preventDefault(),t.stopPropagation();else if(r.lockFocus){for(e=[],b=0,c=0;c<r.items.length;c++)r.items[c]!=i&&r.items[c].parentId==i.parentId&&(e[b++]=r.items[c]);e.length>0&&(t.shiftKey?(n(e[e.length-1].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=e[e.length-1]):(n(e[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=e[0]),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")));t.preventDefault();t.stopPropagation()}else i&&(n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=null)}else return!0};this.addHandler(this.host,"keydown",function(n){r.handleKeyDown(n)});r.enableRoundedCorners&&this.host.addClass(r.toThemeProperty("jqx-rc-all"));n.each(this.items,function(){var t=this,s=n(t.element),i,h,c;if(s.attr("role","menuitem"),r.enableRoundedCorners&&s.addClass(r.toThemeProperty("jqx-rc-all")),r.removeHandler(s,"click"),r.addHandler(s,"click",function(i){var f,e,o;t.disabled||r.disabled||(r.keyboardNavigation&&(r.activeItem&&n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=t,n(t.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.minimized&&i.stopPropagation()),r._raiseEvent("2",{type:"mouse",item:t.element,event:i}),r.autoOpen?!r.autoCloseOnClick||u||r.clickToOpen||t.closeOnClick&&(i.data=r,r._closeAll(i)):t.level>0&&(!r.autoCloseOnClick||u||r.clickToOpen||(i.data=r,r._closeAll(i))),u&&r.autoCloseOnClick&&(i.data=r,t.hasItems||r._closeAll(i)),i.target.tagName!="A"&&i.target.tagName!="a"&&(f=t.anchor!=null?n(t.anchor):null,f!=null&&f.length>0&&(e=f.attr("href"),o=f.attr("target"),e!=null&&(o!=null?window.open(e,o):window.location=e))))}),r.removeHandler(s,"mouseenter"),r.removeHandler(s,"mouseleave"),f||r.mode=="simple"||r._renderHover(s,t,u),t.subMenuElement!=null){if(i=n(t.subMenuElement),r.mode=="simple")return i.show(),!0;if(i.wrap('<div class="jqx-menu-popup '+r.toThemeProperty("jqx-menu-popup")+'" style="border: none; background-color: transparent; z-index:'+e+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"><\/div><\/div>'),i.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-i.outerHeight()}),i.data("timer",{}),t.level>0?i.css("left",-i.outerWidth()):r.mode=="horizontal"&&i.css("left",0),e++,h=n(t.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(n(t.subMenuElement).outerWidth())+parseInt(o[0])+"px",height:parseInt(n(t.subMenuElement).outerHeight())+parseInt(o[1])+"px"}),c=s.closest("div.jqx-menu-popup"),c.length>0){var l=i.css("margin-left"),a=i.css("margin-right"),v=i.css("padding-left"),y=i.css("padding-right");h.appendTo(c);i.css("margin-left",l);i.css("margin-right",a);i.css("padding-left",v);i.css("padding-right",y)}else{var l=i.css("margin-left"),a=i.css("margin-right"),v=i.css("padding-left"),y=i.css("padding-right");h.appendTo(n(document.body));i.css("margin-left",l);i.css("margin-right",a);i.css("padding-left",v);i.css("padding-right",y)}r.clickToOpen?(r.removeHandler(s,"mousedown"),r.addHandler(s,"mousedown",function(n){clearTimeout(i.data("timer").hide);i!=null&&i.stop();t.level!=0||t.isOpen||(n.data=r,r._closeAll(n));t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t)})):((u||f)&&(r.removeHandler(s,n.jqx.mobile.getTouchEventName("touchstart")),r.addHandler(s,n.jqx.mobile.getTouchEventName("touchstart"),function(n){return clearTimeout(i.data("timer").hide),i!=null&&i.stop(),t.level!=0||t.isOpen||r.mode=="popup"||(n.data=r,r._closeAll(n)),t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t),!1})),f||(r.addHandler(s,"mouseenter",function(){if((r.autoOpen||t.level>0&&!r.autoOpen)&&clearTimeout(i.data("timer").hide),t.parentId&&t.parentId!=0&&r.menuElements[t.parentId]){var n=r.menuElements[t.parentId].isOpen;if(!n)return}return(r.autoOpen||t.level>0&&!r.autoOpen)&&r._openItem(r,t),!1}),r.addHandler(s,"mousedown",function(){r.autoOpen||t.level!=0||(clearTimeout(i.data("timer").hide),i!=null&&i.stop(),t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t))}),r.addHandler(s,"mouseleave",function(u){if(r.autoCloseOnMouseLeave){clearTimeout(i.data("timer").hide);var e=n(t.subMenuElement),o={left:parseInt(u.pageX),top:parseInt(u.pageY)},f={left:parseInt(e.coord().left),top:parseInt(e.coord().top),width:parseInt(e.outerWidth()),height:parseInt(e.outerHeight())},s=!0;f.left-5<=o.left&&o.left<=f.left+f.width+5&&f.top<=o.top&&o.top<=f.top+f.height&&(s=!1);s&&r._closeItem(r,t,!0)}}),r.removeHandler(h,"mouseenter"),r.addHandler(h,"mouseenter",function(){clearTimeout(i.data("timer").hide)}),r.removeHandler(h,"mouseleave"),r.addHandler(h,"mouseleave",function(){r.autoCloseOnMouseLeave&&(clearTimeout(i.data("timer").hide),clearTimeout(i.data("timer").show),i!=null&&i.stop(),r._closeItem(r,t,!0))})))}});this.mode=="simple"&&this._renderSimpleMode();this._autoSizeHorizontalMenuItems();this._raiseEvent("3",this)},_renderSimpleMode:function(){this.host.show()},createID:function(){var n=Math.random()+"";for(n=n.replace(".",""),n="99"+n,n=n/1;this.items[n];)n=Math.random()+"",n=n.replace(".",""),n=n/1;return"menuItem"+n},_createMenu:function(t,i){var c,s,f,v,d,w,b,a,h,k,r;if(t!=null){i==undefined&&(i=!0);i==null&&(i=!0);var nt=this,e=n(t).find("li"),o=0;for(this.itemMapping=[],c=0;c<e.length;c++)if(s=e[c],f=n(s),s.className.indexOf("jqx-menu")!=-1||this.autoGenerate!=!1){v=s.id;v||(v=this.createID());i&&(s.id=v,this.items[o]=new n.jqx._jqxMenu.jqxMenuItem,this.menuElements[v]=this.items[o]);o+=1;var p=0,u=this,g=f.children();g.each(function(){return(i||(this.className="",u.autoGenerate&&(n(u.items[o-1].subMenuElement)[0].className="",u.minimized||n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-widget-content")),n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-menu-dropdown")),n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-popup")))),this.className.indexOf("jqx-menu-dropdown")!=-1)?(i&&(u.items[o-1].subMenuElement=this),!1):u.autoGenerate&&(this.tagName=="ul"||this.tagName=="UL")?(i&&(u.items[o-1].subMenuElement=this),this.className="",u.minimized||n(this).addClass(u.toThemeProperty("jqx-widget-content")),n(this).addClass(u.toThemeProperty("jqx-menu-dropdown")),n(this).addClass(u.toThemeProperty("jqx-popup")),n(this).attr("role","menu"),u.rtl?n(this).addClass(u.toThemeProperty("jqx-rc-l")):n(this).addClass(u.toThemeProperty("jqx-rc-r")),n(this).addClass(u.toThemeProperty("jqx-rc-b")),!1):void 0});d=f.parents();d.each(function(){return this.className.indexOf("jqx-menu-item")!=-1?(p=this.id,!1):u.autoGenerate&&(this.tagName=="li"||this.tagName=="LI")?(p=this.id,!1):void 0});var w=!1,y=s.getAttribute("type"),l=s.getAttribute("ignoretheme")||s.getAttribute("data-ignoretheme");l?(l=="true"||l==!0)&&(l=!0):l=!1;y?y=="separator"&&(w=!0):y=s.type;w||(y=p?"sub":"top");r=this.items[o-1];i&&(r.id=v,r.parentId=p,r.type=y,r.separator=w,r.element=e[c],b=f.children("a"),r.disabled=s.getAttribute("item-disabled")=="true"?!0:!1,r.level=f.parents("li").length,r.anchor=b.length>0?b:null,r.anchor&&n(r.anchor).attr("tabindex",-1));r.ignoretheme=l;a=this.menuElements[p];a!=null&&(a.ignoretheme&&(r.ignoretheme=a.ignoretheme,l=a.ignoretheme),r.parentItem=a,r.parentElement=a.element);this.autoGenerate&&(y=="separator"?(f.removeClass(),f.addClass(this.toThemeProperty("jqx-menu-item-separator")),f.attr("role","separator")):l||(f[0].className="",this.rtl&&f.addClass(this.toThemeProperty("jqx-rtl")),r.level>0&&!u.minimized?(f.addClass(this.toThemeProperty("jqx-item")),f.addClass(this.toThemeProperty("jqx-menu-item"))):(f.addClass(this.toThemeProperty("jqx-item")),f.addClass(this.toThemeProperty("jqx-menu-item-top")))));r.disabled&&(f.addClass(u.toThemeProperty("jqx-menu-item-disabled")),f.addClass(u.toThemeProperty("jqx-fill-state-disabled")));this.itemMapping[c]={element:e[c],item:r};this.itemMapping["id"+e[c].id]=this.itemMapping[c];i&&!l&&(r.hasItems=f.find("li").length>0,r.hasItems&&r.element&&(n.jqx.aria(n(r.element),"aria-haspopup",!0),r.subMenuElement.id||(r.subMenuElement.id=n.jqx.utilities.createId()),n.jqx.aria(n(r.element),"aria-owns",r.subMenuElement.id)))}for(h=0;h<e.length;h++)if(k=e[h],this.itemMapping["id"+k.id]){if(r=this.itemMapping["id"+k.id].item,!r)continue;r.prevItem=null;r.nextItem=null;h>0&&this.itemMapping["id"+e[h-1].id]&&(r.prevItem=this.itemMapping["id"+e[h-1].id].item);h<e.length-1&&this.itemMapping["id"+e[h+1].id]&&(r.nextItem=this.itemMapping["id"+e[h+1].id].item)}}},destroy:function(){var t=this,i,r;n.jqx.utilities.resize(t.host,null,!0);i=t.host.closest("div.jqx-menu-wrapper");t.removeHandler(i,"keydown");i.remove();t.removeHandler(n("#menuWrapper"+t.element.id),"keydown");n("#menuWrapper"+t.element.id).remove();t.removeHandler(t.host,"keydown");t.removeHandler(t.host,"focus");t.removeHandler(t.host,"blur");t.removeHandler(n(document),"mousedown.menu"+t.element.id,t._closeAfterClick);t.removeHandler(n(document),"mouseup.menu"+t.element.id,t._closeAfterClick);t.removeHandler(n(document),"contextmenu."+t.element.id);t.removeHandler(t.host,"contextmenu."+t.element.id);n.data(document.body,"jqxMenuOldHost"+t.element.id,null);t.isTouchDevice()&&t.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+t.element.id,t._closeAfterClick,this);n(window).off&&n(window).off("resize.menu"+t.element.id);n.each(t.items,function(){var r=this,i=n(r.element),u,f;t.removeHandler(i,"click");t.removeHandler(i,"selectstart");t.removeHandler(i,"mouseenter");t.removeHandler(i,"mouseleave");t.removeHandler(i,"mousedown");t.removeHandler(i,"mouseleave");u=n(r.subMenuElement);f=u.closest("div.jqx-menu-popup");f.remove();delete this.subMenuElement;delete this.element});n.data(document.body,"menuel",null);delete t.menuElements;t.items=[];delete t.items;r=n.data(t.element,"jqxMenu");r&&delete r.instance;t.host.removeClass();t.host.remove();delete t.host;delete t.element},_raiseEvent:function(t,i){var u,r;return i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,r=new n.Event(u),t=="2"&&(args=i.item,args.owner=this,args.clickType=i.type,n.extend(r,i.event),r.type="itemclick"),r.owner=this,r.args=args,this.host.trigger(r)},propertyChangedHandler:function(t,i,r,u){var e,o,s,f;if(this.isInitialized!=undefined&&this.isInitialized!=!1&&(i=="disabled"&&(t.disabled?(t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.host.addClass(t.toThemeProperty("jqx-menu-disabled"))):(t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.host.removeClass(t.toThemeProperty("jqx-menu-disabled")))),u!=r)){if(i=="touchMode"&&(this._isTouchDevice=null,t._render(u,r)),i==="width"||i==="height"){t.setSize();t.mode==="popup"&&(e=this.host.closest("div.jqx-menu-wrapper"),e[i](u),o=this.host[0].id,n("#"+o)[i](u));return}i=="source"&&t.source!=null&&(s=t.loadItems(t.source),t.element.innerHTML=s,f=t.host.find("ul:first"),f.length>0&&(t.refresh(),t._createMenu(f[0]),t._render()));i=="autoCloseOnClick"?u==!1?t.removeHandler(n(document),"mousedown.menu"+this.element.id,t._closeAll):t.addHandler(n(document),"mousedown.menu"+this.element.id,t,t._closeAll):i=="mode"||i=="width"||i=="height"||i=="showTopLevelArrows"?(t.refresh(),i=="mode"?t._render(u,r):t._applyOrientation()):i=="theme"&&n.jqx.utilities.setTheme(r,u,t.host)}}})})(jqxBaseFramework),function(n){n.jqx._jqxMenu.jqxMenuItem=function(n,t,i){return{id:n,parentId:t,parentItem:null,anchor:null,type:i,disabled:!1,level:0,isOpen:!1,hasItems:!1,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:!0}}}(jqxBaseFramework);