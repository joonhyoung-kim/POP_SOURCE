<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--200327/chs/B2BI출발처리검증 신규페이지 추가-->
<!--200331/chs/처리유무 조회조건 추가(APPLY_FLAG)-->
<mapper namespace="com.thirautech.mom.shipping.b2biDepartureVerification">

	<select id="get_b2biDepartureVerification_list" resultType="camelMap" parameterType="java.util.HashMap">
		 SELECT PO_NO
			  , DEPARTURE_NUMBER
			  , DEPARTURE_STATUS
			  , PART_NO
			  , DEPARTURE_QTY
			  , TO_CHAR(DEPARTURE_DATE,'yyyy-mm-dd hh24:mi:ss') AS DEPARTURE_DATE
			  , TO_CHAR(DEPARTURE_CANCEL_DATE,'yyyy-mm-dd hh24:mi:ss') AS DEPARTURE_CANCEL_DATE
			  , DESCRIPTION
			  , APPLY_FLAG
			  , INTERFACE_ID
		   FROM MOM_LGE_B2B_DEPARTURE
		  WHERE DIVISION_CD = #{divisionCd, jdbcType=VARCHAR}
		    AND DEPARTURE_DATE BETWEEN TO_DATE(#{fromDate, jdbcType=VARCHAR},'yyyy-mm-dd') AND TO_DATE(#{toDate, jdbcType=VARCHAR},'yyyy-mm-dd') + 23.9997/24
			<if test = "description != null and description != ''">
			AND    DESCRIPTION = #{description, jdbcType=VARCHAR}
 			</if>
 			<if test = "applyFlag != null and applyFlag != ''">
			AND    APPLY_FLAG = #{applyFlag, jdbcType=VARCHAR}
 			</if>
	        <if test = "poNo != null and poNo != ''">
	        AND    UPPER(PO_NO) LIKE '%' || TRIM(UPPER(#{poNo, jdbcType=VARCHAR})) || '%'
	        </if>
	        <if test = "departureNumber != null and departureNumber != ''">
	        AND    UPPER(DEPARTURE_NUMBER) LIKE '%' || TRIM(UPPER(#{departureNumber, jdbcType=VARCHAR})) || '%'
	        </if>
	        <if test = "departureStatus != null and departureStatus != ''">
			AND    DEPARTURE_STATUS = #{departureStatus, jdbcType=VARCHAR}
			</if>
		ORDER BY PO_NO
			   , DEPARTURE_NUMBER
			   , INTERFACE_ID			
	</select>

</mapper>