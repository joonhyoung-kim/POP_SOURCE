(function(n){n.jqx.jqxWidget("jqxTree","",{});n.extend(n.jqx._jqxTree.prototype,{defineInstance:function(){var t={items:[],width:null,height:null,easing:"easeInOutCirc",animationShowDuration:"fast",animationHideDuration:"fast",treeElements:[],disabled:!1,enableHover:!0,keyboardNavigation:!0,enableKeyboardNavigation:!0,toggleMode:"dblclick",source:null,checkboxes:!1,checkSize:13,toggleIndicatorSize:16,hasThreeStates:!1,selectedItem:null,touchMode:"auto",allowDrag:!0,allowDrop:!0,searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,animationHideDelay:0,submitCheckedItems:!1,dragStart:null,dragEnd:null,rtl:!1,dropAction:"default",events:["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart","itemClick"],aria:{"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return n.extend(!0,this,t),t},createInstance:function(){var i=this,r,t;this.host.attr("role","tree");this.host.attr("data-role","treeview");this.enableKeyboardNavigation=this.keyboardNavigation;this.propertyChangeMap.disabled=function(t,r,u,f){i.disabled?i.host.addClass(i.toThemeProperty("jqx-tree-disabled")):i.host.removeClass(i.toThemeProperty("jqx-tree-disabled"));n.jqx.aria(i,"aria-disabled",f)};this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width);this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height);this.width!=null&&this.width.toString().indexOf("%")!=-1&&this.host.width(this.width);this.height!=null&&this.height.toString().indexOf("%")!=-1&&this.host.height(this.height);this.host.attr("tabindex")||this.host.attr("tabIndex",1);this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),n.jqx.aria(this,"aria-disabled",!0));this.host.jqxDragDrop&&jqxTreeDragDrop();this.originalInnerHTML=this.element.innerHTML;this.createdTree=!1;this.element.innerHTML.indexOf("UL")&&(t=this.host.find("ul:first"),t.length>0&&(this.createTree(t[0]),this.createdTree=!0));this.source!=null&&(r=this.loadItems(this.source),this.element.innerHTML=r,t=this.host.find("ul:first"),t.length>0&&(this.createTree(t[0]),this.createdTree=!0));this._itemslength=this.items.length;this.createdTree||this.host.find("ul").length==0&&(this.host.append(n("<ul><\/ul>")),t=this.host.find("ul:first"),t.length>0&&(this.createTree(t[0]),this.createdTree=!0),this.createdTree=!0);this.createdTree==!0&&(this._render(),this._handleKeys());this._updateCheckLayout()},checkItems:function(t,i){var u=this,f,r;if(t!=null){var e=0,s=!1,o=0,r=n(t.element).find("li");o=r.length;n.each(r,function(){var n=u.itemMapping["id"+this.id].item;n.checked!=!1&&(n.checked==null&&(s=!0),e++)});t!=i?e==o?this.checkItem(t.element,!0,"tree"):e>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree"):(f=i.checked,r=n(i.element).find("li"),n.each(r,function(){var n=u.itemMapping["id"+this.id].item;u.checkItem(this,f,"tree")}));this.checkItems(this._parentItem(t),i)}else f=i.checked,r=n(i.element).find("li"),n.each(r,function(){var n=u.itemMapping["id"+this.id].item;u.checkItem(this,f,"tree")})},_getMatches:function(t,i){var r,f,u,e;if(t==undefined||t.length==0)return-1;for(r=this.items,f=[],u=0;u<r.length;u++)this._isVisible(r[u])&&!r[u].disabled&&f.push(r[u]);return r=f,i!=undefined&&(r=r.slice(i)),e=[],n.each(r,function(){var i=this.label,r;i||(i="");r=n.jqx.string.startsWithIgnoreCase(i.toString(),t);r&&e.push({id:this.id,element:this.element})}),e},_handleKeys:function(){var t=this;this.addHandler(this.host,"keydown",function(i){var r=i.keyCode,s,p,v,y,o,c,w,l,f,a,e,u;if((t.keyboardNavigation||t.enableKeyboardNavigation)&&t.selectedItem!=null){if(s=t.selectedItem.element,t.incrementalSearch&&!(r>=33&&r<=40)){p=-1;t._searchString||(t._searchString="");(r==8||r==46)&&t._searchString.length>=1&&(t._searchString=t._searchString.substr(0,t._searchString.length-1));var h=String.fromCharCode(r),b=!isNaN(parseInt(h));if(r>=65&&r<=97||b||r==8||r==32||r==46){if(i.shiftKey||(h=h.toLocaleLowerCase()),r!=8&&r!=32&&r!=46&&(t._searchString.length>0&&t._searchString.substr(0,1)==h||(t._searchString+=h)),r==32&&(t._searchString+=" "),t._searchTime=new Date,c=t.selectedItem,c){for(v=c.id,y=-1,f=0;f<t.items.length;f++)if(t.items[f].id==v){y=f+1;break}o=t._getMatches(t._searchString,y);(o.length==0||o.length>0&&o[0].id==v)&&(o=t._getMatches(t._searchString))}else o=t._getMatches(t._searchString);o.length>0&&(c=t.selectedItem,t.selectedItem&&t.selectedItem.id!=o[0].id&&(t.clearSelection(),t.selectItem(o[0].element,"keyboard")),t._lastSearchString=t._searchString)}if(t._searchTimer!=undefined&&clearTimeout(t._searchTimer),(r==27||r==13)&&(t._searchString="",t._lastSearchString=""),t._searchTimer=setTimeout(function(){t._searchString="";t._lastSearchString=""},500),p>=0)return;if(0)return!1}switch(r){case 32:return t.checkboxes?(t.fromKey=!0,w=n(t.selectedItem.checkBoxElement).jqxCheckBox("checked"),t.checkItem(t.selectedItem.element,!w,"tree"),t.hasThreeStates&&t.checkItems(t.selectedItem,t.selectedItem),!1):!0;case 33:for(l=t._getItemsOnPage(),e=t.selectedItem,f=0;f<l;f++)e=t._prevVisibleItem(e);return e!=null?(t.selectItem(e.element,"keyboard"),t.ensureVisible(e.element)):(t.selectItem(t._firstItem().element,"keyboard"),t.ensureVisible(t._firstItem().element)),!1;case 34:for(l=t._getItemsOnPage(),u=t.selectedItem,f=0;f<l;f++)u=t._nextVisibleItem(u);return u!=null?(t.selectItem(u.element,"keyboard"),t.ensureVisible(u.element)):(t.selectItem(t._lastItem().element,"keyboard"),t.ensureVisible(t._lastItem().element)),!1;case 37:case 39:return(r==37&&!t.rtl||r==39&&t.rtl)&&(t.selectedItem.hasItems&&t.selectedItem.isExpanded?t.collapseItem(s):(a=t._parentItem(t.selectedItem),a!=null&&(t.selectItem(a.element,"keyboard"),t.ensureVisible(a.element)))),(r==39&&!t.rtl||r==37&&t.rtl)&&t.selectedItem.hasItems&&(t.selectedItem.isExpanded?(u=t._nextVisibleItem(t.selectedItem),u!=null&&(t.selectItem(u.element,"keyboard"),t.ensureVisible(u.element))):t.expandItem(s)),!1;case 13:return t.selectedItem.hasItems&&(t.selectedItem.isExpanded?t.collapseItem(s):t.expandItem(s)),!1;case 36:return t.selectItem(t._firstItem().element,"keyboard"),t.ensureVisible(t._firstItem().element),!1;case 35:return t.selectItem(t._lastItem().element,"keyboard"),t.ensureVisible(t._lastItem().element),!1;case 38:return e=t._prevVisibleItem(t.selectedItem),e!=null&&(t.selectItem(e.element,"keyboard"),t.ensureVisible(e.element)),!1;case 40:return u=t._nextVisibleItem(t.selectedItem),u!=null&&(t.selectItem(u.element,"keyboard"),t.ensureVisible(u.element)),!1}}})},_firstItem:function(){var t=null,f=this,e=this.host.find("ul:first"),r=n(e).find("li"),u;for(i=0;i<=r.length-1;i++)if(u=r[i],t=this.itemMapping["id"+u.id].item,f._isVisible(t))return t;return null},_lastItem:function(){var t=null,f=this,e=this.host.find("ul:first"),r=n(e).find("li"),u;for(i=r.length-1;i>=0;i--)if(u=r[i],t=this.itemMapping["id"+u.id].item,f._isVisible(t))return t;return null},_parentItem:function(t){var i,r;return t==null||t==undefined?null:(i=t.parentElement,!i)?null:(r=null,n.each(this.items,function(){if(this.element==i)return r=this,!1}),r)},_nextVisibleItem:function(n){if(n==null||n==undefined)return null;for(var t=n;t!=null;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(n){if(n==null||n==undefined)return null;for(var t=n;t!=null;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(n){if(n==null||n==undefined||!this._isElementVisible(n.element))return!1;var t=this._parentItem(n);if(t==null)return!0;if(t!=null){if(!this._isElementVisible(t.element))return!1;if(t.isExpanded){while(t!=null)if((t=this._parentItem(t),t!=null&&!this._isElementVisible(t.element))||t!=null&&!t.isExpanded)return!1}else return!1}return!0},_getItemsOnPage:function(){var t=0,f=this.panel.jqxPanel("getVScrollPosition"),u=parseInt(this.host.height()),i=0,r=this._firstItem();if(parseInt(n(r.element).height())>0)while(i<=u)i+=parseInt(n(r.element).outerHeight()),t++;return t},_isElementVisible:function(t){return t==null?!1:n(t).css("display")!="none"&&n(t).css("visibility")!="hidden"?!0:!1},refresh:function(t){var i;this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width);this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height);this.panel&&(this.width!=null&&this.width.toString().indexOf("%")!=-1?(i=this,this.panel.jqxPanel("width","100%"),i.removeHandler(n(window),"resize.jqxtree"+i.element.id),i.addHandler(n(window),"resize.jqxtree"+i.element.id,function(){i._calculateWidth()})):this.panel.jqxPanel("width",this.host.width()),this.panel.jqxPanel("_arrange"));this._calculateWidth();n.jqx.isHidden(this.host)&&(i=this,this._hiddenTimer&&clearInterval(this._hiddenTimer),this._hiddenTimer=setInterval(function(){n.jqx.isHidden(i.host)||(clearInterval(i._hiddenTimer),i._calculateWidth())},100));t!=!0&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(n,t){this.width=n;this.height=t;this.refresh()},loadItems:function(t){var r,i;if(t!=null)return r=this,this.items=[],i="<ul>",n.map(t,function(n){if(n==undefined)return null;i+=r._parseItem(n)}),i+="<\/ul>"},_parseItem:function(n){var t="",i,f,e,o,s,h,u,c,r;return n==undefined?null:(i=n.label,!n.label&&n.html&&(i=n.html),i||(i="Item"),typeof n=="string"&&(i=n),f=!1,n.expanded!=undefined&&n.expanded&&(f=!0),e=!1,n.locked!=undefined&&n.locked&&(e=!0),o=!1,n.selected!=undefined&&n.selected&&(o=!0),s=!1,n.disabled!=undefined&&n.disabled&&(s=!0),h=!1,n.checked!=undefined&&n.checked&&(h=!0),u=n.icon,c=n.iconsize,t+="<li",f&&(t+=' item-expanded="true" '),e&&(t+=' item-locked="true" '),s&&(t+=' item-disabled="true" '),o&&(t+=' item-selected="true" '),c&&(t+=' item-iconsize="'+n.iconsize+'" '),u!=null&&u!=undefined&&(t+=' item-icon="'+u+'" '),n.label&&!n.html&&(t+=' item-label="'+i+'" '),n.value!=null&&(t+=' item-value="'+n.value+'" '),n.checked!=undefined&&(t+=' item-checked="'+h+'" '),r="",n.id!=undefined?(r=n.id,t+=' id="'+r+'" '):(r=this.createID(),t+=' id="'+r+'" '),t+=">"+i,n.items&&(t+=this.loadItems(n.items)),this._valueList||(this._valueList=[]),this._valueList[r]=n.value,t+"<\/li>")},ensureVisible:function(t){if(t!=null&&t!=undefined){var r=this.panel.jqxPanel("getVScrollPosition"),f=this.panel.jqxPanel("getHScrollPosition"),u=parseInt(this.host.height()),i=n(t).position().top;(i<=r||i>=u+r)&&this.panel.jqxPanel("scrollTo",f,i-u+n(t).outerHeight())}},_syncItems:function(t){this._visibleItems=[];var i=this;n.each(t,function(){var t=n(this),r,u;t.css("display")!="none"&&(r=t.outerHeight(),t.height()>0&&(u=parseInt(t.offset().top),i._visibleItems[i._visibleItems.length]={element:this,top:u,height:r,bottom:u+r}))})},hitTest:function(t,i){var s=this,r=this,u=null,o=this.host.find(".jqx-item"),f,e;return this._syncItems(o),r._visibleItems&&(f=parseInt(r.host.offset().left),e=r.host.outerWidth(),n.each(r._visibleItems,function(){if(t>=f&&t<f+e&&this.top+5<i&&i<this.top+this.height){var o=n(this.element).parents("li:first");if(o.length>0&&(u=r.getItem(o[0]),u!=null))return u.height=this.height,u.top=this.top,!1}})),u},addBefore:function(n,t,i){return this.addBeforeAfter(n,t,!0,i)},addAfter:function(n,t,i){return this.addBeforeAfter(n,t,!1,i)},addBeforeAfter:function(t,i,r,u){var y=this,l=[],a,f,e,p,s,o,h,c,v;for(i&&i.treeInstance!=undefined&&(i=i.element),n.isArray(t)?l=t:l[0]=t,a="",f=this,n.each(l,function(){a+=f._parseItem(this)}),e=n(a),y.element.innerHTML.indexOf("UL")&&(p=y.host.find("ul:first")),i==undefined&&i==null?p.append(e):r?n(i).before(e):n(i).after(e),s=e,o=0;o<s.length;o++)if(this._createItem(s[o]),h=n(s[o]).find("li"),h.length>0)for(c=0;c<h.length;c++)this._createItem(h[c]);if(v=function(t){f._refreshMapping(!1);f._updateItemsNavigation();t&&f.allowDrag&&f._enableDragDrop&&f._enableDragDrop();f.selectedItem!=null&&(n(f.selectedItem.titleElement).addClass(f.toThemeProperty("jqx-fill-state-pressed")),n(f.selectedItem.titleElement).addClass(f.toThemeProperty("jqx-tree-item-selected")))},u==!1){v(!0);this._raiseEvent("4",{items:this.getItems()});return}v(!1);f._render();this._raiseEvent("4",{items:this.getItems()});f.checkboxes&&f._updateCheckLayout(null)},addTo:function(t,i,r){var e=this,v=[],y,u,o,w,f,h,b,c,s,l,a,p;for(i&&i.treeInstance!=undefined&&(i=i.element),n.isArray(t)?v=t:v[0]=t,y="",u=this,n.each(v,function(){y+=u._parseItem(this)}),o=n(y),e.element.innerHTML.indexOf("UL")&&(w=e.host.find("ul:first")),i==undefined&&i==null?w.append(o):(i=n(i),f=i.find("ul:first"),f.length==0?(ulElement=n("<ul><\/ul>"),n(i).append(ulElement),f=i.find("ul:first"),h=e.itemMapping["id"+i[0].id].item,h.subtreeElement=f[0],h.hasItems=!0,f.addClass(e.toThemeProperty("jqx-tree-dropdown")),u.rtl&&f.addClass(e.toThemeProperty("jqx-tree-dropdown-rtl")),f.append(o),b=f.find("li:first"),h.parentElement=b):f.append(o)),c=o,s=0;s<c.length;s++)if(this._createItem(c[s]),l=n(c[s]).find("li"),l.length>0)for(a=0;a<l.length;a++)this._createItem(l[a]);if(p=function(t){u._refreshMapping(!1);u._updateItemsNavigation();t&&u.allowDrag&&u._enableDragDrop&&u._enableDragDrop();u.selectedItem!=null&&(n(u.selectedItem.titleElement).addClass(u.toThemeProperty("jqx-fill-state-pressed")),n(u.selectedItem.titleElement).addClass(u.toThemeProperty("jqx-tree-item-selected")))},r==!1){p(!0);this._raiseEvent("4",{items:this.getItems()});return}p(!1);u._render();u.checkboxes&&u._updateCheckLayout(null);this._raiseEvent("4",{items:this.getItems()})},updateItem:function(t,i){var r=t.treeInstance!=undefined?t:this.getItem(t),o,s,e,f,u;return(r||(o=t,t=i,i=o,r=t.treeInstance!=undefined?t:this.getItem(t)),r)?(typeof i=="string"&&(i={label:i}),i.value&&(r.value=i.value),i.label&&(r.label=i.label,n.jqx.utilities.html(n(r.titleElement),i.label),s=n.jqx.browser.msie&&n.jqx.browser.version<8,s&&(n(document.body).append(this._measureItem),this._measureItem.html(n(r.titleElement).text()),e=this._measureItem.width(),r.icon&&(e+=20),n(n(r.titleElement).find("img")).length>0&&(e+=20),n(r.titleElement).css("max-width",e+"px"),this._measureItem.remove())),i.icon&&(n(r.element).children(".itemicon").length>0?n(r.element).find(".itemicon")[0].src=i.icon:(f=i.iconsize,f||(f=16),u=n('<img width="'+f+'" height="'+f+'" style="float: left;" class="itemicon" src="'+i.icon+'"/>'),n(r.titleElement).prepend(u),u.css("margin-right","4px"),this.rtl&&(u.css("margin-right","0px"),u.css("margin-left","4px"),u.css("float","right")))),i.expanded&&this.expandItem(r),i.disabled&&this.disableItem(r),i.selected&&this.selectItem(r),!0):!1},removeItem:function(t,i){if(t!=undefined&&t!=null){t.treeInstance!=undefined&&(t=t.element);var r=this,o=t.id,f=-1,u=this.getItem(t);if(u&&(f=this.items.indexOf(u),f!=-1&&function e(t){var r=-1,i;r=this.items.indexOf(t);r!=-1&&this.items.splice(r,1);var f=n(t.element).find("li"),o=f.length,s=this,u=[];if(o>0)for(n.each(f,function(){var n=s.itemMapping["id"+this.id].item;u.push(n)}),i=0;i<u.length;i++)e.apply(this,[u[i]])}.apply(this,[u])),this.host.find("#"+t.id).length>0&&n(t).remove(),i==!1){this._raiseEvent("5");return}r._updateItemsNavigation();r.allowDrag&&r._enableDragDrop?r._render(!0,!1):r._render();r.selectedItem!=null&&r.selectedItem.element==t&&(n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected")),r.selectedItem=null);this._raiseEvent("5");r.checkboxes&&r._updateCheckLayout(null)}},clear:function(){this.items=[];this.itemMapping=[];var n=this.host.find("ul:first");n.length>0&&(n[0].innerHTML="");this.selectedItem=null},disableItem:function(t){if(t==null)return!1;t.treeInstance!=undefined&&(t=t.element);var i=this;n.each(i.items,function(){var r=this;if(r.element==t)return r.disabled=!0,n(r.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),n(r.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&r.checkBoxElement&&n(r.checkBoxElement).jqxCheckBox({disabled:!0}),!1})},_updateInputSelection:function(){var r,t,u,n,i;if(this.input&&(this.selectedItem==null?this.input.val(""):(r=this.selectItem.value,r==null&&(r=this.selectedItem.label),this.input.val(r)),this.checkboxes&&(t=this.getCheckedItems(),this.submitCheckedItems))){for(u="",n=0;n<t.length;n++)i=t[n].value,i==null&&(i=t[n].label),u+=n==t.length-1?i:i+",";this.input.val(u)}},getCheckedItems:function(){var t=[],i=this;return n.each(i.items,function(){var n=this;n.checked&&t.push(n)}),t},getUncheckedItems:function(){var t=[],i=this;return n.each(i.items,function(){var n=this;n.checked||t.push(n)}),t},checkAll:function(){var t=this;n.each(t.items,function(){var t=this;t.disabled||(t.checked=!0,n(t.checkBoxElement).jqxCheckBox("_setState",!0))});this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){var t=this;n.each(t.items,function(){var t=this;t.disabled||(t.checked=!1,n(t.checkBoxElement).jqxCheckBox("_setState",!1))});this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,r){if(t==null)return!1;i===undefined&&(i=!0);t.treeInstance!=undefined&&(t=t.element);var e=this,f=!1,u=null;n.each(e.items,function(){var r=this;if(r.element==t&&!r.disabled)return f=!0,r.checked=i,u=r,n(r.checkBoxElement).jqxCheckBox({checked:i}),!1});f&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection());r==undefined&&u&&this.hasThreeStates&&this.checkItems(u,u)},uncheckItem:function(n){this.checkItem(n,!1)},enableItem:function(t){if(t==null)return!1;t.treeInstance!=undefined&&(t=t.element);var i=this;n.each(i.items,function(){var r=this;if(r.element==t)return r.disabled=!1,n(r.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),n(r.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&r.checkBoxElement&&n(r.checkBoxElement).jqxCheckBox({disabled:!1}),!1})},enableAll:function(){var t=this;n.each(t.items,function(){var i=this;i.disabled=!1;n(i.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled"));n(i.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled"));t.checkboxes&&i.checkBoxElement&&n(i.checkBoxElement).jqxCheckBox({disabled:!1})})},lockItem:function(t){if(t==null)return!1;var i=this;n.each(i.items,function(){var n=this;if(n.element==t)return n.locked=!0,!1})},unlockItem:function(t){if(t==null)return!1;var i=this;n.each(i.items,function(){var n=this;if(n.element==t)return n.locked=!1,!1})},getItems:function(){return this.items},getItem:function(n){return n==null||n==undefined?null:this.itemMapping["id"+n.id]?this.itemMapping["id"+n.id].item:null},isExpanded:function(n){if(n==null||n==undefined)return!1;var t=this.itemMapping["id"+n.id].item;return t!=null?t.isExpanded:!1},isSelected:function(n){if(n==null||n==undefined)return!1;var t=this.itemMapping["id"+n.id].item;return t!=null?t==this.selectedItem:!1},getPrevItem:function(n){var t=this.getItem(n);return n.treeInstance!=undefined&&(t=n),this._prevVisibleItem(t)},getNextItem:function(n){var t=this.getItem(n);return n.treeInstance!=undefined&&(t=n),this._nextVisibleItem(t)},getSelectedItem:function(){return this.selectedItem},val:function(n){var i,t;if(arguments.length==0||typeof n=="object")return this.selectedItem;typeof n=="string"?(i=this.host.find("#"+n),i.length>0&&(t=this.getItem(i[0]),this.selectItem(t))):(t=this.getItem(n),this.selectItem(t))},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t,i){var r,u;if(!this.disabled){if(r=this,t&&t.treeInstance!=undefined&&(t=t.element),t==null||t==undefined){r.selectedItem!=null&&(n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected")),r.selectedItem=null);return}(this.selectedItem==null||this.selectedItem.element!=t)&&(u=this.selectedItem!=null?this.selectedItem.element:null,u&&n(u).removeAttr("aria-selected"),n.each(r.items,function(){var i=this;this.selected=!1;i.disabled||i.element==t&&(r.selectedItem==null||r.selectedItem!=null&&r.selectedItem.titleElement!=i.titleElement)&&(r.selectedItem!=null&&(n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),n(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected"))),n(i.titleElement).addClass(r.toThemeProperty("jqx-fill-state-pressed")),n(i.titleElement).addClass(r.toThemeProperty("jqx-tree-item-selected")),r.selectedItem=i,this.selected=!0,n(i.element).attr("aria-selected","true"),n.jqx.aria(r,"aria-activedescendant",i.element.id))}),this._updateInputSelection(),i||(i=null),this._raiseEvent("2",{element:t,prevElement:u,type:i}))}},collapseAll:function(){this.isUpdating=!0;var t=this,i=t.items,r=this.animationHideDuration;this.animationHideDuration=0;n.each(i,function(){var n=this;n.isExpanded==!0&&t._collapseItem(t,n)});setTimeout(function(){t.isUpdating=!1;t._calculateWidth()},this.animationHideDuration);this.animationHideDuration=r},expandAll:function(){var t=this,i;this.isUpdating=!0;i=this.animationShowDuration;this.animationShowDuration=0;n.each(this.items,function(){var n=this;n.hasItems&&t._expandItem(t,n)});setTimeout(function(){t.isUpdating=!1;t._calculateWidth()},this.animationShowDuration);this.animationShowDuration=i},collapseItem:function(t){if(t==null)return!1;t.treeInstance!=undefined&&(t=t.element);var i=this;return n.each(this.items,function(){var n=this;if(n.isExpanded==!0&&n.element==t)return i._collapseItem(i,n),!1}),!0},expandItem:function(t){if(t==null)return!1;t.treeInstance!=undefined&&(t=t.element);var i=this;return n.each(i.items,function(){var n=this;n.isExpanded!=!1||n.element!=t||n.disabled||n.locked||(i._expandItem(i,n),n.parentElement&&i.expandItem(n.parentElement))}),!0},_getClosedSubtreeOffset:function(t){var i=n(t.subtreeElement),u=-i.outerHeight(),r=-i.outerWidth();return r=0,{left:r,top:u}},_collapseItem:function(t,i){var u,f;if(t==null||i==null||i.disabled||t.disabled||t.locked)return!1;var r=n(i.subtreeElement),e=this._getClosedSubtreeOffset(i),o=e.top,s=e.left;$treeElement=n(i.element);u=t.animationHideDelay;u=0;r.data("timer").show!=null&&(clearTimeout(r.data("timer").show),r.data("timer").show=null);f=function(){var u,f;i.isExpanded=!1;t.checkboxes&&(u=r.find(".chkbox"),u.stop(),u.css("opacity",1),r.find(".chkbox").animate({opacity:0},50));f=n(i.arrow);t._arrowStyle(f,"",i.isExpanded);r.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1;t._calculateWidth();var u=n(i.arrow);t._arrowStyle(u,"",i.isExpanded);r.hide();t._raiseEvent("1",{element:i.element})})};u>0?r.data("timer").hide=setTimeout(function(){f()},u):f()},_expandItem:function(t,i){var r,f,u,e;if(t==null||i==null||i.isExpanded||i.locked||i.disabled||t.disabled)return!1;r=n(i.subtreeElement);r.data("timer")!=null&&r.data("timer").hide!=null&&clearTimeout(r.data("timer").hide);var o=n(i.element);if(parseInt(r.css("top"))==0){i.isExpanded=!0;return}f=n(i.arrow);t._arrowStyle(f,"",i.isExpanded);t.checkboxes&&(u=r.find(".chkbox"),u.stop(),u.css("opacity",0),u.animate({opacity:1},t.animationShowDuration));r.slideDown(t.animationShowDuration,t.easing,function(){var r=n(i.arrow);i.isExpanded=!0;t._arrowStyle(r,"",i.isExpanded);i.isExpanding=!1;t._raiseEvent("0",{element:i.element});t._calculateWidth()});t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement&&(e=n(i.subtreeElement).find("li"),n.each(e,function(){var n=t.getItem(this);n!=null&&t._updateCheckItemLayout(n)})))},_calculateWidth:function(){var i=this,e=this.checkboxes?20:0,t=0,r,f,u;this.isUpdating||(n.each(this.items,function(){var f=n(this.element).height(),u,i,r;f!=0&&(u=n(this.titleElement).outerWidth()+10+e+(1+this.level)*20,t=Math.max(t,u),this.hasItems&&(i=parseInt(n(this.titleElement).css("padding-top")),isNaN(i)&&(i=0),i=i*2,i+=2,r=(i+n(this.titleElement).height())/2-17/2,n.jqx.browser.msie&&n.jqx.browser.version<9?n(this.arrow).css("margin-top","3px"):parseInt(r)>=0&&n(this.arrow).css("margin-top",parseInt(r)+"px")))}),this.toggleIndicatorSize>16&&(t=t+this.toggleIndicatorSize-16),i.panel&&(t>this.host.width()?(r=t-this.host.width(),f=i.panel.jqxPanel("vScrollBar").css("visibility")!=="hidden"?10:0,r+=f,i.panel.jqxPanel({horizontalScrollBarMax:r})):i.panel.jqxPanel({horizontalScrollBarMax:0})),this.host.find("ul:first").width(t),u=this.host.width()-30,u>0&&this.host.find("ul:first").css("min-width",u),i.panel&&i.panel.jqxPanel("_arrange"))},_arrowStyle:function(n,t,i){var u=this,f,e,r;n.length>0&&(n.removeClass(),f="",t=="hover"&&(f="-"+t),r=i?"-expand":"-collapse",e="jqx-tree-item-arrow"+r+f,n.addClass(u.toThemeProperty(e)),this.rtl||(r=i?"-down":"-right",n.addClass(u.toThemeProperty("jqx-icon-arrow"+r+""))),this.rtl&&(n.addClass(u.toThemeProperty(e+"-rtl")),r=i?"-down":"-left",n.addClass(u.toThemeProperty("jqx-icon-arrow"+r+""))))},_initialize:function(){var t=this,i;this.host.addClass(t.toThemeProperty("jqx-widget"));this.host.addClass(t.toThemeProperty("jqx-widget-content"));this.host.addClass(t.toThemeProperty("jqx-tree"));this._updateDisabledState();i=n.jqx.browser.msie&&n.jqx.browser.version<8;n.each(this.items,function(){var r=this,u,e,f,o,s,h;if($element=n(r.element),u=null,t.checkboxes&&!r.hasItems&&r.checkBoxElement&&n(r.checkBoxElement).css("margin-left","0px"),i)!r.hasItems&&n(r.element).find("ul").length>0&&n(r.element).find("ul").remove();else if(r.hasItems)t.rtl?r.element.style.marginRight="0px":r.element.style.marginLeft="0px";else return t.rtl?r.element.style.marginRight=parseInt(t.toggleIndicatorSize)+"px":r.element.style.marginLeft=parseInt(t.toggleIndicatorSize)+"px",e=n(r.arrow),e.length>0&&(e.remove(),r.arrow=null),!0;e=n(r.arrow);e.length>0&&e.remove();u=n('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>');u.prependTo($element);t.rtl?u.css("float","right"):u.css("float","left");u.css("clear","both");u.width(t.toggleIndicatorSize);t._arrowStyle(u,"",r.isExpanded);f=parseInt(n(this.titleElement).css("padding-top"));isNaN(f)&&(f=0);f=f*2;f+=2;o=(f+n(this.titleElement).height())/2-17/2;n.jqx.browser.msie&&n.jqx.browser.version<9?u.css("margin-top","3px"):parseInt(o)>=0&&u.css("margin-top",parseInt(o)+"px");$element.addClass(t.toThemeProperty("jqx-disableselect"));u.addClass(t.toThemeProperty("jqx-disableselect"));s="click";h=t.isTouchDevice();h&&(s=n.jqx.mobile.getTouchEventName("touchend"));t.addHandler(u,s,function(){return r.isExpanded?t._collapseItem(t,r):t._expandItem(t,r),!1});t.addHandler(u,"selectstart",function(){return!1});t.addHandler(u,"mouseup",function(){if(!h)return!1});r.hasItems=n(r.element).find("li").length>0;r.arrow=u[0];r.hasItems||u.css("visibility","hidden");$element.css("float","none")})},_getOffset:function(t){var u=n(window).scrollTop(),f=n(window).scrollLeft(),i=n.jqx.mobile.isSafariMobileBrowser(),r=n(t).offset(),e=r.top,o=r.left;return i!=null&&i?{left:o-f,top:e-u}:n(t).offset()},_renderHover:function(t,i,r){var u=this,f;r||(f=n(i.titleElement),u.addHandler(f,"mouseenter",function(){i.disabled||!u.enableHover||u.disabled||(f.addClass(u.toThemeProperty("jqx-fill-state-hover")),f.addClass(u.toThemeProperty("jqx-tree-item-hover")))}),u.addHandler(f,"mouseleave",function(){i.disabled||!u.enableHover||u.disabled||(f.removeClass(u.toThemeProperty("jqx-fill-state-hover")),f.removeClass(u.toThemeProperty("jqx-tree-item-hover")))}))},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){if(this.input==null){var t=this.host.attr("name");t&&this.host.attr("name","");this.input=n("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",t);this._updateInputSelection()}},render:function(){this._updateItemsNavigation();this._render()},_render:function(t,i){var u,o,r,f,e;n.jqx.browser.msie&&n.jqx.browser.version<8&&(u=this,n.each(this.items,function(){var t=n(this.element),r=t.parent(),f=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13,i,u;t.css("min-width",f);i=parseInt(r.css("min-width"));isNaN(i)&&(i=0);u=t.css("min-width");i<parseInt(t.css("min-width"))&&r.css("min-width",u);this.titleElement[0].style.width=null}));var u=this;if(n.data(u.element,"animationHideDelay",u.animationHideDelay),n.data(document.body,"treeel",this),this._initialize(),o=this.isTouchDevice(),o&&this.toggleMode=="dblclick"&&(this.toggleMode="click"),(t==undefined||t==!0)&&n.each(this.items,function(){u._updateItemEvents(u,this)}),this.allowDrag&&this._enableDragDrop&&(i==undefined||i==!0)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(this.host.find("#panel"+this.element.id).length>0){this.panel.jqxPanel({touchMode:this.touchMode});this.panel.jqxPanel("refresh");return}this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"><\/div>');r=this.host.find("div:first");f="fixed";(this.height==null||this.height=="auto")&&(f="verticalwrap");(this.width==null||this.width=="auto")&&(f=f=="fixed"?"horizontalwrap":"wrap");r.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:f});n.jqx.browser.msie&&n.jqx.browser.version<8&&r.jqxPanel("content").css("left","0px");r.data({nestedWidget:!0});(this.height==null||this.height!=null&&this.height.toString().indexOf("%")!=-1)&&this.isTouchDevice()&&(this.removeHandler(r,n.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(r,n.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(r,n.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));e=n.data(r[0],"jqxPanel").instance;e!=null&&(this.vScrollInstance=e.vScrollInstance,this.hScrollInstance=e.hScrollInstance);this.panelInstance=e;n.jqx.browser.msie&&n.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0));r[0].className="";this.panel=r}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(n){}},_updateItemEvents:function(t,i){var e=this.isTouchDevice(),f,o,r,s,u,h;e&&(this.toggleMode=n.jqx.mobile.getTouchEventName("touchend"));f=n(i.element);t.enableRoundedCorners&&f.addClass(t.toThemeProperty("jqx-rc-all"));o=e?n.jqx.mobile.getTouchEventName("touchend"):"mousedown";t.touchMode===!0&&t.removeHandler(n(i.checkBoxElement),"mousedown");t.removeHandler(n(i.checkBoxElement),o);t.addHandler(n(i.checkBoxElement),o,function(){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1});r=n(i.titleElement);t.removeHandler(f);s=this.allowDrag&&this._enableDragDrop;s?(t.removeHandler(r,"mousedown.item"),t.removeHandler(r,"click"),t.removeHandler(r,"dblclick"),t.removeHandler(r,"mouseenter"),t.removeHandler(r,"mouseleave")):t.removeHandler(r);t._renderHover(f,i,e);u=n(i.subtreeElement);u.length>0&&(h=i.isExpanded?"block":"none",u.css({overflow:"hidden",display:h}),u.data("timer",{}));t.addHandler(r,"selectstart",function(){return!1});n.jqx.browser.opera&&t.addHandler(r,"mousedown.item",function(){return!1});t.toggleMode!="click"&&t.addHandler(r,"click",function(){t.selectItem(i.element,"mouse");t.panel!=null&&t.panel.jqxPanel({focused:!0});r.focus();t._raiseEvent("9",{element:i.element})});t.addHandler(r,t.toggleMode,function(){return u.length>0&&clearTimeout(u.data("timer").hide),t.panel!=null&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element,"mouse"),i.isExpanding==undefined&&(i.isExpanding=!1),i.isCollapsing==undefined&&(i.isCollapsing=!1),u.length>0?(i.isExpanded?!1==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):!1==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1):void 0})},isTouchDevice:function(){if(this._isTouchDevice!=undefined)return this._isTouchDevice;var t=n.jqx.mobile.isTouchDevice();return this.touchMode==!0?t=!0:this.touchMode==!1&&(t=!1),this._isTouchDevice=t,t},createID:function(){return n.jqx.utilities.createId()},createTree:function(t){var i;if(t!=null){var r=this,u=n(t).find("li");for(this.items=[],this.itemMapping=[],n(t).addClass(r.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&n(t).addClass(r.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||n.jqx.browser.msie&&n.jqx.browser.version<8)&&(this._measureItem=n("<span style='position: relative; visibility: hidden;'><\/span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),n(document.body).append(this._measureItem)),n.jqx.browser.msie&&n.jqx.browser.version<8,i=0;i<u.length;i++)this._createItem(u[i]);(this.rtl||n.jqx.browser.msie&&n.jqx.browser.version<8)&&this._measureItem.remove();this._updateItemsNavigation();this._updateCheckStates()}},_updateCheckLayout:function(t){var i=this;this.checkboxes&&n.each(this.items,function(){(this.level==t||t==undefined)&&i._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(t){if(this.checkboxes&&n(t.titleElement).css("display")!="none"){var i=n(t.checkBoxElement),r=n(t.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2;i.css("margin-top",r);this.rtl||(n.jqx.browser.msie&&n.jqx.browser.version<8?t.titleElement.css("margin-left",parseInt(this.checkSize)+25):t.hasItems&&i.css("margin-left",this.toggleIndicatorSize))}},_updateCheckStates:function(){var t=this;t.hasThreeStates?n.each(this.items,function(){t._updateCheckState(this)}):n.each(this.items,function(){this.checked==null&&t.checkItem(this.element,!1,"tree")})},_updateCheckState:function(t){if(t!=null&&t!=undefined){var r=this,u=0,e=!1,i=0,f=n(t.element).find("li");i=f.length;t.checked&&i>0&&n.each(f,function(){var t=r.itemMapping["id"+this.id].item,n=t.element.getAttribute("item-checked");(n==undefined||n==null||n=="true"||n==!0)&&r.checkItem(t.element,!0,"tree")});n.each(f,function(){var n=r.itemMapping["id"+this.id].item;n.checked!=!1&&(n.checked==null&&(e=!0),u++)});i>0&&(u==i?this.checkItem(t.element,!0,"tree"):u>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree"))}},_updateItemsNavigation:function(){for(var u,r,f=this.host.find("ul:first"),i=n(f).find("li"),t=0;t<i.length;t++)if(u=i[t],this.itemMapping["id"+u.id]){if(r=this.itemMapping["id"+u.id].item,!r)continue;r.prevItem=null;r.nextItem=null;t>0&&this.itemMapping["id"+i[t-1].id]&&(r.prevItem=this.itemMapping["id"+i[t-1].id].item);t<i.length-1&&this.itemMapping["id"+i[t+1].id]&&(r.nextItem=this.itemMapping["id"+i[t+1].id].item)}},_applyTheme:function(t,i){var r=this,u,e,f,o;for(this.host.removeClass("jqx-tree-"+t),this.host.removeClass("jqx-widget-"+t),this.host.removeClass("jqx-widget-content-"+t),this.host.addClass(r.toThemeProperty("jqx-tree")),this.host.addClass(r.toThemeProperty("jqx-widget")),u=this.host.find("ul:first"),n(u).removeClass(r.toThemeProperty("jqx-tree-dropdown-root-"+t)),n(u).addClass(r.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(n(u).removeClass(r.toThemeProperty("jqx-tree-dropdown-root-rtl-"+t)),n(u).addClass(r.toThemeProperty("jqx-tree-dropdown-root-rtl"))),e=n(u).find("li"),f=0;f<e.length;f++)o=e[f],n(o).children().each(function(){if(this.tagName=="ul"||this.tagName=="UL")return n(this).removeClass(r.toThemeProperty("jqx-tree-dropdown-"+t)),n(this).addClass(r.toThemeProperty("jqx-tree-dropdown")),r.rtl&&(n(this).removeClass(r.toThemeProperty("jqx-tree-dropdown-rtl-"+t)),n(this).addClass(r.toThemeProperty("jqx-tree-dropdown-rtl"))),!1});n.each(this.items,function(){var u=this,f=n(u.element),e;f.removeClass(r.toThemeProperty("jqx-tree-item-li-"+t));f.addClass(r.toThemeProperty("jqx-tree-item-li"));this.rtl&&(f.removeClass(r.toThemeProperty("jqx-tree-item-li-"+t)),f.addClass(r.toThemeProperty("jqx-tree-item-li")));n(u.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-"+t));n(u.titleElement).addClass(r.toThemeProperty("jqx-tree-item"));n(u.titleElement).removeClass("jqx-item-"+t);n(u.titleElement).addClass(r.toThemeProperty("jqx-item"));e=n(u.arrow);e.length>0&&r._arrowStyle(e,"",u.isExpanded);u.checkBoxElement&&n(u.checkBoxElement).jqxCheckBox({theme:i});r.enableRoundedCorners&&(f.removeClass("jqx-rc-all-"+t),f.addClass(r.toThemeProperty("jqx-rc-all")))});this.host.jqxPanel&&this.panel.jqxPanel({theme:i})},_refreshMapping:function(t){for(var h,c,a,v,l=this.host.find("li"),f=[],o=[],y=n.data(document.body,"treeItemsStorage"),r=this,u=0;u<l.length;u++){var e=l[u],s=n(e),i=y[e.id];i!=null&&(o[o.length]=i,(t==undefined||t==!0)&&this._updateItemEvents(this,i),i.level=s.parents("li").length,i.treeInstance=this,h=null,c=null,i.titleElement[0].className.indexOf("jqx-fill-state-pressed")!=-1&&(n(i.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),n(i.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected"))),a=s.children(),a.each(function(){if(this.tagName=="ul"||this.tagName=="UL")return i.subtreeElement=this,n(this).addClass(r.toThemeProperty("jqx-tree-dropdown")),r.rtl&&n(this).addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")),!1}),v=s.parents(),v.each(function(){if(this.tagName=="li"||this.tagName=="LI")return c=this.id,h=this,!1}),i.parentElement=h,i.parentId=c,i.hasItems=n(i.element).find("li").length>0,i!=null&&(f[u]={element:e,item:i},f["id"+e.id]=f[u]))}this.itemMapping=f;this.items=o},_createItem:function(t){var h,r,d,b,e,l,a,c,o,v,p,i,ut,ht,w,y,k,s,tt,ft,it,f,rt,u,et,ct;if(t!=null&&t!=undefined){h=t.id;h||(h=this.createID());r=t;d=n(t);r.id=h;b=n.data(document.body,"treeItemsStorage");b==undefined&&(b=[]);e=this.items.length;this.items[e]=new n.jqx._jqxTree.jqxTreeItem;this.treeElements[h]=this.items[e];b[r.id]=this.items[e];n.data(document.body,"treeItemsStorage",b);e=this.items.length;var ot=0,g=this,st=null;d.attr("role","treeitem");d.children().each(function(){if(this.tagName=="ul"||this.tagName=="UL")return g.items[e-1].subtreeElement=this,n(this).addClass(g.toThemeProperty("jqx-tree-dropdown")),g.rtl&&(n(this).addClass(g.toThemeProperty("jqx-tree-dropdown-rtl")),n(this).css("clear","both")),!1});d.parents().each(function(){if(this.tagName=="li"||this.tagName=="LI")return ot=this.id,st=this,!1});l=t.getAttribute("item-expanded");l=l==null||l==undefined||l!="true"&&l!=!0?!1:!0;r.removeAttribute("item-expanded");a=t.getAttribute("item-locked");a=a==null||a==undefined||a!="true"&&a!=!0?!1:!0;r.removeAttribute("item-locked");c=t.getAttribute("item-selected");c=c==null||c==undefined||c!="true"&&c!=!0?!1:!0;r.removeAttribute("item-selected");o=t.getAttribute("item-disabled");o=o==null||o==undefined||o!="true"&&o!=!0?!1:!0;r.removeAttribute("item-disabled");v=t.getAttribute("item-checked");v=v==null||v==undefined||v!="true"&&v!=!0?!1:!0;p=t.getAttribute("item-title");(p==null||p==undefined||p!="true"&&p!=!0)&&(p=!1);r.removeAttribute("item-title");var y=t.getAttribute("item-icon"),w=t.getAttribute("item-iconsize"),nt=t.getAttribute("item-label"),lt=t.getAttribute("item-value");if(r.removeAttribute("item-icon"),r.removeAttribute("item-iconsize"),r.removeAttribute("item-label"),r.removeAttribute("item-value"),i=this.items[e-1],i.id=h,i.value==undefined&&(i.value=this._valueList&&this._valueList[h]?this._valueList[h]:lt),i.icon=y,i.iconsize=w,i.parentId=ot,i.disabled=o,i.parentElement=st,i.element=t,i.locked=a,i.selected=c,i.checked=v,i.isExpanded=l,i.treeInstance=this,this.itemMapping[e-1]={element:r,item:i},this.itemMapping["id"+r.id]=this.itemMapping[e-1],ut=!1,ht=!1,ut=!1,this.rtl&&(n(i.element).css("float","right"),n(i.element).css("clear","both")),ut&&ht||(n(r.firstChild).length>0?(i.icon&&(w=i.iconsize,w||(w=16),y=n('<img width="'+w+'" height="'+w+'" style="float: left;" class="itemicon" src="'+i.icon+'"/>'),n(r).prepend(y),y.css("margin-right","4px"),this.rtl&&(y.css("margin-right","0px"),y.css("margin-left","4px"),y.css("float","right"))),k=r.innerHTML.indexOf("<ul"),k==-1&&(k=r.innerHTML.indexOf("<UL")),k==-1?(i.originalTitle=r.innerHTML,r.innerHTML='<div style="display: inline-block;">'+r.innerHTML+"<\/div>",i.titleElement=n(n(r)[0].firstChild)):(s=r.innerHTML.substring(0,k),s=n.trim(s),i.originalTitle=s,s=n('<div style="display: inline-block;">'+s+"<\/div>"),tt=n(r).find("ul:first"),tt.remove(),r.innerHTML="",n(r).prepend(s),n(r).append(tt),i.titleElement=s,this.rtl&&(s.css("float","right"),tt.css("padding-right","10px"))),n.jqx.browser.msie&&n.jqx.browser.version<8&&(n(n(r)[0].firstChild).css("display","inline-block"),ft=!1,this._measureItem.parents().length==0&&(n(document.body).append(this._measureItem),ft=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=n(i.titleElement).text(),it=this._measureItem.width(),i.icon&&(it+=20),n(n(item.titleElement).find("img")).length>0&&(it+=20),n(n(r)[0].firstChild).css("max-width",it+"px"),ft&&this._measureItem.remove())):(i.originalTitle="Item",n(r).append(n("<span>Item<\/span>")),n(r.firstChild).wrap("<span/>"),i.titleElement=n(r)[0].firstChild,n.jqx.browser.msie&&n.jqx.browser.version<8&&n(r.firstChild).css("display","inline-block"))),f=n(i.titleElement),rt=this.toThemeProperty("jqx-rc-all"),this.allowDrag&&f.addClass("draggable"),nt==null||nt==undefined?(nt=i.titleElement,i.label=n.trim(f.text())):i.label=nt,n(r).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&n(r).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),rt+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(rt+=" "+this.toThemeProperty("jqx-tree-item-rtl")),f[0].className=f[0].className+" "+rt,i.level=n(t).parents("li").length,i.hasItems=n(t).find("li").length>0,this.rtl&&i.parentElement&&!this.checkboxes,this.checkboxes)if(this.host.jqxCheckBox)u=n('<div style="position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>'),u.width(parseInt(this.checkSize)),u.height(parseInt(this.checkSize)),n(r).prepend(u),this.rtl&&(u.css("float","right"),u.css("position","static")),u.jqxCheckBox({hasInput:!1,checked:i.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:o,theme:this.theme}),this.rtl?(et=5,i.parentElement?u.css("margin-right",et+5+"px"):u.css("margin-right",et+"px")):f.css("margin-left",parseInt(this.checkSize)+6),i.checkBoxElement=u[0],u[0].treeItem=i,ct=f.outerHeight()/2-1-parseInt(this.checkSize)/2,u.css("margin-top",ct),n.jqx.browser.msie&&n.jqx.browser.version<8?(f.css("width","1%"),f.css("margin-left",parseInt(this.checkSize)+25)):i.hasItems&&(this.rtl||u.css("margin-left",this.toggleIndicatorSize));else throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");else n.jqx.browser.msie&&n.jqx.browser.version<8&&f.css("width","1%");o&&this.disableItem(i.element);c&&this.selectItem(i.element);n.jqx.browser.msie&&n.jqx.browser.version<8&&(n(r).css("margin","0px"),n(r).css("padding","0px"))}},destroy:function(){this.removeHandler(n(window),"resize.jqxtree"+this.element.id);this.host.removeClass();this.isTouchDevice()&&(this.removeHandler(this.panel,n.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,n.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,n.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var t=this,i=this.isTouchDevice();n.each(this.items,function(){var u=this,o=n(this.element),f=i?n.jqx.mobile.getTouchEventName("touchend"):"click",r,e;t.removeHandler(n(u.checkBoxElement),f);r=n(u.titleElement);t.removeHandler(o);e=t.allowDrag&&t._enableDragDrop;e?(t.removeHandler(r,"mousedown.item"),t.removeHandler(r,"click"),t.removeHandler(r,"dblclick"),t.removeHandler(r,"mouseenter"),t.removeHandler(r,"mouseleave")):t.removeHandler(r);$arrowSpan=n(u.arrow);$arrowSpan.length>0&&(t.removeHandler($arrowSpan,f),t.removeHandler($arrowSpan,"selectstart"),t.removeHandler($arrowSpan,"mouseup"),i||(t.removeHandler($arrowSpan,"mouseenter"),t.removeHandler($arrowSpan,"mouseleave")),t.removeHandler(r,"selectstart"));n.jqx.browser.opera&&t.removeHandler(r,"mousedown.item");t.toggleMode!="click"&&t.removeHandler(r,"click");t.removeHandler(r,t.toggleMode)});this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null);this.host.remove()},_raiseEvent:function(t,i){var u,r;return i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,r=new n.Event(u),r.owner=this,r.args=args,this.host.trigger(r)},propertyChangedHandler:function(t,i,r,u){var o,f,s,c,h,e,l;this.isInitialized!=undefined&&this.isInitialized!=!1&&(i=="submitCheckedItems"&&t._updateInputSelection(),i=="disabled"&&t._updateDisabledState(),i=="theme"&&t._applyTheme(r,u),i=="keyboardNavigation"&&(t.enableKeyboardNavigation=u),(i=="width"||i=="height")&&(t.refresh(),t._initialize(),t._calculateWidth(),t.host.jqxPanel&&(o="fixed",(this.height==null||this.height=="auto")&&(o="verticalwrap"),(this.width==null||this.width=="auto")&&(o=o=="fixed"?"horizontalwrap":"wrap"),t.panel.jqxPanel({sizeMode:o}))),i=="touchMode"&&(t._isTouchDevice=null,u&&(t.enableHover=!1),t._render()),(i=="source"||i=="checkboxes")&&this.source!=null&&(f=[],n.each(t.items,function(){this.isExpanded&&(f[f.length]={label:this.label,level:this.level})}),s=t.loadItems(t.source),t.host.jqxPanel?t.panel.jqxPanel("setcontent",s):t.element.innerHTML=s,c=t.disabled,h=t.host.find("ul:first"),h.length>0&&(t.createTree(h[0]),t._render()),e=t,l=e.animationShowDuration,e.animationShowDuration=0,t.disabled=!1,f.length>0&&n.each(t.items,function(){for(var t,n=0;n<f.length;n++)f[n].label==this.label&&f[n].level==this.level&&(t=e.getItem(this.element),e._expandItem(e,t))}),t.disabled=c,e.animationShowDuration=l),i=="hasThreeStates"&&(t._render(),t._updateCheckStates()),i=="toggleIndicatorSize"&&(t._updateCheckLayout(),t._render()))}})})(jqxBaseFramework),function(n){n.jqx._jqxTree.jqxTreeItem=function(n,t){return{label:null,id:n,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null}}}(jqxBaseFramework);