(function(n){n.jqx.jqxWidget("jqxComboBox","",{});n.extend(n.jqx._jqxComboBox.prototype,{defineInstance:function(){var t={disabled:!1,width:200,height:23,items:[],selectedIndex:-1,selectedItems:[],_selectedItems:[],source:null,scrollBarSize:n.jqx.utilities.scrollBarSize,arrowSize:23,enableHover:!0,enableSelection:!0,visualItems:[],groups:[],equalItemsWidth:!0,itemHeight:-1,visibleItems:[],emptyGroupText:"Group",emptyString:"",openDelay:250,closeDelay:300,animationType:"default",dropDownWidth:"auto",dropDownHeight:"200px",autoDropDownHeight:!1,enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",searchMode:"startswithignorecase",autoComplete:!1,remoteAutoComplete:!1,remoteAutoCompleteDelay:500,selectionMode:"default",minLength:2,displayMember:"",valueMember:"",groupMember:"",searchMember:"",keyboardSelection:!0,renderer:null,autoOpen:!1,checkboxes:!1,promptText:"",placeHolder:"",rtl:!1,listBox:null,validateSelection:null,showCloseButtons:!0,renderSelectedItem:null,search:null,popupZIndex:1e5,searchString:null,multiSelect:!1,showArrow:!0,_disabledItems:[],touchMode:"auto",autoBind:!0,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["open","close","select","unselect","change","checkChange","bindingComplete"]};return n.extend(!0,this,t),t},createInstance:function(){var t=this;if(this.host.attr("role","combobox"),n.jqx.aria(this,"aria-autocomplete","both"),n.jqx._jqxListBox==null||n.jqx._jqxListBox==undefined)throw new Error("jqxComboBox: Missing reference to jqxlistbox.js.");n.jqx.aria(this);this.promptText!=""&&(this.placeHolder=this.promptText);this.render()},render:function(){var t=this,o=t.element.nodeName.toLowerCase(),u,f,v,y,s,h,c,l,r,e,p,i,w,a;if((o=="select"||o=="ul"||o=="ol")&&(t.field=t.element,t.field.className&&(t._className=t.field.className),u={title:t.field.title},u.id=t.field.id.length?t.field.id.replace(/[^\w]/g,"_")+"_jqxComboBox":n.jqx.utilities.createId()+"_jqxComboBox",f=n("<div><\/div>",u),t.width||(t.width=n(t.field).width()),t.height||(t.height=n(t.field).outerHeight()),n(t.field).hide().after(f),v=t.host.data(),t.host=f,t.host.data(v),t.element=f[0],t.element.id=t.field.id,t.field.id=u.id,t._className&&(t.host.addClass(t._className),n(t.field).removeClass(t._className)),t.field.tabIndex&&(y=t.field.tabIndex,t.field.tabIndex=-1,t.element.tabIndex=y),s=n.jqx.parseSourceTag(t.field),t.source=s.items,t.selectedIndex==-1&&(t.selectedIndex=s.index)),t.removeHandlers(),t.isanimating=!1,t.id=n.jqx.utilities.createId(),t.element.innerHTML="",h=n("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-top: none; border-bottom: none; float: left; position: absolute;'/><div id='dropdownlistArrow' role='button' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'/><\/div><\/div>"),t.comboStructure=h,n.jqx._jqxListBox==null||n.jqx._jqxListBox==undefined)throw"jqxComboBox: Missing reference to jqxlistbox.js.";t.touch=n.jqx.mobile.isTouchDevice();t.touchMode===!0&&(t.touch=!0);t.host.append(h);t.dropdownlistWrapper=t.host.find("#dropdownlistWrapper");t.dropdownlistArrow=t.host.find("#dropdownlistArrow");t.dropdownlistContent=t.host.find("#dropdownlistContent");t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content"));t.dropdownlistContent.addClass(t.toThemeProperty("jqx-widget-content"));t.dropdownlistWrapper[0].id="dropdownlistWrapper"+t.element.id;t.dropdownlistArrow[0].id="dropdownlistArrow"+t.element.id;t.dropdownlistContent[0].id="dropdownlistContent"+t.element.id;t.dropdownlistContent.append(n('<input autocomplete="off" style="margin: 0; padding: 0; padding-left: 3px; padding-right: 3px; border: 0;" type="textarea"/>'));t.input=t.dropdownlistContent.find("input");t.input.addClass(t.toThemeProperty("jqx-combobox-input"));t.input.addClass(t.toThemeProperty("jqx-widget-content"));t.host.attr("tabindex")&&(t.input.attr("tabindex",t.host.attr("tabindex")),t.host.removeAttr("tabindex"));t._addInput();t.rtl&&(t.input.css({direction:"rtl"}),t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content-rtl")));try{c="listBox"+t.id;l=n(n.find("#"+c));l.length>0&&l.remove();n.jqx.aria(this,"aria-owns",c);n.jqx.aria(this,"aria-haspopup",!0);n.jqx.aria(this,"aria-multiline",!1);t.listBoxContainer&&t.listBoxContainer.jqxListBox("destroy");t.container&&t.container.remove();r=n("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+t.id+"'><div id='innerListBox"+t.id+"'><\/div><\/div>");r.hide();r.appendTo(document.body);t.container=r;t.listBoxContainer=n(n.find("#innerListBox"+t.id));e=t.width;t.dropDownWidth!="auto"&&(e=t.dropDownWidth);t.dropDownHeight==null&&(t.dropDownHeight=200);t.container.width(parseInt(e)+25);t.container.height(parseInt(t.dropDownHeight)+25);t.addHandler(t.listBoxContainer,"bindingComplete",function(){t.listBox||(t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance);t._raiseEvent("6")});p=!0;t.listBoxContainer.jqxListBox({_checkForHiddenParent:!1,allowDrop:!1,allowDrag:!1,checkboxes:t.checkboxes,emptyString:t.emptyString,autoBind:!t.remoteAutoComplete&&t.autoBind,renderer:t.renderer,rtl:t.rtl,itemHeight:t.itemHeight,selectedIndex:t.selectedIndex,incrementalSearch:!1,width:e,scrollBarSize:t.scrollBarSize,autoHeight:t.autoDropDownHeight,height:t.dropDownHeight,groupMember:t.groupMember,searchMember:t.searchMember,displayMember:t.displayMember,valueMember:t.valueMember,source:t.source,theme:t.theme,rendered:function(){if(t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance,t.remoteAutoComplete)if(t.autoDropDownHeight?(t.container.height(t.listBox.virtualSize.height+25),t.listBoxContainer.height(t.listBox.virtualSize.height),t.listBox._arrange()):(t.listBox._arrange(),t.listBox.ensureVisible(0),t.listBox._renderItems(),t.container.height(t.listBoxContainer.height()+25)),t.searchString!=undefined&&t.searchString.length>=t.minLength){var i=t.listBoxContainer.jqxListBox("items");i?i.length>0?t.isOpened()||t.open():t.close():t.close()}else t.close();else t.renderSelection("mouse"),t.multiSelect&&t.doMultiSelect(!1);t.rendered&&t.rendered()}});t.listBoxContainer.css({position:"absolute",zIndex:t.popupZIndex,top:0,left:0});t.listBoxContainer.css("border-top-width","1px");t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup"));n.jqx.browser.msie&&t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow"));t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance;t.listBox.enableSelection=t.enableSelection;t.listBox.enableHover=t.enableHover;t.listBox.equalItemsWidth=t.equalItemsWidth;t.listBox._arrange();t.addHandler(t.listBoxContainer,"unselect",function(n){t.multiSelect||t._raiseEvent("3",{index:n.args.index,type:n.args.type,item:n.args.item})});t.addHandler(t.listBoxContainer,"change",function(n){t.multiSelect||(t.selectedIndex=t.listBox.selectedIndex,t._raiseEvent("4",{index:n.args.index,type:n.args.type,item:n.args.item}))});t.animationType=="none"?t.container.css("display","none"):t.container.hide();p=!1}catch(b){throw b;}i=this;i.input.attr("disabled",i.disabled);w=n.jqx.browser.msie&&n.jqx.browser.version<8;w||i.input.attr("placeholder",i.placeHolder);t.propertyChangeMap.disabled=function(t,r,u,f){f?(t.host.addClass(i.toThemeProperty("jqx-combobox-state-disabled")),t.host.addClass(i.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.addClass(i.toThemeProperty("jqx-combobox-content-disabled"))):(t.host.removeClass(i.toThemeProperty("jqx-combobox-state-disabled")),t.host.removeClass(i.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.removeClass(i.toThemeProperty("jqx-combobox-content-disabled")));t.input.attr("disabled",t.disabled);n.jqx.aria(t,"aria-disabled",t.disabled);t.input.attr("disabled",t.disabled)};t.disabled&&(t.host.addClass(t.toThemeProperty("jqx-combobox-state-disabled")),t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content-disabled")));t.host.addClass(t.toThemeProperty("jqx-combobox-state-normal"));t.host.addClass(t.toThemeProperty("jqx-combobox"));t.host.addClass(t.toThemeProperty("jqx-rc-all"));t.host.addClass(t.toThemeProperty("jqx-widget"));t.host.addClass(t.toThemeProperty("jqx-widget-content"));t.dropdownlistArrowIcon=n("<div><\/div>");t.dropdownlistArrowIcon.addClass(t.toThemeProperty("jqx-icon-arrow-down"));t.dropdownlistArrowIcon.addClass(t.toThemeProperty("jqx-icon"));t.dropdownlistArrow.append(t.dropdownlistArrowIcon);t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-combobox-arrow-normal"));t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-fill-state-normal"));t.rtl?t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-rc-l")):t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-rc-r"));t._setSize();t._updateHandlers();t.addHandler(t.input,"keyup.textchange",function(n){var i=t._search(n);t.cinput&&t.input&&(t.displayMember?t._updateInputSelection():t.cinput[0].value=t.input[0].value)});n.jqx.browser.msie&&n.jqx.browser.version<8&&t.host.parents(".jqx-window").length>0&&(a=t.host.parents(".jqx-window").css("z-index"),r.css("z-index",a+10),t.listBoxContainer.css("z-index",a+10));t.checkboxes?(t.input.attr("readonly",!0),n.jqx.aria(this,"aria-readonly",!0)):n.jqx.aria(this,"aria-readonly",!1);t.remoteAutoComplete||(t.searchString="")},_addInput:function(){var t=this.host.attr("name");this.cinput=n("<input type='hidden'/>");this.host.append(this.cinput);t&&this.cinput.attr("name",t)},_updateInputSelection:function(){var r,u,t,f,i;if(this.cinput){if(r=[],this.selectedIndex==-1?this.cinput.val(""):(u=this.getSelectedItem(),u!=null?(this.cinput.val(u.value),r.push(u.value)):this.cinput.val(this.dropdownlistContent.text())),this.checkboxes||this.multiSelect){if(t=this.multiSelect?this.getSelectedItems():this.getCheckedItems(),f="",t!=null)for(i=0;i<t.length;i++)f+=i==t.length-1?t[i].value:t[i].value+",",r.push(t[i].value);this.cinput.val(f)}this.field&&this.cinput&&(this.field.nodeName.toLowerCase()=="select"?n.each(this.field,function(){n(this).removeAttr("selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this).attr("selected",!0)}):n.each(this.items,function(){n(this.originalItem.originalItem).removeAttr("data-selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this.originalItem.originalItem).attr("data-selected",!0)}))}},_search:function(t){var i=this,s,o,h,a,y,f,v,p,r,b,l,u,c;if(t.keyCode!=9&&i.searchMode!="none"&&i.searchMode!=null&&i.searchMode!="undefined"&&t.keyCode!=16&&t.keyCode!=17&&t.keyCode!=20&&!i.checkboxes){if(i.multiSelect&&(s=n("<span style='visibility: hidden; white-space: nowrap;'>"+i.input.val()+"<\/span>"),s.addClass(i.toThemeProperty("jqx-widget")),n(document.body).append(s),o=s.width()+15,s.remove(),o>i.host.width()&&(o=i.host.width()),o<25&&(o=25),i.input.css("width",o+"px"),i.selectedItems.length==0?(i.input.css("width","100%"),i.input.attr("placeholder",i.placeHolder)):i.input.attr("placeholder",""),h=parseInt(this._findPos(i.host[0])[1])+parseInt(i.host.outerHeight())-1+"px",a=n.jqx.mobile.isSafariMobileBrowser()||n.jqx.mobile.isWindowsPhone(),a!=null&&a&&(h=n.jqx.mobile.getTopPos(this.element)+parseInt(i.host.outerHeight()),n("body").css("border-top-width")!="0px"&&(h=parseInt(h)-this._getBodyOffset().top+"px")),i.container.css("top",h),y=parseInt(i.host.height()),i.dropdownlistArrow.height(y)),!i.isanimating){if(t.altKey&&t.keyCode==38)return i.hideListBox("altKey"),!1;if(t.altKey&&t.keyCode==40)return i.isOpened()||i.showListBox("altKey"),!1}if(t.keyCode==37||t.keyCode==39)return!1;if(!t.altKey&&t.keyCode!=18&&(!(t.keyCode>=33)||!(t.keyCode<=40))&&(!t.ctrlKey&&!i.ctrlKey||t.keyCode==88||t.keyCode==86)){if(f=i.input.val(),f.length==0&&!i.autoComplete){i.listBox.searchString=i.input.val();i.listBox.clearSelection();i.hideListBox("search");i.searchString=i.input.val();return}if(i.remoteAutoComplete){r=this;v=function(){r.listBox.vScrollInstance.value=0};f.length>=r.minLength?t.ctrlKey||t.altKey||(r.searchString!=f&&(p=r.listBoxContainer.jqxListBox("source"),p==null&&r.listBoxContainer.jqxListBox({source:r.source}),i._searchTimer&&clearTimeout(i._searchTimer),t.keyCode!=13&&t.keyCode!=27&&(i._searchTimer=setTimeout(function(){if(v(),r.autoDropDownHeight&&(r.listBox.autoHeight=!0),r.searchString=r.input.val(),r.search!=null)r.search(r.input.val());else throw"'search' function is not defined";},i.remoteAutoCompleteDelay))),r.searchString=f):(i._searchTimer&&clearTimeout(i._searchTimer),v(),r.searchString="",r.listBoxContainer.jqxListBox({source:null}));return}if(r=this,f!==r.searchString){if(!(t.keyCode=="27"||t.keyCode=="13")){var w=i._updateItemsVisibility(f),k=w.matchItems,e=w.index;i.autoComplete||i.removeAutoComplete||(!i.multiSelect||i.multiSelect&&e>=0)&&(i.listBox.selectIndex(e),b=i.listBox.isIndexInView(e),b?i.listBox._renderItems():i.listBox.ensureVisible(e));i.autoComplete&&k.length===0&&i.hideListBox("search")}if(t.keyCode=="13"){if(l=i.container.css("display")=="block",l&&!i.isanimating){i.hideListBox("keyboard");i._oldvalue=i.listBox.selectedValue;return}}else if(t.keyCode=="27"){if(l=i.container.css("display")=="block",l&&!i.isanimating)return u.multiSelect?(u.input.val(""),u.listBox.selectedValue=null):(c=i.listBox.getVisibleItem(i._oldvalue),c?(u=this,setTimeout(function(){u.autoComplete&&u._updateItemsVisibility("");u.listBox.selectIndex(c.index);u.renderSelection("api")},u.closeDelay)):i.clearSelection()),i.hideListBox("keyboard"),i.renderSelection("api"),t.preventDefault(),!1}else i.isOpened()||i.opening||t.ctrlKey||i.listBox.visibleItems&&i.listBox.visibleItems.length>0&&i.input.val()!=i.searchString&&i.searchString!=undefined&&e!=-1&&i.showListBox("search"),i.searchString=i.input.val(),i.searchString==""&&(i.listBox.itemsByValue[""]||(e=-1,i.multiSelect||i.clearSelection())),c=i.listBox.getVisibleItem(e),c!=undefined&&i._updateInputSelection()}}}},val:function(n){var i,t;return this.input?(i=function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return typeof n=="number"?!1:typeof n=="date"?!1:typeof n=="boolean"?!1:typeof n=="string"?!1:!0},i(n)||arguments.length==0?(t=this.getSelectedItem(),t)?t.value:this.input.val():(t=this.getItemByValue(n),t!=null?this.selectItem(t):this.input.val(n),this.input.val())):""},focus:function(){var n=this,t=function(){n.input.focus();var t=n.input.val();n._setSelection(0,t.length)};t();setTimeout(function(){t()},10)},_setSelection:function(n,t){try{if("selectionStart"in this.input[0])this.input[0].focus(),this.input[0].setSelectionRange(n,t);else{var i=this.input[0].createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}}catch(r){}},setContent:function(n){this.input.val(n)},_updateItemsVisibility:function(t){var a=this.getItems(),i,c,s,v,e,u,o,l;if(a==undefined)return{index:-1,matchItem:[]};var r=this,f=-1,h=[],y=0;if(n.each(a,function(){var u="",i;if(!this.isGroup){u=this.searchLabel?this.searchLabel:this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";u=u.toString();i=!1;switch(r.searchMode){case"containsignorecase":i=n.jqx.string.containsIgnoreCase(u,t);break;case"contains":i=n.jqx.string.contains(u,t);break;case"equals":i=n.jqx.string.equals(u,t);break;case"equalsignorecase":i=n.jqx.string.equalsIgnoreCase(u,t);break;case"startswith":i=n.jqx.string.startsWith(u,t);break;case"startswithignorecase":i=n.jqx.string.startsWithIgnoreCase(u,t);break;case"endswith":i=n.jqx.string.endsWith(u,t);break;case"endswithignorecase":i=n.jqx.string.endsWithIgnoreCase(u,t)}if(r.autoComplete&&!i&&(this.visible=!1),i&&r.autoComplete&&(h[y++]=this,this.visible=!0,f=this.visibleIndex),t==""&&r.autoComplete&&(this.visible=!0,i=!1),r.multiSelect&&(this.disabled=!1,(r.selectedItems.indexOf(this.value)>=0||r._disabledItems.indexOf(this.value)>=0)&&(this.disabled=!0,i=!1)),r.multiSelect){if(i&&!r.autoComplete)return f===-1&&(f=this.visibleIndex),!0}else if(i&&!r.autoComplete)return f=this.visibleIndex,!1}}),this.listBox.searchString=t,i=this,c=function(){var n;if(i.multiSelect){var t=0,u=!1,r=null;for(n=0;n<i.listBox.items.length;n++)i.listBox.selectedIndexes[n]=-1,i.listBox.items[n].disabled||u==!1&&(r=i.listBox.items[n],t=r.visibleIndex,u=!0);i.listBox.selectedIndex=-1;i.listBox.selectedIndex=t;i.listBox.selectedIndexes[t]=t;i.listBox.selectedValue=i.listBox.visibleItems.length>0?r?r.value:null:null;i.listBox.ensureVisible(0)}},!this.autoComplete)return c(),{index:f,matchItems:h};if(this.listBox.renderedVisibleItems=[],s=this.listBox.vScrollInstance.value,this.listBox.vScrollInstance.value=0,this.listBox.visibleItems=[],this.listBox._renderItems(),v=this.listBox.selectedValue,e=this.listBox.getItemByValue(v),this.multiSelect)c();else if(e)if(e.visible){for(this.listBox.selectedIndex=e.visibleIndex,u=0;u<this.listBox.items.length;u++)this.listBox.selectedIndexes[u]=-1;this.listBox.selectedIndexes[e.visibleIndex]=e.visibleIndex}else{for(u=0;u<this.listBox.items.length;u++)this.listBox.selectedIndexes[u]=-1;this.listBox.selectedIndex=-1}return this.listBox._renderItems(),o=this.listBox._calculateVirtualSize().height,o<s&&(s=0,this.listBox.vScrollInstance.refresh()),this.autoDropDownHeight?(this._disableSelection=!0,this.listBox.autoHeight!=this.autoDropDownHeight&&this.listBoxContainer.jqxListBox({autoHeight:this.autoDropDownHeight}),this.container.height(o+25),this.listBox.invalidate(),this._disableSelection=!1):o<parseInt(this.dropDownHeight)?(l=this.listBox.hScrollBar[0].style.visibility=="hidden"?0:20,this.listBox.height=l+o,this.container.height(o+25+l),this.listBox.invalidate()):(this.listBox.height=parseInt(this.dropDownHeight),this.container.height(parseInt(this.dropDownHeight)+25),this.listBox.invalidate()),this.listBox.vScrollInstance.setPosition(s),{index:f,matchItems:h}},findItems:function(t){var r=this.getItems(),u=this,f=0,i=[];return n.each(r,function(){var e="",r;if(!this.isGroup){e=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";r=!1;switch(u.searchMode){case"containsignorecase":r=n.jqx.string.containsIgnoreCase(e,t);break;case"contains":r=n.jqx.string.contains(e,t);break;case"equals":r=n.jqx.string.equals(e,t);break;case"equalsignorecase":r=n.jqx.string.equalsIgnoreCase(e,t);break;case"startswith":r=n.jqx.string.startsWith(e,t);break;case"startswithignorecase":r=n.jqx.string.startsWithIgnoreCase(e,t);break;case"endswith":r=n.jqx.string.endsWith(e,t);break;case"endswithignorecase":r=n.jqx.string.endsWithIgnoreCase(e,t)}r&&(i[f++]=this)}}),i},_resetautocomplete:function(){n.each(this.listBox.items,function(){this.visible=!0});this.listBox.vScrollInstance.value=0;this.listBox._addItems();this.listBox.autoHeight=!1;this.listBox.height=this.dropDownHeight;this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.height(parseInt(this.dropDownHeight));this.listBox._arrange();this.listBox._addItems();this.listBox._renderItems()},getItems:function(){return this.listBox.items},getVisibleItems:function(){return this.listBox.getVisibleItems()},_setSize:function(){var i,r,t,u;this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width);this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height);i=!1;this.width!=null&&this.width.toString().indexOf("%")!=-1&&(i=!0,this.host.width(this.width));this.height!=null&&this.height.toString().indexOf("%")!=-1&&(i=!0,this.host.height(this.height));i&&(t=this,r=this.host.width(),this.dropDownWidth!="auto"&&(r=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:r}),this.container.width(parseInt(r)+25),this._arrange());t=this;u=function(){t.multiSelect&&t.host.height(t.height);t._arrange();t.multiSelect&&t.host.height("auto")};t.oldWidth=t.host.width();t.oldHeight=t.host.height();n.jqx.utilities.resize(this.host,function(){var n=t.host.width(),i=t.host.height();(n!=t.oldWidth||i!=t.oldHeight)&&(u(),t.hideListBox("api"));t.oldWidth=n;t.oldHeight=i})},isOpened:function(){var i=this,t=n.data(document.body,"openedCombojqxListBox"+this.element.id);return this.container.css("display")!="block"?!1:t!=null&&t==i.listBoxContainer?!0:!1},_updateHandlers:function(){var t=this,r=!1,i,u;this.removeHandlers();this.multiSelect&&(this.addHandler(this.dropdownlistContent,"click",function(n){if(n.target.href)return!1;t.input.focus();setTimeout(function(){t.input.focus()},10)}),this.addHandler(this.dropdownlistContent,"focus",function(n){if(n.target.href)return!1;t.input.focus();setTimeout(function(){t.input.focus()},10)}));this.touch||(this.host.parents()&&this.addHandler(this.host.parents(),"scroll.combobox"+this.element.id,function(){var n=t.isOpened();n&&t.close()}),this.addHandler(this.host,"mouseenter",function(){!t.disabled&&t.enableHover&&(r=!0,t.host.addClass(t.toThemeProperty("jqx-combobox-state-hover")),t.dropdownlistArrowIcon.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-combobox-arrow-hover")),t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!t.disabled&&t.enableHover&&(t.host.removeClass(t.toThemeProperty("jqx-combobox-state-hover")),t.dropdownlistArrowIcon.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),t.dropdownlistArrow.removeClass(t.toThemeProperty("jqx-combobox-arrow-hover")),t.dropdownlistArrow.removeClass(t.toThemeProperty("jqx-fill-state-hover")),r=!1)}));t.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){var n=t.isOpened();!n&&t.autoOpen&&(t.open(),t.host.focus())}),this.addHandler(n(document),"mousemove."+t.id,function(n){var s=t.isOpened();if(s&&t.autoOpen){var i=t.host.coord(),r=i.top,u=i.left,f=t.container.coord(),e=f.left,o=f.top;canClose=!0;n.pageY>=r&&n.pageY<=r+t.host.height()+2&&n.pageX>=u&&n.pageX<u+t.host.width()&&(canClose=!1);n.pageY>=o&&n.pageY<=o+t.container.height()-20&&n.pageX>=e&&n.pageX<e+t.container.width()&&(canClose=!1);canClose&&t.close()}}));i="mousedown";this.touch&&(i=n.jqx.mobile.getTouchEventName("touchstart"));u=function(){var i,r;if(!t.disabled&&(i=t.container.css("display")=="block",!t.isanimating)){if(i)return t.hideListBox("api"),n.jqx.mobile.isTouchDevice()||(t.input.focus(),setTimeout(function(){t.input.focus()},10)),!0;if(t.autoDropDownHeight&&(t.container.height(t.listBoxContainer.height()+25),r=t.listBoxContainer.jqxListBox("autoHeight"),r||(t.listBoxContainer.jqxListBox({autoHeight:t.autoDropDownHeight}),t.listBox._arrange(),t.listBox.ensureVisible(0),t.listBox._renderItems(),t.container.height(t.listBoxContainer.height()+25))),t.showListBox("api"),n.jqx.mobile.isTouchDevice())return!0;setTimeout(function(){t.input.focus()},10)}};this.addHandler(this.dropdownlistArrow,i,function(n){u(n)});this.addHandler(this.dropdownlistArrowIcon,i,function(){});this.addHandler(this.host,"focus",function(){t.focus()});this.addHandler(this.input,"focus",function(n){t.focused=!0;t.host.addClass(t.toThemeProperty("jqx-combobox-state-focus"));t.host.addClass(t.toThemeProperty("jqx-fill-state-focus"));t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content-focus"));n.stopPropagation&&n.stopPropagation()});this.addHandler(this.input,"blur",function(){t.focused=!1;t.isOpened()||t.opening||(t.selectionMode=="dropDownList"&&t._selectOldValue(),t.host.removeClass(t.toThemeProperty("jqx-combobox-state-focus")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.dropdownlistContent.removeClass(t.toThemeProperty("jqx-combobox-content-focus")));t._searchTimer&&clearTimeout(t._searchTimer)});this.addHandler(n(document),"mousedown."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id});this.touch&&this.addHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id});this.addHandler(this.host,"keydown",function(n){var f=t.container.css("display")=="block",e,r,i,u;return(t.ctrlKey=n.ctrlKey,t.host.css("display")=="none")?!0:(n.keyCode=="13"||n.keyCode=="9")&&f&&!t.isanimating?(t.listBox.selectedIndex!=-1&&(t.renderSelection("mouse"),e=t.listBox.selectedIndex,r=t.listBox.getVisibleItem(e),r&&(t.listBox.selectedValue=r.value),t._setSelection(t.input.val().length,t.input.val().length),t.hideListBox("keyboard")),n.keyCode=="13"&&(t._oldvalue=t.listBox.selectedValue),t.keyboardSelection||t._raiseEvent("2",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)}),n.keyCode=="9")?!0:!1:n.keyCode==115?(t.isanimating||(t.isOpened()?t.isOpened()&&t.hideListBox("keyboard"):t.showListBox("keyboard")),!1):(n.altKey&&t.host.css("display")=="block"&&(t.isanimating||(n.keyCode==38?t.isOpened()&&t.hideListBox("altKey"):n.keyCode==40&&(t.isOpened()||t.showListBox("altKey")))),(n.keyCode=="27"||n.keyCode=="9")&&t.isOpened()&&!t.isanimating)?(n.keyCode=="27"&&(t.multiSelect?(t.listBox.selectedValue=null,t.input.val("")):(r=t.listBox.getItemByValue(t._oldvalue),r?setTimeout(function(){t.autoComplete&&t._updateItemsVisibility("");t.listBox.selectIndex(r.index);t.renderSelection("api")},t.closeDelay):t.clearSelection())),t.hideListBox("keyboard"),n.keyCode=="9")?!0:(t.renderSelection("api"),n.preventDefault(),!1):(i=n.keyCode,f&&!t.disabled&&i!=8)?t.listBox._handleKeyDown(n):!t.disabled&&!f&&(i=n.keyCode,i==33||i==34||i==35||i==36||i==38||i==40)?t.listBox._handleKeyDown(n):i===8&&t.multiSelect&&t.input.val().length===0?(u=t.selectedItems[t.selectedItems.length-1],t.selectedItems.pop(),t._selectedItems.pop(),u&&(t._raiseEvent("3",{index:u.index,type:"keyboard",item:u}),t._raiseEvent("4",{index:u.index,type:"keyboard",item:u})),t.listBox.selectedValue=null,t.doMultiSelect(),!1):void 0});this.addHandler(this.listBoxContainer,"checkChange",function(n){t.renderSelection("mouse");t._updateInputSelection();t._raiseEvent(5,{label:n.args.label,value:n.args.value,checked:n.args.checked,item:n.args.item})});this.addHandler(this.listBoxContainer,"select",function(n){if(!t.disabled&&(n.args.type!="keyboard"||t.keyboardSelection)&&(t.renderSelection(n.args.type),t.multiSelect||t._raiseEvent("2",{index:n.args.index,type:n.args.type,item:n.args.item}),n.args.type=="mouse"&&(t._oldvalue=t.listBox.selectedValue,!t.checkboxes))){if(t.hideListBox("mouse"),t.touch)return!1;t.input.focus()}});this.listBox!=null&&this.listBox.content!=null&&this.addHandler(this.listBox.content,"click",function(n){if(!t.disabled){if(t.listBox.itemswrapper&&n.target===t.listBox.itemswrapper[0]||n.target&&n.target.className&&n.target.className.indexOf("jqx-fill-state-disabled")>=0)return!0;t.renderSelection("mouse");t._oldvalue=t.listBox.selectedValue;t.touch||t.ishiding||t.checkboxes||(t.hideListBox("mouse"),t.input.focus());t.touch===!0&&(t.checkboxes||t.hideListBox("mouse"))}})},_selectOldValue:function(){var n=this,t;n.listBox.selectedIndex==-1?n.multiSelect?(n.listBox.selectedValue=null,n.input.val("")):(t=n.listBox.getItemByValue(n._oldvalue),t?setTimeout(function(){n.autoComplete&&n._updateItemsVisibility("");n.listBox.selectIndex(t.index);n.renderSelection("api")},n.closeDelay):(n.clearSelection(),n.listBox.selectIndex(0),n.renderSelection("api"))):n.renderSelection("api")},removeHandlers:function(){var i=this,t;this.dropdownlistWrapper!=null&&this.removeHandler(this.dropdownlistWrapper,"mousedown");this.dropdownlistContent&&(this.removeHandler(this.dropdownlistContent,"click"),this.removeHandler(this.dropdownlistContent,"focus"));this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"focus");this.input!=null&&(this.removeHandler(this.input,"focus"),this.removeHandler(this.input,"blur"));this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(n(document),"mousemove."+i.id);this.listBoxContainer&&(this.removeHandler(this.listBoxContainer,"checkChange"),this.removeHandler(this.listBoxContainer,"select"));this.host.parents()&&this.removeHandler(this.host.parents(),"scroll.combobox"+this.element.id);this.dropdownlistArrowIcon&&this.dropdownlistArrow&&(t="mousedown",this.touch&&(t=n.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.dropdownlistArrowIcon,t),this.removeHandler(this.dropdownlistArrow,t))},getItem:function(n){return this.listBox.getItem(n)},getItemByValue:function(n){return this.listBox.getItemByValue(n)},getVisibleItem:function(n){return this.listBox.getVisibleItem(n)},renderSelection:function(t){var i,e,h,r,c,f,o,u,s;if(t!=undefined&&t!="none"&&this._disableSelection!==!0&&this.listBox!=null&&!this.multiSelect){if(i=this.listBox.visibleItems[this.listBox.selectedIndex],this.autoComplete&&!this.checkboxes&&this.listBox.selectedValue!==undefined&&(i=this.getItemByValue(this.listBox.selectedValue)),this.checkboxes&&(e=this.getCheckedItems(),i=e!=null&&e.length>0?e[0]:null),i==null){h=n.jqx.browser.msie&&n.jqx.browser.version<8;this.input.val("");this.input.attr("value","");h||this.input.attr("placeholder",this.placeHolder);this._updateInputSelection();return}if(this.selectedIndex=this.listBox.selectedIndex,r=n("<span><\/span>"),i.label!=undefined&&i.label!=null&&i.label.toString().length>0?n.jqx.utilities.html(r,i.label):i.value!=undefined&&i.value!=null&&i.value.toString().length>0?n.jqx.utilities.html(r,i.value):i.title!=undefined&&i.title!=null&&i.title.toString().length>0?n.jqx.utilities.html(r,i.title):n.jqx.utilities.html(r,this.emptyString),c=r.outerHeight(),this.checkboxes){for(f=this.getCheckedItems(),o="",u=0;u<f.length;u++)o+=u==f.length-1?f[u].label:f[u].label+", ";this.input.val(o)}else this.input.val(r.text());r.remove();this._updateInputSelection();this.renderSelectedItem&&(s=this.renderSelectedItem(this.listBox.selectedIndex,i),s!=undefined&&(this.input[0].value=s));this.input.attr("value",this.input.val());this.listBox&&this.listBox._activeElement&&n.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id)}},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source});this.renderSelection("mouse");this.source==null&&this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null});this.clearSelection()},clearSelection:function(){this.selectedIndex=-1;this.listBox.clearSelection();this.input.val("");this.multiSelect&&(this.listBox.selectedValue="",this.selectedItems=[],this._selectedItems=[],this.doMultiSelect(!1))},unselectIndex:function(n,t){if(!isNaN(n)&&(this.autoComplete&&this._updateItemsVisibility(""),this.listBox.unselectIndex(n,t),this.renderSelection("mouse"),this.multiSelect)){if(n>=0){var r=this.getItem(n),i=this.selectedItems.indexOf(r.value);i>=0&&(r.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(i,1),this._selectedItems.splice(i,1))}this.doMultiSelect(!1)}},selectIndex:function(n,t,i,r){this.autoComplete&&this._updateItemsVisibility("");this.listBox.selectIndex(n,t,i,r);this.renderSelection("mouse");this.selectedIndex=n;this.multiSelect&&this.doMultiSelect()},selectItem:function(n){this.autoComplete&&this._updateItemsVisibility("");this.listBox!=undefined&&(this.listBox.selectedIndex=-1,this.listBox.selectItem(n),this.selectedIndex=this.listBox.selectedIndex,this.renderSelection("mouse"),this.multiSelect&&this.doMultiSelect(!1))},unselectItem:function(n){var t,i;this.autoComplete&&this._updateItemsVisibility("");this.listBox!=undefined&&(this.listBox.unselectItem(n),this.renderSelection("mouse"),this.multiSelect&&(t=this.getItemByValue(n),t&&(i=this.selectedItems.indexOf(t.value),i>=0&&(t.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(i,1),this._selectedItems.splice(i,1))),this.doMultiSelect(!1)))},checkItem:function(n){this.autoComplete&&this._updateItemsVisibility("");this.listBox!=undefined&&this.listBox.checkItem(n)},uncheckItem:function(n){this.autoComplete&&this._updateItemsVisibility("");this.listBox!=undefined&&this.listBox.uncheckItem(n)},indeterminateItem:function(n){this.autoComplete&&this._updateItemsVisibility("");this.listBox!=undefined&&this.listBox.indeterminateItem(n)},getSelectedValue:function(){return this.listBox.selectedValue},getSelectedIndex:function(){if(this.multiSelect){if(this.remoteAutoComplete&&this.multiSelect&&this._selectedItems.length>0||this._selectedItems&&this._selectedItems.length>0)return this.getSelectedItems()[0].index}else return this.listBox.selectedIndex},getSelectedItem:function(){return this.multiSelect?this.remoteAutoComplete&&this.multiSelect&&this._selectedItems.length>0?this.getSelectedItems()[0]:this._selectedItems&&this._selectedItems.length>0?this.getSelectedItems()[0]:null:this.getVisibleItem(this.listBox.selectedIndex)},getSelectedItems:function(){if(this.remoteAutoComplete&&this.multiSelect)return this._selectedItems;var t=[],i=this;return n.each(this.selectedItems,function(){var n=i.getItemByValue(this);n?t.push(n):(n=i._selectedItems[this],n&&t.push(n))}),t},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(n){this.listBox.checkIndex(n)},uncheckIndex:function(n){this.listBox.uncheckIndex(n)},indeterminateIndex:function(n){this.listBox.indeterminateIndex(n)},checkAll:function(){this.listBox.checkAll();this.renderSelection("mouse")},uncheckAll:function(){this.listBox.uncheckAll();this.renderSelection("mouse")},insertAt:function(n,t){return n==null?!1:this.listBox.insertAt(n,t)},addItem:function(n){return this.listBox.addItem(n)},removeAt:function(n){var t=this.listBox.removeAt(n);return this.renderSelection("mouse"),t},removeItem:function(n){var t=this.listBox.removeItem(n);return this.renderSelection("mouse"),t},updateItem:function(n,t){var i=this.listBox.updateItem(n,t);return this.renderSelection("mouse"),i},updateAt:function(n,t){var i=this.listBox.updateAt(n,t);return this.renderSelection("mouse"),i},ensureVisible:function(n){return this.listBox.ensureVisible(n)},disableAt:function(n){var t=this.getVisibleItem(n);return t&&this._disabledItems.push(t.value),this.listBox.disableAt(n)},enableAt:function(n){var t=this.getVisibleItem(n);return t&&this._disabledItems.splice(this._disabledItems.indexOf(t.value),1),this.listBox.enableAt(n)},disableItem:function(n){var n=this.getVisibleItem(n);return n&&this._disabledItems.push(n.value),this.listBox.disableItem(n)},enableItem:function(n){var n=this.getVisibleItem(n);return n&&this._disabledItems.splice(this._disabledItems.indexOf(n.value),1),this.listBox.enableItem(n)},_findPos:function(t){while(t&&(t.type=="hidden"||t.nodeType!=1||n.expr.filters.hidden(t)))t=t.nextSibling;if(t){var i=n(t).coord(!0);return[i.left,i.top]}},testOffset:function(t,i,r){var u=t.outerWidth(),f=t.outerHeight(),h=n(window).width()+n(window).scrollLeft(),e=n(window).height()+n(window).scrollTop(),o,s;return i.left+u>h&&u>this.host.width()&&(o=this.host.coord().left,s=u-this.host.width(),i.left=o-s+2),i.left<0&&(i.left=parseInt(this.host.coord().left)+"px"),i.top-=Math.min(i.top,i.top+f>e&&e>f?Math.abs(f+r+23):0),i},open:function(){this.isOpened()||this.opening||this.showListBox("api")},close:function(){this.isOpened()&&this.hideListBox("api")},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},showListBox:function(t){var h,f,c,v,b,k,s,y,p,u,w;if(!this.listBox.items||this.listBox.items.length!=0){if(t!="search"||this.autoComplete||this.remoteAutoComplete||this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25),(this.autoComplete||this.multiSelect&&!this.remoteAutoComplete)&&t!="search"&&(this._updateItemsVisibility(""),this.multiSelect))for(h=this.getVisibleItems(),f=0;f<h.length;f++)if(!h[f].disabled){this.ensureVisible(f);break}this.remoteAutoComplete&&this.listBox.clearSelection();t!="search"&&(this._oldvalue=this.listBox.selectedValue);n.jqx.aria(this,"aria-expanded",!0);this.dropDownWidth=="auto"&&this.width!=null&&this.width.indexOf&&this.width.indexOf("%")!=-1&&this.listBox.host.width()!=this.host.width()&&(c=this.host.width(),this.listBoxContainer.jqxListBox({width:c}),this.container.width(parseInt(c)+25));var r=this,i=this.listBoxContainer,l=this.listBox,d=n(window).scrollTop(),g=n(window).scrollLeft(),e=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px",o,a=parseInt(Math.round(this.host.coord(!0).left));o=a+"px";v=n.jqx.mobile.isSafariMobileBrowser()||n.jqx.mobile.isWindowsPhone();this.ishiding=!1;b=n.jqx.utilities.hasTransform(this.host);(b||v!=null&&v)&&(o=n.jqx.mobile.getLeftPos(this.element),e=n.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),n("body").css("border-top-width")!="0px"&&(e=parseInt(e)-this._getBodyOffset().top+"px"),n("body").css("border-left-width")!="0px"&&(o=parseInt(o)-this._getBodyOffset().left+"px"));this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected"));this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.host.addClass(this.toThemeProperty("jqx-combobox-state-focus"));this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"));this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-focus"));this.container.css("left",o);this.container.css("top",e);l._arrange();k=!0;s=!1;(this.dropDownHorizontalAlignment=="right"||this.rtl)&&(y=this.container.outerWidth(),p=Math.abs(y-this.host.width()),y>this.host.width()?this.container.css("left",25+parseInt(Math.round(a))-p+"px"):this.container.css("left",25+parseInt(Math.round(a))+p+"px"));this.enableBrowserBoundsDetection&&(u=this.testOffset(i,{left:parseInt(this.container.css("left")),top:parseInt(e)},parseInt(this.host.outerHeight())),parseInt(this.container.css("top"))!=u.top?(s=!0,i.css("top",23),i.addClass(this.toThemeProperty("jqx-popup-up"))):i.css("top",0),this.container.css("top",u.top),this.container.css("top",u.top),parseInt(this.container.css("left"))!=u.left&&this.container.css("left",u.left));this.animationType=="none"?(this.container.css("display","block"),n.data(document.body,"openedCombojqxListBoxParent",r),n.data(document.body,"openedCombojqxListBox"+r.element.id,i),i.css("margin-top",0),i.css("opacity",1)):(this.container.css("display","block"),w=i.outerHeight(),i.stop(),this.animationType=="fade"?(i.css("margin-top",0),i.css("opacity",0),i.animate({opacity:1},this.openDelay,function(){r.isanimating=!1;r.opening=!1;n.data(document.body,"openedCombojqxListBoxParent",r);n.data(document.body,"openedCombojqxListBox"+r.element.id,i)})):(i.css("opacity",1),s?i.css("margin-top",w):i.css("margin-top",-w),this.isanimating=!0,this.opening=!0,i.animate({"margin-top":0},this.openDelay,function(){r.isanimating=!1;r.opening=!1;n.data(document.body,"openedCombojqxListBoxParent",r);n.data(document.body,"openedCombojqxListBox"+r.element.id,i)})));l._renderItems();s?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),i.addClass(this.toThemeProperty("jqx-rc-b-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),i.addClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-b-expanded")));i.addClass(this.toThemeProperty("jqx-fill-state-focus"));this._raiseEvent("0",l)}},doMultiSelect:function(t){var i,u,s,h,f,e,o,r;if(this.checkboxes&&(this.multiSelect=!1),i=this,!this.multiSelect){r=i.dropdownlistContent.find(".jqx-button");u="mousedown";this.touch&&(u=n.jqx.mobile.getTouchEventName("touchstart"));this.removeHandler(r,u);this.removeHandler(r.find(".jqx-icon-close"),u);r.remove();this.selectedItems=[];this._selectedItems=[];return}if((!this.validateSelection||(s=this.validateSelection(this.listBox.selectedValue),s))&&(h=this.selectedItems,this.listBox.selectedValue&&(this.selectedItems.indexOf(this.listBox.selectedValue)===-1&&(f=this.getItemByValue(this.listBox.selectedValue),f&&f.visible&&(this.selectedItems.push(this.listBox.selectedValue),this._selectedItems.push(f),this._raiseEvent("2",{index:f.index,item:f}),this._raiseEvent("4",{index:f.index,item:f}))),this.listBox.selectedIndex=0),e=this.listBox.items,e)){for(o=0;o<e.length;o++)e[o].disabled=!1,(this.selectedItems.indexOf(e[o].value)>=0||this._disabledItems.indexOf(this.value)>=0)&&(e[o].disabled=!0);this.listBox._renderItems();this.searchString="";this.input.val("");var e="",u="mousedown",r=i.dropdownlistContent.find(".jqx-button");this.touch&&(u=n.jqx.mobile.getTouchEventName("touchstart"));this.removeHandler(r,u);this.removeHandler(r.find(".jqx-icon-close"),u);r.remove();i.input.detach();this.selectedItems.length>0?(i.input.css("width","25px"),i.input.attr("placeholder","")):(i.input.css("width","100%"),i.input.attr("placeholder",this.placeHolder));n.each(this.selectedItems,function(t){var u=i.getItemByValue(this),r,e,o,s,f;(!u||i.remoteAutoComplete)&&(u=i._selectedItems[t]);r=n('<div style="overflow: hidden; float: left;"><\/div>');r.addClass(i.toThemeProperty("jqx-button"));r.addClass(i.toThemeProperty("jqx-combobox-multi-item"));r.addClass(i.toThemeProperty("jqx-fill-state-normal"));r.addClass(i.toThemeProperty("jqx-rc-all"));u?(e=u.label,i.renderSelectedItem&&(o=i.renderSelectedItem(t,u),o&&(e=o)),r[0].innerHTML==""&&(r[0].innerHTML='<a data-value="'+u.value+'" style="float: left;" href="#">'+e+"<\/a>"),i.rtl&&(r[0].innerHTML='<a data-value="'+u.value+'" style="float: right;" href="#">'+e+"<\/a>"),s=i.rtl?"left":"right",i.showCloseButtons&&(f='<div style="position: relative; overflow: hidden; float: '+s+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+i.toThemeProperty("jqx-icon-close")+'"><\/div><\/div>',n.jqx.browser.msie&&n.jqx.browser.version<8&&(f='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+i.toThemeProperty("jqx-icon-close")+'"><\/div><\/div>'),i.rtl&&(f='<div style="position: relative; overflow: hidden; float: '+s+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+i.toThemeProperty("jqx-icon-close")+'"><\/div><\/div>',n.jqx.browser.msie&&n.jqx.browser.version<8&&(f='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+i.toThemeProperty("jqx-icon-close")+'"><\/div><\/div>')),r[0].innerHTML+=f)):r[0].innerHTML==""&&(r[0].innerHTML='<a href="#"><\/a>');i.dropdownlistContent.append(r)});i.dropdownlistContent.append(i.input);i.input.val("");t!==!1&&(i.input.focus(),setTimeout(function(){i.input.focus()},10));r=i.dropdownlistContent.find(".jqx-button");this.touchMode===!0&&(u="mousedown");this.addHandler(r,u,function(t){if(t.target.className.indexOf("jqx-icon-close")>=0||i.disabled)return!0;var r=n(t.target).attr("data-value"),u=i.getItemByValue(r);return u&&(i.listBox.selectedValue=null,i.listBox.clearSelection()),i.listBox.scrollTo(0,0),i.open(),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1});this.addHandler(r.find(".jqx-icon-close"),u,function(t){var o,r,f,s,e,u;if(!i.disabled&&(o=n(t.target).parent().parent().find("a").attr("data-value"),r=i.getItemByValue(o),r||i.remoteAutoComplete&&!r&&i.selectedItems.indexOf(o)>=0))if(i.listBox.selectedValue=null,f=i.selectedItems.indexOf(o),s=r&&r.index>=0?r.index:f,f>=0)i.selectedItems.splice(f,1),u=i._selectedItems[f],u||(u=r),i._selectedItems.splice(f,1),i._raiseEvent("3",{index:s,type:"mouse",item:u}),i._raiseEvent("4",{index:s,type:"mouse",item:u}),i.doMultiSelect();else for(e=0;e<i.selectedItems.length;e++)if(u=i.selectedItems[e],u==o){i.selectedItems.splice(e,1);i._selectedItems.splice(e,1);i._raiseEvent("3",{index:s,type:"mouse",item:r});i._raiseEvent("4",{index:s,type:"mouse",item:r});i.doMultiSelect();break}});i.dropdownlistArrow.height(this.host.height());i._updateInputSelection()}},hideListBox:function(t){var i=this.listBoxContainer,o=this.listBox,e=this.container,r,u,f;this.container[0].style.display!="none"&&(n.jqx.aria(this,"aria-expanded",!1),(t=="keyboard"||t=="mouse")&&(this.listBox.searchString=""),(t=="keyboard"||t=="mouse"&&this.multiSelect)&&this.doMultiSelect(),r=this,n.data(document.body,"openedCombojqxListBox"+this.element.id,null),this.animationType=="none"?(this.opening=!1,this.container.css("display","none")):this.ishiding||(u=i.outerHeight(),i.css("margin-top",0),i.stop(),this.opening=!1,this.isanimating=!0,f=-u,parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(f=u),this.animationType=="fade"?(i.css({opacity:1}),i.animate({opacity:0},this.closeDelay,function(){r.isanimating=!1;e.css("display","none");r.ishiding=!1})):i.animate({"margin-top":f},this.closeDelay,function(){r.isanimating=!1;e.css("display","none");r.ishiding=!1})),this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected")),this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.focused||(this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"))),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),i.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),i.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),i.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),this._raiseEvent("1",o))},closeOpenedListBox:function(t){var i=t.data.me,f=n(t.target),u=t.data.listbox,e,r;return u==null?!0:n(t.target).ischildof(t.data.me.host)?void 0:(e=i,r=!1,n.each(f.parents(),function(){if(this.className!="undefined"&&this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1)return r=!0,!1;if(this.className.indexOf("jqx-combobox")!=-1)return i.element.id==this.id&&(r=!0),!1}}),u==null||r||i.isOpened()&&(i.hideListBox("api"),i.input.blur()),!0)},loadFromSelect:function(n){this.listBox.loadFromSelect(n);this.clearSelection()},refresh:function(){this._setSize();this._arrange();this.listBox&&this.renderSelection()},resize:function(){this._setSize();this._arrange()},_arrange:function(){var s=parseInt(this.host.width()),t=parseInt(this.host.height()),h=this.arrowSize,f=this.arrowSize,e=1,i,r,o,u;this.showArrow||(f=0,h=0,this.dropdownlistArrow.hide(),e=0,this.host.css("cursor","arrow"));i=s-f-1*e;i>0&&(this.dropdownlistContent[0].style.width=i+"px");this.rtl&&(this.dropdownlistContent[0].style.width=-1+i+"px");this.dropdownlistContent[0].style.height=t+"px";this.dropdownlistContent[0].style.left="0px";this.dropdownlistContent[0].style.top="0px";this.dropdownlistArrow[0].style.width=f+1+"px";this.dropdownlistArrow[0].style.height=t+"px";this.dropdownlistArrow[0].style.left=1+i+"px";this.input[0].style.width="100%";this.multiSelect||this.input.height(t);r=this.input.height();r==0&&(r=parseInt(this.input.css("font-size"))+3);this.input[0].className.indexOf("jqx-rc-all")==-1&&this.input.addClass(this.toThemeProperty("jqx-rc-all"));u=parseInt(t)/2-parseInt(r)/2;u>0;this.rtl&&(this.dropdownlistArrow.css("left","0px"),this.dropdownlistContent.css("left",this.dropdownlistArrow.width()),n.jqx.browser.msie&&n.jqx.browser.version<=8&&this.dropdownlistContent.css("left",1+this.dropdownlistArrow.width()));this.multiSelect&&(this.input.css("float","left"),this.dropdownlistWrapper.parent().css("height","auto"),this.dropdownlistContent.css("height","auto"),this.dropdownlistWrapper.css("height","auto"),this.dropdownlistContent.css("position","relative"),this.dropdownlistContent.css("cursor","text"),this.host.css("height","auto"),this.host.css("min-height",this.height),this.dropdownlistContent.css("min-height",this.height),t=parseInt(this.host.height()),this.dropdownlistArrow.height(t),o=parseInt(this.host.css("min-height")),u=parseInt(o)/2-parseInt(r)/2,u>0&&this.input.css("margin-top",u))},destroy:function(){this.source&&this.source.unbindBindingUpdate&&(this.source.unbindBindingUpdate(this.element.id),this.source.unbindBindingUpdate(this.listBoxContainer[0].id),this.source.unbindDownloadComplete(this.element.id),this.source.unbindDownloadComplete(this.listBoxContainer[0].id));n.jqx.utilities.resize(this.host,null,!0);this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBoxContainer,"unselect");this.removeHandler(this.listBoxContainer,"change");this.removeHandler(this.listBoxContainer,"bindingComplete");this.removeHandler(this.dropdownlistWrapper,"selectstart");this.removeHandler(this.dropdownlistWrapper,"mousedown");this.removeHandler(this.host,"keydown");this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBox.content,"click");this.removeHandlers();this.removeHandler(this.input,"keyup.textchange");this.listBoxContainer.jqxListBox("destroy");this.listBoxContainer.remove();this.host.removeClass();this.removeHandler(n(document),"mousedown."+this.id,this.closeOpenedListBox);this.touch&&this.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+"."+this.id);this.cinput.remove();delete this.cinput;this.dropdownlistArrow.remove();delete this.dropdownlistArrow;this.dropdownlistArrowIcon.remove();delete this.dropdownlistArrowIcon;delete this.dropdownlistWrapper;delete this.listBoxContainer;delete this.input;delete this.dropdownlistContent;delete this.comboStructure;this.container.remove();delete this.listBox;delete this.container;var t=n.data(this.element,"jqxComboBox");t&&delete t.instance;this.host.removeData();this.host.remove();delete this.host;delete this.set;delete this.get;delete this.call;delete this.element},_raiseEvent:function(t,i){var u,r;return i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,r=new n.Event(u),r.owner=this,(t==2||t==3||t==4||t==5)&&(r.args=i),this.host.trigger(r)},propertyChangedHandler:function(t,i,r,u){var f;t.isInitialized!=undefined&&t.isInitialized!=!1&&(i=="itemHeight"&&t.listBoxContainer.jqxListBox({itemHeight:u}),i=="renderSelectedItem"&&t.renderSelection("mouse"),i=="renderer"&&t.listBoxContainer.jqxListBox({renderer:u}),i=="enableSelection"&&t.listBoxContainer.jqxListBox({enableSelection:u}),i=="enableHover"&&t.listBoxContainer.jqxListBox({enableHover:u}),i==="touchMode"&&(t.listBoxContainer.jqxListBox({touchMode:u}),t.touch=n.jqx.mobile.isTouchDevice(),t.touchMode===!0&&(t.touch=!0),t._updateHandlers()),i=="multiSelect"&&(u?t.doMultiSelect(!1):(t.doMultiSelect(!1),t.dropdownlistWrapper.parent().css("height","100%"),t.dropdownlistContent.css("height","100"),t.dropdownlistWrapper.css("height","100"),t.dropdownlistContent.css("position","relative"),t.host.css("min-height",null),t._setSize(),t._arrange())),i=="showArrow"&&(t._arrange(),t.multiSelect&&t.doMultiSelect(!1)),i=="placeHolder"&&t.input.attr("placeholder",t.placeHolder),i=="popupZIndex"&&t.listBoxContainer.css({zIndex:t.popupZIndex}),i=="promptText"&&(t.placeHolder=u),i=="autoOpen"&&t._updateHandlers(),i=="renderer"&&(t.listBox.renderer=t.renderer),i=="itemHeight"&&(t.listBox.itemHeight=u),i=="source"&&(t.input.val(""),t.listBoxContainer.jqxListBox({source:t.source}),t.renderSelection("mouse"),t.source==null&&t.clearSelection(),t.multiSelect&&(t.selectedItems=[],t._selectedItems=[],t.doMultiSelect(!1))),i=="rtl"&&(u?(t.dropdownlistArrow.css("float","left"),t.dropdownlistContent.css("float","right")):(t.dropdownlistArrow.css("float","right"),t.dropdownlistContent.css("float","left")),t.listBoxContainer.jqxListBox({rtl:t.rtl})),(i=="displayMember"||i=="valueMember")&&(t.listBoxContainer.jqxListBox({displayMember:t.displayMember,valueMember:t.valueMember}),t.renderSelection("mouse")),i=="autoDropDownHeight"&&(t.listBoxContainer.jqxListBox({autoHeight:t.autoDropDownHeight}),t.autoDropDownHeight?t.container.height(t.listBoxContainer.height()+25):(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25)),t.listBox._arrange(),t.listBox._updatescrollbars()),i=="dropDownHeight"&&(t.autoDropDownHeight||(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25))),(i=="dropDownWidth"||i=="scrollBarSize")&&(f=t.width,t.dropDownWidth!="auto"&&(f=t.dropDownWidth),t.listBoxContainer.jqxListBox({width:f,scrollBarSize:t.scrollBarSize}),t.container.width(parseInt(f)+25)),i=="autoComplete"&&t._resetautocomplete(),i=="checkboxes"&&(t.listBoxContainer.jqxListBox({checkboxes:t.checkboxes}),t.checkboxes?(t.input.attr("readonly",!0),n.jqx.aria(t,"aria-readonly",!0)):n.jqx.aria(t,"aria-readonly",!1)),i=="theme"&&u!=null&&(t.listBoxContainer.jqxListBox({theme:u}),t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup")),n.jqx.browser.msie&&t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow")),n.jqx.utilities.setTheme(r,u,t.host)),i=="rtl"&&(t.render(),t.refresh()),(i=="width"||i=="height")&&(t._setSize(),i=="width"&&t.dropDownWidth=="auto"&&(f=t.host.width(),t.listBoxContainer.jqxListBox({width:f}),t.container.width(parseInt(f)+25)),t._arrange()),i=="selectedIndex"&&(t.listBox.selectIndex(u),t.renderSelection("mouse")))}})})(jqxBaseFramework);