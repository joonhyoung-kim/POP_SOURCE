<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.thirautech.mom.reference.itemInfo.exceptionCustomerModel">
	<select id="get_exceptionCustomerModel_list" resultType="camelMap" parameterType="java.util.HashMap">
		SELECT A.PRODUCT_CLASS_ID
		     , A.USE_YN
		     , (SELECT MOM_COMMON_PKG. FN_GET_CODE_NAME(A.DIVISION_CD, A.COMPANY_CD, 'USE_FLAG', A.USE_YN)
		            FROM    DUAL)  AS USE_YN_NAME
		     , TO_CHAR(A.CREATE_DATE, 'YYYY-MM-DD HH24:MI:SS') AS CREATE_DATE
		     , A.CREATE_BY
		     , TO_CHAR(A.UPDATE_DATE, 'YYYY-MM-DD HH24:MI:SS') AS UPDATE_DATE
		     , A.UPDATE_BY
		  FROM MOM_PRODUCT_CLASS_REL_EXPT A
		 WHERE A.DIVISION_CD = #{divisionCd, jdbcType=VARCHAR}
		   AND A.COMPANY_CD = #{companyCd, jdbcType=VARCHAR}
		   <if test = "modelSuffix != null and modelSuffix != ''">
		   AND UPPER(A.PRODUCT_CLASS_ID) LIKE '%' || UPPER(#{modelSuffix, jdbcType=VARCHAR}) || '%'
		   </if>
		    <if test = "useYn != null and useYn != ''">
		   AND A.USE_YN = #{useYn, jdbcType=VARCHAR}
		   </if>
	</select>
	<update id="modify_exceptionCustomerModelCancel" statementType="CALLABLE" parameterType="java.util.HashMap">
	UPDATE MOM_PRODUCT_CLASS_REL_EXPT
	SET    USE_YN = #{useYn, jdbcType=VARCHAR}
		 , UPDATE_DATE = MOM_COMMON_PKG.FN_GET_LOCAL_TIME(#{divisionCd, jdbcType=VARCHAR}, #{companyCd, jdbcType=VARCHAR})
		 , UPDATE_BY = #{userId, jdbcType=VARCHAR}
	WHERE  DIVISION_CD = #{divisionCd, jdbcType=VARCHAR}
	AND    COMPANY_CD = #{companyCd, jdbcType=VARCHAR} 
	AND    PRODUCT_CLASS_ID =  #{productClassId, jdbcType=VARCHAR}
	</update>
</mapper>
