(function(n){n.jqx.jqxWidget("jqxListBox","",{});n.extend(n.jqx._jqxListBox.prototype,{defineInstance:function(){var t={disabled:!1,width:null,height:null,items:[],multiple:!1,selectedIndex:-1,selectedIndexes:[],source:null,scrollBarSize:n.jqx.utilities.scrollBarSize,enableHover:!0,enableSelection:!0,visualItems:[],groups:[],equalItemsWidth:!0,itemHeight:-1,visibleItems:[],emptyGroupText:"Group",checkboxes:!1,hasThreeStates:!1,autoHeight:!1,autoItemsHeight:!1,roundedcorners:!0,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:1e3,incrementalSearchKeyDownDelay:300,allowDrag:!1,allowDrop:!0,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:!0,enableMouseWheel:!0,multipleextended:!1,selectedValues:[],emptyString:"",rtl:!1,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:!0,ready:null,_checkForHiddenParent:!0,autoBind:!0,_renderOnDemand:!1,filterable:!1,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete"]};return n.extend(!0,this,t),t},createInstance:function(){var t=this,i;n.jqx.utilities.scrollBarSize!=15&&(t.scrollBarSize=n.jqx.utilities.scrollBarSize);t.width==null&&(t.width=200);t.height==null&&(t.height=200);t.render();i=t;n.jqx.utilities.resize(t.host,function(){i._updateSize()},!1,t._checkForHiddenParent)},resize:function(n,t){this.width=n;this.height=t;this._updateSize()},render:function(){var t=this,e=t.element.nodeName.toLowerCase(),r,u,h,c,i,o,l,s,f,a,v;if((e=="select"||e=="ul"||e=="ol")&&(t.field=t.element,t.field.className&&(t._className=t.field.className),r={title:t.field.title},r.id=t.field.id.length?t.field.id.replace(/[^\w]/g,"_")+"_jqxListBox":n.jqx.utilities.createId()+"_jqxListBox",u=n("<div><\/div>",r),t.width||(t.width=n(t.field).width()),t.height||(t.height=n(t.field).outerHeight()),n(t.field).hide().after(u),h=t.host.data(),t.host=u,t.host.data(h),t.element=u[0],t.element.id=t.field.id,t.field.id=r.id,t._className&&(t.host.addClass(t._className),n(t.field).removeClass(t._className)),t.field.tabIndex&&(c=t.field.tabIndex,t.field.tabIndex=-1,t.element.tabIndex=c)),t.element.innerHTML="",t=t,i=t.element.className,i+=" "+t.toThemeProperty("jqx-listbox"),i+=" "+t.toThemeProperty("jqx-reset"),i+=" "+t.toThemeProperty("jqx-rc-all"),i+=" "+t.toThemeProperty("jqx-widget"),i+=" "+t.toThemeProperty("jqx-widget-content"),t.element.className=i,o=!1,t.width!=null&&t.width.toString().indexOf("%")!=-1&&(t.host.width(t.width),o=!0),t.height!=null&&t.height.toString().indexOf("%")!=-1&&(t.host.height(t.height),t.host.height()==0&&t.host.height(200),o=!0),t.width!=null&&t.width.toString().indexOf("px")!=-1?t.host.width(t.width):t.width==undefined||isNaN(t.width)||(t.element.style.width=parseInt(t.width)+"px"),t.height!=null&&t.height.toString().indexOf("px")!=-1?t.host.height(t.height):t.height==undefined||isNaN(t.height)||(t.element.style.height=parseInt(t.height)+"px"),t.multiple||t.multipleextended||t.checkboxes?n.jqx.aria(t,"aria-multiselectable",!0):n.jqx.aria(t,"aria-multiselectable",!1),l="<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+t.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/><\/div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='verticalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='horizontalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/><\/div><\/div>",t.host.attr("role","listbox"),t.element.innerHTML=l,t._checkForHiddenParent&&(t._addInput(),t.host.attr("tabIndex")||t.host.attr("tabIndex",1)),t.filter=n(t.element.firstChild.firstChild.firstChild),t.filterInput=n(t.filter[0].firstChild),t.filterInput.attr("placeholder",t.filterPlaceHolder),t.filterInput.addClass(t.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all")),t.addHandler(t.filterInput,"keyup.textchange",function(n){n.keyCode==13?t._search(n):t.filterDelay>0&&(t._filterTimer&&clearTimeout(t._filterTimer),t._filterTimer=setTimeout(function(){t._search(n)},t.filterDelay));n.stopPropagation()}),s=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling),!t.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!s.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");f=parseInt(t.host.height())/2;f==0&&(f=10);t.vScrollBar=s.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:t.rtl,theme:t.theme,touchMode:t.touchMode,largestep:f});a=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);t.hScrollBar=a.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:t.rtl,touchMode:t.touchMode,theme:t.theme});t.content=n(t.element.firstChild.firstChild.firstChild.nextSibling);t.content[0].id="listBoxContent"+t.element.id;t.bottomRight=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(t.toThemeProperty("jqx-listbox-bottomright")).addClass(t.toThemeProperty("jqx-scrollbar-state-normal"));t.bottomRight[0].id="bottomRight"+t.element.id;t.vScrollInstance=n.data(t.vScrollBar[0],"jqxScrollBar").instance;t.hScrollInstance=n.data(t.hScrollBar[0],"jqxScrollBar").instance;t.isTouchDevice()&&(n.jqx.browser.msie&&n.jqx.browser.version<9||(v=n("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div>"),t.content.parent().append(v),t.overlayContent=t.host.find(".overlay"),t.filterable&&t.overlayContent.css("top","30px")));t._updateTouchScrolling();t.host.addClass("jqx-disableselect");t.host.jqxDragDrop&&jqxListBoxDragDrop()},_highlight:function(n,t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+i+")","ig"),function(n,t){return"<b>"+t+"<\/b>"})},_addInput:function(){var t=this.host.attr("name");t&&this.host.attr("name","");this.input=n("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",t)},_updateTouchScrolling:function(){var t=this,i;this.isTouchDevice()&&(t.enableHover=!1,i=this.overlayContent?this.overlayContent:this.content,this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(n(i),"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(i,t.vScrollInstance.max,function(n,i){var r;t.vScrollBar.css("visibility")!="hidden"&&(r=t.vScrollInstance.value,t.vScrollInstance.setPosition(r+i),t._lastScroll=new Date);t.hScrollBar.css("visibility")!="hidden"&&(r=t.hScrollInstance.value,t.hScrollInstance.setPosition(r+n),t._lastScroll=new Date)},this.element.id,this.hScrollBar,this.vScrollBar),t.vScrollBar.css("visibility")!="visible"&&t.hScrollBar.css("visibility")!="visible"?n.jqx.mobile.setTouchScroll(!1,this.element.id):n.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange())},isTouchDevice:function(){var t=n.jqx.mobile.isTouchDevice();if(this.touchMode==!0){if(this.touchDevice)return!0;if(n.jqx.browser.msie&&n.jqx.browser.version<9)return!1;this.touchDevice=!0;t=!0;n.jqx.mobile.setMobileSimulator(this.element)}else this.touchMode==!1&&(t=!1);return t&&this.touchModeStyle!=!1&&(this.scrollBarSize=n.jqx.utilities.touchScrollBarSize),t&&this.host.addClass(this.toThemeProperty("jqx-touch")),t},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1;this._addItems();this._renderItems()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1;this.vScrollInstance.value=0;this._render(!1)},propertiesChangedHandler:function(n){n._cachedItemHtml=[];n.clearSelection();n.refresh()},propertyChangedHandler:function(t,i,r,u){var e,o,f;this.isInitialized!=undefined&&this.isInitialized!=!1&&(t.batchUpdate&&i!="touchMode"&&i!="rtl"||(i=="_renderOnDemand"&&(t._render(!1,!0),t.selectedIndex!=-1&&(e=t.selectedIndex,t.selectedIndex=-1,t._stopEvents=!0,t.selectIndex(e,!1,!0),t.selectedIndex==-1&&(t.selectedIndex=e),t._stopEvents=!1)),i=="filterable"&&t.refresh(),i=="filterHeight"&&t._arrange(),i=="filterPlaceHolder"&&t.filterInput.attr("placeholder",u),i=="renderer"&&(t._cachedItemHtml=[],t.refresh()),i=="itemHeight"&&t.refresh(),(i=="source"||i=="checkboxes")&&(u==null&&r&&r.unbindBindingUpdate&&(r.unbindBindingUpdate(t.element.id),r.unbindDownloadComplete(t.element.id)),t.clearSelection(),t.refresh()),(i=="scrollBarSize"||i=="equalItemsWidth")&&u!=r&&t._updatescrollbars(),i=="disabled"&&(t._renderItems(),t.vScrollBar.jqxScrollBar({disabled:u}),t.hScrollBar.jqxScrollBar({disabled:u})),(i=="touchMode"||i=="rtl")&&(t._removeHandlers(),t.vScrollBar.jqxScrollBar({touchMode:u}),t.hScrollBar.jqxScrollBar({touchMode:u}),i=="touchMode"&&(n.jqx.browser.msie&&n.jqx.browser.version<9||(o=n("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div>"),t.content.parent().append(o),t.overlayContent=t.host.find(".overlay"))),t.filterable&&t.filterInput&&(i=="rtl"&&u?t.filterInput.addClass(t.toThemeProperty("jqx-rtl")):i!="rtl"||u||t.filterInput.removeClass(t.toThemeProperty("jqx-rtl")),t._arrange()),t._updateTouchScrolling(),t._addHandlers(),t._render(!1)),this.updating||(i=="width"||i=="height")&&t._updateSize(),i=="theme"&&r!=u&&(t.hScrollBar.jqxScrollBar({theme:t.theme}),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toThemeProperty("jqx-listbox")),t.host.addClass(t.toThemeProperty("jqx-widget")),t.host.addClass(t.toThemeProperty("jqx-widget-content")),t.host.addClass(t.toThemeProperty("jqx-reset")),t.host.addClass(t.toThemeProperty("jqx-rc-all")),t.refresh()),i=="selectedIndex"&&(t.clearSelection(),t.selectIndex(u,!0)),(i=="displayMember"||i=="valueMember")&&(r!=u&&(f=t.selectedIndex,t.refresh(),t.selectedIndex=f,t.selectedIndexes[f]=f),t._renderItems()),i=="autoHeight"&&(r!=u?t._render(!1):(t._updatescrollbars(),t._renderItems())),t._checkForHiddenParent&&n.jqx.isHidden(t.host)&&n.jqx.utilities.resize(this.host,function(){t._updateSize()},!1,t._checkForHiddenParent)))},loadFromSelect:function(t){var r,i;if(t!=null&&(r="#"+t,i=n(r),i.length>0)){var u=n.jqx.parseSourceTag(i[0]),f=u.items,e=u.index;this.source=f;this.fromSelect=!0;this.clearSelection();this.selectedIndex=e;this.selectedIndexes[this.selectedIndex]=this.selectedIndex;this.refresh()}},invalidate:function(){this._cachedItemHtml=[];this._renderItems();this.virtualSize=null;this._updateSize()},refresh:function(t){var i=this,r;if(this.vScrollBar!=undefined){if(this._cachedItemHtml=[],this.visibleItems=[],r=function(n){if(n==!0&&i.selectedIndex!=-1){var t=i.selectedIndex;i.selectedIndex=-1;i._stopEvents=!0;i.selectIndex(t,!1,!0);i.selectedIndex==-1&&(i.selectedIndex=t);i._stopEvents=!1}},this.itemswrapper!=null&&(this.itemswrapper.remove(),this.itemswrapper=null),n.jqx.dataAdapter&&this.source!=null&&this.source._source){this.databind(this.source,t);r(t);return}!this.autoBind&&(this.autoBind||t)||(this.field&&this.loadSelectTag(),this.items=this.loadItems(this.source));this._render(!1,t==!0);r(t);this._raiseEvent("6")}},loadSelectTag:function(){var t=n.jqx.parseSourceTag(this.field);this.source=t.items;this.selectedIndex==-1&&(this.selectedIndex=t.index)},_render:function(n){if(this._renderOnDemand){this.visibleItems=[];this.renderedVisibleItems=[];this._renderItems();return}if(this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=[],(n==undefined||n)&&this.items!=undefined&&this.items!=null&&this.selectedIndex>=0&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0),this.allowDrag&&this._enableDragDrop&&(this._enableDragDrop(),this.isTouchDevice())){this._removeHandlers();this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null);this._updateTouchScrolling();this._addHandlers();return}this._updateTouchScrolling();this.rendered&&this.rendered();this.ready&&this.ready()},_hitTest:function(n,t){var r,i,u;return(this.filterable&&(t-=this.filterHeight,t<0&&(t=0)),r=parseInt(this.vScrollInstance.value),i=this._searchFirstVisibleIndex(t+r,this.renderedVisibleItems),this.renderedVisibleItems[i]!=undefined&&this.renderedVisibleItems[i].isGroup)?null:this.renderedVisibleItems.length>0&&(u=this.renderedVisibleItems[this.renderedVisibleItems.length-1],u.height+u.top<t+r)?null:(i=this._searchFirstVisibleIndex(t+r),this.visibleItems[i])},_searchFirstVisibleIndex:function(n,t){var r,u,i;for(n==undefined&&(n=parseInt(this.vScrollInstance.value)),r=0,(t==undefined||t==null)&&(t=this.visibleItems),u=t.length;r<=u;){if(mid=parseInt((r+u)/2),i=t[mid],i==undefined)break;if(i.initialTop>n&&i.initialTop+i.height>n)u=mid-1;else if(i.initialTop<n&&i.initialTop+i.height<=n)r=mid+1;else return mid}return 0},_renderItems:function(){var b,k,s,it,w,f,r,rt,t,i,h,st,ht,d,ct,l,a,lt,u;if(this.items==undefined||this.items.length==0){this.visibleItems=[];return}if(this.updatingListBox!=!0){var at=this.isTouchDevice(),ut=this.vScrollInstance,g=this.hScrollInstance,v=parseInt(ut.value),y=parseInt(g.value);this.rtl&&this.hScrollBar[0].style.visibility!="hidden"&&(y=g.max-y);var kt=this.items.length,dt=this.host.width(),nt=parseInt(this.content[0].style.width),ft=nt+parseInt(g.max),vt=parseInt(this.vScrollBar[0].style.width)+2;this.vScrollBar[0].style.visibility=="hidden"&&(vt=0);this.hScrollBar[0].style.visibility!="visible"&&(ft=nt);var gt=this._getVirtualItemsCount(),p=[],tt=0,e=parseInt(this.element.style.height)+2;this.element.style.height.indexOf("%")!=-1&&(e=this.host.outerHeight());isNaN(e)&&(e=0);var o=0,et=0,yt=0;if(ut.value==0||this.visibleItems.length==0)for(f=0;f<this.items.length;f++)t=this.items[f],t.visible&&(t.top=-v,t.initialTop=-v,!t.isGroup&&t.visible&&(this.visibleItems[et++]=t,t.visibleIndex=et-1),this.renderedVisibleItems[yt++]=t,t.left=-y,w=t.top+t.height,w>=0&&t.top-t.height<=e&&(p[tt++]={index:f,item:t}),v-=t.height);for(b=v>0?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,k=0,tt=0,s=this.vScrollInstance.value,it=0;k<100+e;){if(t=this.renderedVisibleItems[b],t==undefined)break;if(t.visible&&(t.left=-y,w=t.top+t.height-s,w>=0&&t.initialTop-s-t.height<=2*e&&(p[tt++]={index:b,item:t})),b++,t.visible&&(k+=t.initialTop-s+t.height-k),it++,it>this.items.length-1)break}if(!this._renderOnDemand){var pt=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),wt=this.toThemeProperty("jqx-listitem-state-group"),bt=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled"),c=0,ot=this;for(f=0;f<this.visualItems.length;f++)if(r=this.visualItems[f],rt=function(){var n=r[0].firstChild,t;ot.checkboxes&&(n=r[0].lastChild);n!=null&&(n.style.visibility="hidden",n.className="");ot.checkboxes&&(t=r.find(".chkbox"),t.css({visibility:"hidden"}))},f<p.length){if(t=p[f].item,t.initialTop-s>=e){rt();continue}if(i=n(r[0].firstChild),this.checkboxes&&(i=n(r[0].lastChild)),i.length==0)continue;if(i[0]==null)continue;i[0].className="";i[0].style.display="block";i[0].style.visibility="inherit";h="";h=!t.isGroup&&!this.selectedIndexes[t.index]>=0?pt:wt;(t.disabled||this.disabled)&&(h+=" "+bt);this.roundedcorners&&(h+=" "+this.toThemeProperty("jqx-rc-all"));at&&(h+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch"));i[0].className=h;this.renderer?(t.key||(t.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=[]),this._cachedItemHtml[t.key]?i[0].innerHTML!=this._cachedItemHtml[t.key]&&(i[0].innerHTML=this._cachedItemHtml[t.key]):(st=this.renderer(t.index,t.label,t.value),i[0].innerHTML=st,this._cachedItemHtml[t.key]=i[0].innerHTML)):(this.itemHeight!==-1&&(ht=2+2*parseInt(i.css("padding-top")),i[0].style.lineHeight=t.height-ht+"px",i.css("vertical-align","middle")),t.html!=null&&t.html.toString().length>0?i[0].innerHTML=t.html:t.label!=null||t.value!=null?t.label!=null?(i[0].innerHTML!==t.label&&(i[0].innerHTML=t.label),n.trim(t.label)==""&&(i[0].innerHTML=this.emptyString,this.emptyString==""&&(i[0].style.height=t.height-8+"px")),this.incrementalSearch||t.disabled||this.searchString!=undefined&&this.searchString!=""&&(i[0].innerHTML=this._highlight(t.label.toString(),this.searchString))):t.label===null?(i[0].innerHTML=this.emptyString,this.emptyString==""&&(i[0].style.height=t.height-8+"px")):i[0].innerHTML!==t.value?i[0].innerHTML=t.value:t.label==""&&(i[0].innerHTML=" "):(t.label==""||t.label==null)&&(i[0].innerHTML="",i[0].style.height=t.height-8+"px"));r[0].style.left=t.left+"px";r[0].style.top=t.initialTop-s+"px";t.element=i[0];t.title&&(i[0].title=t.title);this.equalItemsWidth&&!t.isGroup?(o==0&&(d=parseInt(ft),ct=parseInt(i.outerWidth())-parseInt(i.width()),d-=ct,l=1,l=l!=null?parseInt(l):0,d-=2*l,o=d,this.checkboxes&&this.hScrollBar[0].style.visibility=="hidden"&&(o-=18)),nt>this.virtualSize.width?(i[0].style.width=o+"px",t.width=o):(i[0].style.width=-4+this.virtualSize.width+"px",t.width=this.virtualSize.width-4)):i.width()<this.host.width()&&i.width(this.host.width()-2);this.rtl&&(i[0].style.textAlign="right");this.autoItemsHeight&&(i[0].style.whiteSpace="pre-line",i.width(o),t.width=o);c=0;this.checkboxes&&!t.isGroup?(c==0&&(c=(t.height-16)/2,c++),u=n(r.children()[0]),u[0].item=t,this.rtl?i[0].style.left!="0px"&&(i[0].style.left="0px"):i[0].style.left!="18px"&&(i[0].style.left="18px"),this.rtl&&u.css("left",8+t.width+"px"),u[0].style.top=c+"px",u[0].style.display="block",u[0].style.visibility="inherit",a=t.checked,lt=t.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"",u[0].firstChild&&u[0].firstChild.firstChild&&u[0].firstChild.firstChild.firstChild&&u[0].firstChild.firstChild&&(a?u[0].firstChild.firstChild.firstChild.className=lt:a===!1?u[0].firstChild.firstChild.firstChild.className="":a===null&&(u[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate"))),n.jqx.ariaEnabled&&(a?r[0].setAttribute("aria-selected",!0):r[0].removeAttribute("aria-selected"))):this.checkboxes&&(u=n(r.children()[0]),u.css({display:"none",visibility:"inherit"}));!t.disabled&&(!this.filterable&&this.selectedIndexes[t.visibleIndex]>=0||t.selected&&this.filterable)?(i.addClass(this.toThemeProperty("jqx-listitem-state-selected")),i.addClass(this.toThemeProperty("jqx-fill-state-pressed")),n.jqx.ariaEnabled&&(r[0].setAttribute("aria-selected",!0),this._activeElement=r[0])):this.checkboxes||n.jqx.ariaEnabled&&r[0].removeAttribute("aria-selected")}else rt()}}},generatekey:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},_calculateVirtualSize:function(t){var h,w,a,c,d,b,e,i,u,v,s;if(!this._renderOnDemand){var l=0,o=2,e=0,r=document.createElement("span");if(this.equalItemsWidth&&n(r).css("float","left"),r.style.whiteSpace="pre",h=0,w=undefined===t?this.host.outerHeight():t+2,document.body.appendChild(r),a=this.items.length,c=this.host.width(),this.autoItemsHeight&&(c-=10,this.vScrollBar.css("visibility")!="hidden"&&(c-=20)),this.autoItemsHeight||this.renderer||this.groups.length>=1||a>0&&this.items[0].html!=null&&this.items[0].html!="")for(e=0;e<a;e++)(i=this.items[e],i.isGroup&&i.label==""&&i.html=="")||i.visible&&(u="",u+=i.isGroup?this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch")),r.className=u,this.autoItemsHeight&&(r.style.whiteSpace="pre-line",v=this.checkboxes?-20:0,r.style.width=v+c+"px"),this.renderer?(d=this.renderer(i.index,i.label,i.value),r.innerHTML=d):i.html!=null&&i.html.toString().length>0?r.innerHTML=i.html:(i.label!=null||i.value!=null)&&(i.label!=null?(r.innerHTML=i.label,i.label==""&&(r.innerHTML="Empty")):r.innerHTML=i.value),s=r.offsetHeight,b=r.offsetWidth,this.itemHeight>-1&&(s=this.itemHeight),i.height=s,i.width=b,o+=s,l=Math.max(l,b),o<=w&&h++);else{var o=0,k=0,y="",f=0,p=0,g=-1;for(e=0;e<a;e++)(i=this.items[e],i.isGroup&&i.label==""&&i.html=="")||i.visible&&(g++,u="",g==0&&(u+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),u+=" "+this.toThemeProperty("jqx-widget"),u+=" "+this.toThemeProperty("jqx-listbox"),u+=" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch"),u+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),r.className=u,this.autoItemsHeight&&(r.style.whiteSpace="pre-line",v=this.checkboxes?-20:0,r.style.width=v+c+"px"),i.html==null||i.label==""||i.label==null?r.innerHTML="Item":i.html!=null&&i.html.toString().length>0?r.innerHTML=i.html:(i.label!=null||i.value!=null)&&(r.innerHTML=i.label!=null?i.label.toString().match(new RegExp("\\w"))!=null||i.label.toString().match(new RegExp("\\d"))!=null?i.label:"Item":i.value),s=1+r.offsetHeight,this.itemHeight>-1&&(s=this.itemHeight),k=s),f!=undefined&&(p=f),i.html!=null&&i.html.toString().length>0?(f=Math.max(f,i.html.toString().length),p!=f&&(y=i.html)):i.label!=null?(f=Math.max(f,i.label.length),p!=f&&(y=i.label)):i.value!=null&&(f=Math.max(f,i.value.length),p!=f&&(y=i.value)),i.height=k,o+=k,o<=w&&h++);r.innerHTML=y;l=r.offsetWidth}return o+=2,h<10&&(h=10),this.filterable&&(o+=this.filterHeight),r.parentNode.removeChild(r),{width:l,height:o,itemsPerPage:h}}},_getVirtualItemsCount:function(){if(this.virtualItemsCount==0){var n=parseInt(this.host.height())/5;return n>this.items.length&&(n=this.items.length),n}return this.virtualItemsCount},_addItems:function(t){var s,v,a,y,b,c,k,d,u,h,e,tt,g,r,f,i,l;if(!this._renderOnDemand&&(i=this,i.updatingListBox!=!0)){if(i.items==undefined||i.items.length==0){i.virtualSize={width:0,height:0,itemsPerPage:0};i._updatescrollbars();i.renderedVisibleItems=[];i.itemswrapper&&i.itemswrapper.children().remove();return}if(s=i.host.height(),t==!1){r=i._calculateVirtualSize(s);f=r.itemsPerPage*2;i.autoHeight&&(f=i.items.length);i.virtualItemsCount=Math.min(f,i.items.length);l=r.width;i.virtualSize=r;i._updatescrollbars();return}v=this;a=0;i.visibleItems=[];i.renderedVisibleItems=[];i._removeHandlers();i.allowDrag&&i._enableDragDrop&&(i.itemswrapper=null);i.itemswrapper==null&&(i.content[0].innerHTML="",i.itemswrapper=n('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"><\/div>'),i.itemswrapper[0].style.height=2*s+"px",i.content[0].appendChild(i.itemswrapper[0]));r=i._calculateVirtualSize(s);f=r.itemsPerPage*2;i.autoHeight&&(f=i.items.length);i.virtualItemsCount=Math.min(f,i.items.length);i=this;l=r.width;i.virtualSize=r;y=Math.max(i.host.width(),17+r.width);i.itemswrapper[0].style.width=y+"px";var p=0,o="",nt=n.jqx.browser.msie&&n.jqx.browser.version<9,w=nt?' unselectable="on"':"";for(u=p;u<i.virtualItemsCount;u++)h=i.items[u],b="listitem"+u+i.element.id,o+="<div"+w+" role='option' id='"+b+"' class='jqx-listitem-element'>",i.checkboxes&&(o+='<div style="background-color: transparent; padding: 0; margin: 0; position: absolute; float: left; width: 16px; height: 16px;" class="chkbox">',c='<div class="'+i.toThemeProperty("jqx-checkbox-default")+" "+i.toThemeProperty("jqx-fill-state-normal")+" "+i.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width: 13px; height: 13px;">',k=h.checked?" "+i.toThemeProperty("jqx-checkbox-check-checked"):"",c+='<span style="width: 13px; height: 13px;" class="checkBoxCheck'+k+'"><\/span>',c+="<\/div><\/div>",o+=c,o+="<\/div>"),o+="<span"+w+" style='white-space: pre; -ms-touch-action: none;'><\/span><\/div>";for(v.WinJS?i.itemswrapper.html(o):i.itemswrapper[0].innerHTML=o,d=i.itemswrapper.children(),u=p;u<i.virtualItemsCount;u++)h=i.items[u],e=n(d[u]),i.allowDrag&&i._enableDragDrop&&e.addClass("draggable"),i.checkboxes&&(tt=n(e.children()[0]),e.css("float","left"),g=n(e[0].firstChild),g.css("float","left")),e[0].style.height=h.height+"px",e[0].style.top=a+"px",a+=h.height,i.visualItems[u]=e;i._addHandlers();i._updatescrollbars();i.autoItemsHeight&&(r=i._calculateVirtualSize(s),f=r.itemsPerPage*2,i.autoHeight&&(f=i.items.length),i.virtualItemsCount=Math.min(f,i.items.length),i=this,l=r.width,i.virtualSize=r,i._updatescrollbars());n.jqx.browser.msie&&n.jqx.browser.version<8&&(i.host.attr("hideFocus",!0),i.host.find("div").attr("hideFocus",!0))}},_updatescrollbars:function(){var t=this,a,e,o,v,y;if(t.virtualSize){var s=t.virtualSize.height,r=t.virtualSize.width,i=t.vScrollInstance,u=t.hScrollInstance;t._arrange(!1);var f=!1,h=t.host.outerWidth(),c=t.host.outerHeight(),l=0;r>h&&(l=t.hScrollBar.outerHeight()+2);s+l>c?(a=i.max,i.max=2+parseInt(s)+l-parseInt(c-2),t.vScrollBar[0].style.visibility!="inherit"&&(t.vScrollBar[0].style.visibility="inherit",f=!0),a!=i.max&&i._arrange()):t.vScrollBar[0].style.visibility!="hidden"&&(t.vScrollBar[0].style.visibility="hidden",f=!0,i.setPosition(0));e=0;t.vScrollBar[0].style.visibility!="hidden"&&(e=t.scrollBarSize+6);o=t.checkboxes?20:0;t.autoItemsHeight?t.hScrollBar[0].style.visibility="hidden":r>=h-e-o?(v=u.max,u.max=t.vScrollBar[0].style.visibility=="inherit"?o+e+parseInt(r)-t.host.width()+4:o+parseInt(r)-t.host.width()+6,t.hScrollBar[0].style.visibility!="inherit"&&(t.hScrollBar[0].style.visibility="inherit",f=!0),v!=u.max&&u._arrange(),t.vScrollBar[0].style.visibility=="inherit"&&(i.max=2+parseInt(s)+t.hScrollBar.outerHeight()+2-parseInt(t.host.height()))):t.hScrollBar[0].style.visibility!="hidden"&&(t.hScrollBar[0].style.visibility="hidden",f=!0);u.setPosition(0);f&&t._arrange();t.itemswrapper&&(t.itemswrapper[0].style.width=Math.max(0,Math.max(h-2,17+r))+"px",t.itemswrapper[0].style.height=Math.max(0,2*c)+"px");y=t.isTouchDevice();y&&(t.vScrollBar.css("visibility")!="visible"&&t.hScrollBar.css("visibility")!="visible"?n.jqx.mobile.setTouchScroll(!1,t.element.id):n.jqx.mobile.setTouchScroll(!0,t.element.id))}},clear:function(){this.source=null;this.clearSelection();this.refresh()},clearSelection:function(n){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&this.selectedIndexes[t]!=-1&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1;this.selectedValue=null;this.selectedValues=[];n!=!1&&this._renderItems()},unselectIndex:function(n,t){var u,i,f,r;if(!isNaN(n)){for(this.selectedIndexes[n]=-1,u=!1,i=0;i<this.selectedIndexes.length;i++)f=this.selectedIndexes[i],f!=-1&&f!=undefined&&(u=!0);u||(this.selectedValue=null,this.selectedIndex=-1,r=this.getVisibleItem(n),r&&this.selectedValues[r.value]&&(this.selectedValues[r.value]=null));(t==undefined||t==!0)&&(this._renderItems(),this._raiseEvent("1",{index:n,type:"api",item:this.getVisibleItem(n),originalEvent:null}));this._updateInputSelection();this._raiseEvent("2",{index:n,type:"api",item:this.getItem(n)})}},getInfo:function(){var n=this,i=this.getItems(),t=this.getVisibleItems(),r=function(){var u=n.vScrollInstance.value,f,r,i;for(n.filterable&&(u-=n.filterHeight),f=[],r=0;r<t.length;r++)if(i=t[r],i){var e=i.initialTop,s=i.height,o=!0;(e+s-u<0||e-u>=n.host.height())&&(o=!1);o&&f.push(i)}return f}();return{items:i,visibleItems:t,viewItems:r}},getItem:function(t){if(t==-1||isNaN(t)||typeof t=="string")return t===-1?null:this.getItemByValue(t);var i=null,r=n.each(this.items,function(){if(this.index==t)return i=this,!1});return i},getVisibleItem:function(n){return n==-1||isNaN(n)||typeof n=="string"?n===-1?null:this.getItemByValue(n):this.visibleItems[n]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=!0,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{label:u.label,value:u.value,checked:!0,item:u})))},getCheckedItems:function(){if(!this.checkboxes)return null;var t=[];if(this.items!=undefined)return n.each(this.items,function(){this.checked&&(t[t.length]=this)}),t},checkAll:function(t){if(this.checkboxes&&!this.disabled){var i=this;n.each(this.items,function(){var n=this;t!==!1&&n.checked!==!0&&i._raiseEvent(3,{label:n.label,value:n.value,checked:!0,item:n});this.checked=!0});this._updateCheckedItems()}},uncheckAll:function(t){if(this.checkboxes&&!this.disabled){var i=this;n.each(this.items,function(){var n=this;t!==!1&&n.checked!==!1&&(this.checked=!1,i._raiseEvent(3,{label:n.label,value:n.value,checked:!1,item:n}));this.checked=!1});this._updateCheckedItems()}},uncheckIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=!1,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{label:u.label,value:u.value,checked:!1,item:u})))},indeterminateIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=null,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{checked:null})))},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var r=this.getVisibleItems(),t=this.selectedIndexes,n=[];for(var i in t)t[i]!=-1&&(n[n.length]=r[i]);return n},getSelectedItem:function(){var n=this.getSelectedItems();return n&&n.length>0?n[0]:null},_updateCheckedItems:function(){var i=this.selectedIndex,r,t;this.clearSelection(!1);r=this.getCheckedItems();this.selectedIndex=i;this._renderItems();t=n.data(this.element,"hoveredItem");t!=null&&(n(t).addClass(this.toThemeProperty("jqx-listitem-state-hover")),n(t).addClass(this.toThemeProperty("jqx-fill-state-hover")));this._updateInputSelection()},getItemByValue:function(t){var r,i;if(this.visibleItems!=null){if(t&&t.value&&(t=t.value),this.itemsByValue)return this.itemsByValue[n.trim(t).split(" ").join("?")];for(r=this.visibleItems,i=0;i<r.length;i++)if(r[i].value==t)return r[i]}},checkItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.checkIndex(t.visibleIndex,!0)}return!1},uncheckItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.uncheckIndex(t.visibleIndex,!0)}return!1},indeterminateItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.indeterminateIndex(t.visibleIndex,!0)}return!1},val:function(n){var i,t;if(this.input)return(i=function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return typeof n=="number"?!1:typeof n=="date"?!1:typeof n=="boolean"?!1:typeof n=="string"?!1:!0},i(n)||arguments.length==0)?this.input.val():(t=this.getItemByValue(n),t!=null&&this.selectItem(t),this.input?this.input.val():void 0)},selectItem:function(n){if(n!=null){if(n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return this.selectIndex(n.visibleIndex,!0)}return!1},unselectItem:function(n){if(n!=null){if(n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return this.unselectIndex(n.visibleIndex,!0)}return!1},selectIndex:function(n,t,i,r,u,f){var l,a,s,o,h,p,w,c;if(!isNaN(n)&&(l=this.selectedIndex,this.filterable&&(this.selectedIndex=-1),!(n<-1)&&!(n>=this.visibleItems.length))&&(this.visibleItems[n]==null||!this.visibleItems[n].disabled)&&!this.disabled){if(!this.multiple&&!this.multipleextended&&this.selectedIndex==n&&!r&&!this.checkboxes){this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value));return}if(this.checkboxes){this._updateCheckedItems();s=l;this.selectedIndex!=n||this.multiple||(s=-1);u==undefined&&(u="none");o=this.getItem(n);h=this.getItem(s);this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),h=this.getVisibleItem(s));this._raiseEvent("1",{index:s,type:u,item:h,originalEvent:f});this.selectedIndex=n;this.selectedIndexes[s]=-1;this.selectedIndexes[n]=n;o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value);this._raiseEvent("0",{index:n,type:u,item:o,originalEvent:f});this._renderItems();return}if(this.focused=!0,a=!1,this.selectedIndex!=n&&(a=!0),s=l,this.selectedIndex!=n||this.multiple||(s=-1),u==undefined&&(u="none"),o=this.getItem(n),h=this.getItem(s),this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),h=this.getVisibleItem(s)),r!=undefined&&r)this._raiseEvent("1",{index:s,type:u,item:h,originalEvent:f}),this.selectedIndex=n,this.selectedIndexes[s]=-1,this.selectedIndexes[n]=n,o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value),this._raiseEvent("0",{index:n,type:u,item:o,originalEvent:f});else{var e=this,y=function(n,t,i,r,u,f){e._raiseEvent("1",{index:t,type:i,item:r,originalEvent:f});e.selectedIndex=n;e.selectedIndexes=[];t=n;e.selectedIndexes[n]=n;e.selectedValues=[];u&&(e.selectedValues[u.value]=u.value);e._raiseEvent("0",{index:n,type:i,item:u,originalEvent:f})},v=function(n,t,i,r,u,f){e.selectedIndexes[n]==undefined||e.selectedIndexes[n]==-1?(e.selectedIndexes[n]=n,e.selectedIndex=n,u&&(e.selectedValues[u.value]=u.value,e._raiseEvent("0",{index:n,type:i,item:u,originalEvent:f}))):(t=e.selectedIndexes[n],r=e.getVisibleItem(t),r&&(e.selectedValues[r.value]=null),e.selectedIndexes[n]=-1,e.selectedIndex=-1,e._raiseEvent("1",{index:t,type:i,item:r,originalEvent:f}))};if(this.multipleextended)if(this._shiftKey||this._ctrlKey){if(this._ctrlKey)u=="keyboard"&&(this.clearSelection(!1),e._clickedIndex=n),v(n,s,u,h,o,f);else if(this._shiftKey){for(e._clickedIndex==undefined&&(e._clickedIndex=s),p=Math.min(e._clickedIndex,n),w=Math.max(e._clickedIndex,n),this.clearSelection(!1),c=p;c<=w;c++)e.selectedIndexes[c]=c,e.selectedValues[e.getVisibleItem(c).value]=e.getVisibleItem(c).value,e._raiseEvent("0",{index:c,type:u,item:this.getVisibleItem(c),originalEvent:f});e.selectedIndex=u!="keyboard"?e._clickedIndex:n}}else u!="keyboard"&&u!="mouse"?(v(n,s,u,h,o,f),e._clickedIndex=n):(this.clearSelection(!1),e._clickedIndex=n,y(n,s,u,h,o,f));else this.multiple?v(n,s,u,h,o,f):(o&&(this.selectedValue=o.value),y(n,s,u,h,o,f))}return(i==undefined||i==!0)&&this._renderItems(),t!=undefined&&t!=null&&t==!0&&this.ensureVisible(n),this._raiseEvent("2",{index:n,item:o,oldItem:h,type:u,originalEvent:f}),this._updateInputSelection(),a}},_updateInputSelection:function(){var r,t,u,i;if(this._syncSelection(),r=[],this.input&&(this.selectedIndex==-1?this.input.val(""):this.items&&this.items[this.selectedIndex]!=undefined&&(this.input.val(this.items[this.selectedIndex].value),r.push(this.items[this.selectedIndex].value)),(this.multiple||this.multipleextended||this.checkboxes)&&(t=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),u="",t))){for(i=0;i<t.length;i++)undefined!=t[i]&&(u+=i==t.length-1?t[i].value:t[i].value+",",r.push(t[i].value));this.input.val(u)}this.field&&this.input&&(this.field.nodeName.toLowerCase()=="select"?n.each(this.field,function(){n(this).removeAttr("selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this).attr("selected",!0)}):n.each(this.items,function(){n(this.originalItem.originalItem).removeAttr("data-selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this.originalItem.originalItem).attr("data-selected",!0)}))},isIndexInView:function(n){var r,t,i,u,f;return isNaN(n)?!1:this.items?n<0||n>=this.items.length?!1:(r=this.vScrollInstance.value,t=0,this.filterable&&(t=this.filterHeight),i=this.visibleItems[n],i==undefined)?!0:(u=i.initialTop,f=i.height,u-r<t||u-r+t+f>=this.host.outerHeight())?!1:!0:!1},_itemsInPage:function(){var t=0,i=this;return this.items&&n.each(this.items,function(){if(this.initialTop+this.height>=i.content.height())return!1;t++}),t},_firstItemIndex:function(){return this.visibleItems!=null?this.visibleItems[0]?this.visibleItems[0].isGroup?this._nextItemIndex(0):0:0:-1},_lastItemIndex:function(){return this.visibleItems!=null?this.visibleItems[this.visibleItems.length-1]?this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:this.visibleItems.length-1:-1},_nextItemIndex:function(n){for(indx=n+1;indx<this.visibleItems.length;indx++)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},_prevItemIndex:function(n){for(indx=n-1;indx>=0;indx--)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},clearFilter:function(){this.filterInput.val("");this._updateItemsVisibility("")},_search:function(n){var t=this,i=t.filterInput.val();if(n.keyCode!=9&&t.searchMode!="none"&&t.searchMode!=null&&t.searchMode!="undefined"&&n.keyCode!=16&&n.keyCode!=17&&n.keyCode!=20){if(n.keyCode==37||n.keyCode==39)return!1;n.altKey||n.keyCode==18||n.keyCode>=33&&n.keyCode<=40||(n.ctrlKey||n.metaKey||t.ctrlKey)&&n.keyCode!=88&&n.keyCode!=86||i!==t.searchString&&t._updateItemsVisibility(i)}},_updateItemsVisibility:function(t){var f=this.getItems(),u,e,t,r;if(f==undefined)return{index:-1,matchItem:[]};var i=this,o=-1,s=[],h=0;for(n.each(f,function(){var u="",r;if(!this.isGroup){u=this.searchLabel?this.searchLabel:this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";u=u.toString();r=!1;switch(i.searchMode){case"containsignorecase":r=n.jqx.string.containsIgnoreCase(u,t);break;case"contains":r=n.jqx.string.contains(u,t);break;case"equals":r=n.jqx.string.equals(u,t);break;case"equalsignorecase":r=n.jqx.string.equalsIgnoreCase(u,t);break;case"startswith":r=n.jqx.string.startsWith(u,t);break;case"startswithignorecase":r=n.jqx.string.startsWithIgnoreCase(u,t);break;case"endswith":r=n.jqx.string.endsWith(u,t);break;case"endswithignorecase":r=n.jqx.string.endsWithIgnoreCase(u,t)}r||(this.visible=!1);r&&(s[h++]=this,this.visible=!0,o=this.visibleIndex);t==""&&(this.visible=!0,r=!1)}}),i.renderedVisibleItems=[],i.visibleItems=[],i.vScrollInstance.setPosition(0,!0),i._addItems(!1),i._renderItems(),u=0;u<i.items.length;u++)i.selectedIndexes[u]=-1;i.selectedIndex=-1;for(e in i.selectedValues)t=i.selectedValues[e],r=i.getItemByValue(t),r&&r.visible&&(i.selectedIndex=r.visibleIndex,i.selectedIndexes[r.visibleIndex]=r.visibleIndex);i._syncSelection()},_getMatches:function(t,i){if(t==undefined||t.length==0)return-1;i==undefined&&(i=0);var u=this.getItems(),f=this,r=-1;return n.each(u,function(){var e="",u;if(!this.isGroup){e=this.searchLabel?this.searchLabel.toString():this.label?this.label.toString():this.value?this.value.toString():this.title?this.title.toString():"jqxItem";u=!1;switch(f.searchMode){case"containsignorecase":u=n.jqx.string.containsIgnoreCase(e,t);break;case"contains":u=n.jqx.string.contains(e,t);break;case"equals":u=n.jqx.string.equals(e,t);break;case"equalsignorecase":u=n.jqx.string.equalsIgnoreCase(e,t);break;case"startswith":u=n.jqx.string.startsWith(e,t);break;case"startswithignorecase":u=n.jqx.string.startsWithIgnoreCase(e,t);break;case"endswith":u=n.jqx.string.endsWith(e,t);break;case"endswithignorecase":u=n.jqx.string.endsWithIgnoreCase(e,t)}if(u&&this.visibleIndex>=i)return r=this.visibleIndex,!1}}),r},findItems:function(t){var r=this.getItems(),u=this,f=0,i=[];return n.each(r,function(){var e="",r;if(!this.isGroup){e=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";r=!1;switch(u.searchMode){case"containsignorecase":r=n.jqx.string.containsIgnoreCase(e,t);break;case"contains":r=n.jqx.string.contains(e,t);break;case"equals":r=n.jqx.string.equals(e,t);break;case"equalsignorecase":r=n.jqx.string.equalsIgnoreCase(e,t);break;case"startswith":r=n.jqx.string.startsWith(e,t);break;case"startswithignorecase":r=n.jqx.string.startsWithIgnoreCase(e,t);break;case"endswith":r=n.jqx.string.endsWith(e,t);break;case"endswithignorecase":r=n.jqx.string.endsWithIgnoreCase(e,t)}r&&(i[f++]=this)}}),i},_syncSelection:function(){var n=this,t,i;if(n.filterable){if(n.items)for(t=0;t<n.items.length;t++)i=n.items[t],i.selected=!1;for(t=0;t<n.visibleItems.length;t++)i=n.visibleItems[t],n.selectedIndexes&&n.selectedIndexes[t]==i.visibleIndex&&(i.selected=!0);n.itemswrapper&&n._renderItems()}},_handleKeyDown:function(n){var i=n.keyCode,t=this,h=t.selectedIndex,a=t.selectedIndex,u,r,l,c,y,e,o,f,p;if(this.keyboardNavigation&&this.enableSelection&&(!this.filterInput||n.target!=this.filterInput[0])){if(u=function(){(t.multiple||t.checkboxes)&&t.clearSelection(!1)},n.altKey&&(i=-1),i==32&&this.checkboxes){e=this.getItem(h);e!=null&&(t._updateItemCheck(e,h),n.preventDefault());t._searchString="";t.selectIndex(e.visibleIndex,!1,!0,!0,"keyboard",n);t._renderItems();return}if(t.incrementalSearch){r=-1;t._searchString||(t._searchString="");(i==8||i==46)&&t._searchString.length>=1&&(t._searchString=t._searchString.substr(0,t._searchString.length-1));var s=String.fromCharCode(i),w=!isNaN(parseInt(s)),v=!1;if((i>=65&&i<=97||w||i==8||i==32||i==46)&&(n.shiftKey||(s=s.toLocaleLowerCase()),l=1+t.selectedIndex,i!=8&&i!=32&&i!=46&&(t._searchString.length>0&&t._searchString.substr(0,1)==s?l=1+t.selectedIndex:t._searchString+=s),i==32&&(t._searchString+=" "),c=this._getMatches(t._searchString,l),r=c,(r==t._lastMatchIndex||r==-1)&&(c=this._getMatches(t._searchString,0),r=c),t._lastMatchIndex=r,r>=0&&(y=function(){u();t.selectIndex(r,!1,!1,!1,"keyboard",n);var i=t.isIndexInView(r);i?t._renderItems():t.ensureVisible(r)},t._toSelectTimer&&clearTimeout(t._toSelectTimer),t._toSelectTimer=setTimeout(function(){y()},t.incrementalSearchKeyDownDelay)),v=!0),t._searchTimer!=undefined&&clearTimeout(t._searchTimer),(i==27||i==13)&&(t._searchString=""),t._searchTimer=setTimeout(function(){t._searchString="";t._renderItems()},t.incrementalSearchDelay),r>=0)return;if(v)return!1}if(i==33&&(o=t._itemsInPage(),t.selectedIndex-o>=0?(u(),t.selectIndex(a-o,!1,!1,!1,"keyboard",n)):(u(),t.selectIndex(t._firstItemIndex(),!1,!1,!1,"keyboard",n)),t._searchString=""),i==32&&this.checkboxes&&(e=this.getItem(h),e!=null&&(t._updateItemCheck(e,h),n.preventDefault()),t._searchString=""),i==36&&(u(),t.selectIndex(t._firstItemIndex(),!1,!1,!1,"keyboard",n),t._searchString=""),i==35&&(u(),t.selectIndex(t._lastItemIndex(),!1,!1,!1,"keyboard",n),t._searchString=""),i==34&&(o=t._itemsInPage(),t.selectedIndex+o<t.visibleItems.length?(u(),t.selectIndex(a+o,!1,!1,!1,"keyboard",n)):(u(),t.selectIndex(t._lastItemIndex(),!1,!1,!1,"keyboard",n)),t._searchString=""),i==38)if(t._searchString="",t.selectedIndex>0)if(f=t._prevItemIndex(t.selectedIndex),f!=t.selectedIndex&&f!=-1)u(),t.selectIndex(f,!1,!1,!1,"keyboard",n);else return!0;else return!1;else if(i==40)if(t._searchString="",t.selectedIndex+1<t.visibleItems.length)if(f=t._nextItemIndex(t.selectedIndex),f!=t.selectedIndex&&f!=-1)u(),t.selectIndex(f,!1,!1,!1,"keyboard",n);else return!0;else return!1;return i==35||i==36||i==38||i==40||i==34||i==33?(p=t.isIndexInView(t.selectedIndex),p?t._renderItems():t.ensureVisible(t.selectedIndex),!1):!0}},_updateItemCheck:function(n,t){if(!this.disabled){n.checked=n.checked==!0?n.hasThreeStates&&this.hasThreeStates?null:!1:n.checked!=null;switch(n.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}}},wheel:function(n,t){var r,i;if(t.autoHeight||!t.enableMouseWheel)return n.returnValue=!0,!0;if(t.disabled)return!0;if(r=0,n||(n=window.event),n.originalEvent&&n.originalEvent.wheelDelta&&(n.wheelDelta=n.originalEvent.wheelDelta),n.wheelDelta?r=n.wheelDelta/120:n.detail&&(r=-n.detail/3),r)return i=t._handleDelta(r),i&&(n.preventDefault&&n.preventDefault(),n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0),n.stopPropagation!=undefined&&n.stopPropagation()),i?(i=!1,n.returnValue=i,i):!1;n.preventDefault&&n.preventDefault();n.returnValue=!1},_handleDelta:function(n){var i=this.vScrollInstance.value,t;return(n<0?this.scrollDown():this.scrollUp(),t=this.vScrollInstance.value,i!=t)?!0:!1},focus:function(){try{this.focused=!0;this.host.focus();var n=this;setTimeout(function(){n.host.focus()},25)}catch(t){}},_removeHandlers:function(){var t=this;this.removeHandler(n(document),"keydown.listbox"+this.element.id);this.removeHandler(n(document),"keyup.listbox"+this.element.id);this.removeHandler(this.vScrollBar,"valueChanged");this.removeHandler(this.hScrollBar,"valueChanged");this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel");this.removeHandler(this.host,"keydown");this.removeHandler(this.content,"mouseleave");this.removeHandler(this.content,"focus");this.removeHandler(this.content,"blur");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur");this.removeHandler(this.content,"mouseenter");this.removeHandler(this.content,"mouseup");this.removeHandler(this.content,"mousedown");this.removeHandler(this.content,"touchend");this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove");this.removeHandler(this.content,"selectstart");this.overlayContent&&this.removeHandler(this.overlayContent,n.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){var n,i,t;this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());n=this;n._arrange();(n.host.height()!=n._oldheight||n.host.width()!=n._oldwidth)&&(i=n.host.width()!=n._oldwidth,n.autoItemsHeight?n._render(!1):n.items&&(n.items.length>0&&n.virtualItemsCount*n.items[0].height<n._oldheight-2?n._render(!1):(t=n.vScrollInstance.value,n._updatescrollbars(),n._renderItems(),t<n.vScrollInstance.max?n.vScrollInstance.setPosition(t):n.vScrollInstance.setPosition(n.vScrollInstance.max))),n._oldwidth=n.host.width(),n._oldheight=n.host.height())},_addHandlers:function(){var t=this,f,i,u;this.focused=!1;var o=0,o=0,s=new Date,u=this.isTouchDevice();if(this.addHandler(this.vScrollBar,"valueChanged",function(){n.jqx.browser.msie&&n.jqx.browser.version>9?setTimeout(function(){t._renderItems()},1):t._renderItems()}),this.addHandler(this.hScrollBar,"valueChanged",function(){t._renderItems()}),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this._mousewheelfunc=function(n){t.wheel(n,t)},this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(n(document),"keydown.listbox"+this.element.id,function(n){t._ctrlKey=n.ctrlKey||n.metaKey;t._shiftKey=n.shiftKey}),this.addHandler(n(document),"keyup.listbox"+this.element.id,function(n){t._ctrlKey=n.ctrlKey||n.metaKey;t._shiftKey=n.shiftKey}),this.addHandler(this.host,"keydown",function(n){return t._handleKeyDown(n)}),this.addHandler(this.content,"mouseleave",function(){t.focused=!1;var i=n.data(t.element,"hoveredItem");i!=null&&(n(i).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),n(i).removeClass(t.toThemeProperty("jqx-fill-state-hover")),n.data(t.element,"hoveredItem",null))}),this.addHandler(this.content,"focus",function(){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)}),this.addHandler(this.content,"blur",function(){t.focused=!1;t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)}),this.addHandler(this.host,"blur",function(){n.jqx.browser.msie&&n.jqx.browser.version<9&&t.focused||(t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!1)}),this.addHandler(this.content,"mouseenter",function(){t.focused=!0}),f=n.jqx.utilities.hasTransform(this.host),this.enableSelection){var r=t.isTouchDevice()&&this.touchMode!==!0,e=r?"touchend":"mousedown",h=r?"touchend":"mouseup";this.overlayContent?this.addHandler(this.overlayContent,n.jqx.mobile.getTouchEventName("touchend"),function(i){var s,f,u;if(!t.enableSelection||r&&(t._newScroll=new Date,t._newScroll-t._lastScroll<500))return!0;if(s=n.jqx.mobile.getTouches(i),f=s[0],f!=undefined){var h=t.host.offset(),e=parseInt(f.pageX),o=parseInt(f.pageY);if(t.touchMode==!0&&f._pageX!=undefined&&(e=parseInt(f._pageX),o=parseInt(f._pageY)),e=e-h.left,o=o-h.top,u=t._hitTest(e,o),u!=null&&!u.isGroup){if(t._newScroll=new Date,t._newScroll-t._lastScroll<500)return!1;if(t.checkboxes){t._updateItemCheck(u,u.visibleIndex);return}if(u.html.indexOf("href")!=-1)setTimeout(function(){return t.selectIndex(u.visibleIndex,!1,!0,!1,"mouse",i),t.content.trigger("click"),!1},100);else return t.selectIndex(u.visibleIndex,!1,!0,!1,"mouse",i),i.preventDefault&&i.preventDefault(),t.content.trigger("click"),!1}}}):(i=!1,this.addHandler(this.content,e,function(u){var c,l,p,v;if(!t.enableSelection)return!0;if(i=!0,r&&(t._newScroll=new Date,t._newScroll-t._lastScroll<500))return!1;if(t.focused=!0,!t.isTouchDevice()&&t.focusable&&t.host.focus(),u.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=u.target){var y=u.target,s=n(y).offset(),h=t.host.offset();f&&(c=n.jqx.mobile.getLeftPos(y),l=n.jqx.mobile.getTopPos(y),s.left=c,s.top=l,c=n.jqx.mobile.getLeftPos(t.element),l=n.jqx.mobile.getTopPos(t.element),h.left=c,h.top=l);var w=parseInt(s.top)-parseInt(h.top),a=parseInt(s.left)-parseInt(h.left),o=t._hitTest(a,w);if(o==null||o.isGroup||(p=function(n,r){if(t._shiftKey||(t._clickedIndex=n.visibleIndex),t.checkboxes)if(a=20+r.pageX-s.left,t.rtl){var u=t.hScrollBar.css("visibility")!="hidden"?t.hScrollInstance.max:t.host.width();a<=t.host.width()-20&&(t.allowDrag?setTimeout(function(){t._dragItem||i||(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r))},200):(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)))}else a+t.hScrollInstance.value>=20&&(t.allowDrag?setTimeout(function(){t._dragItem||i||(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r))},200):(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)));else t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)},o.disabled||(o.html.indexOf("href")!=-1?setTimeout(function(){p(o,u)},100):p(o,u))),e=="mousedown")return(v=!1,u.which?v=u.which==3:u.button&&(v=u.button==2),v)?!0:!1}return!0}));this.addHandler(this.content,"mouseup",function(n){t.vScrollInstance.handlemouseup(t,n);i=!1});n.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(){return!1})}u=this.isTouchDevice();this.enableHover&&!u&&(this._mousemovefunc=function(i){var y,v,s,h,c,a;if(u||!t.enableHover||(y=n.jqx.browser.msie==!0&&n.jqx.browser.version<9?0:1,i.target==null)||t.disabled)return!0;if(t.focused=!0,v=t.vScrollInstance.isScrolling(),!v&&i.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=i.target){var l=i.target,e=n(l).offset(),o=t.host.offset();f&&(s=n.jqx.mobile.getLeftPos(l),h=n.jqx.mobile.getTopPos(l),e.left=s,e.top=h,s=n.jqx.mobile.getLeftPos(t.element),h=n.jqx.mobile.getTopPos(t.element),o.left=s,o.top=h);var p=parseInt(e.top)-parseInt(o.top),w=parseInt(e.left)-parseInt(o.left),r=t._hitTest(w,p);r==null||r.isGroup||r.disabled||(c=n.data(t.element,"hoveredItem"),c!=null&&(n(c).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),n(c).removeClass(t.toThemeProperty("jqx-fill-state-hover"))),n.data(t.element,"hoveredItem",r.element),a=n(r.element),a.addClass(t.toThemeProperty("jqx-listitem-state-hover")),a.addClass(t.toThemeProperty("jqx-fill-state-hover")))}},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(n){var i,s,c,p,l,a,w,b,v,y;n==undefined&&(n=!0);var t=this,u=null,r=null,h=t.filterable?t.filterHeight:0,k=function(n){return n=t.host.height(),n==0&&(n=200,t.host.height(n)),n};t.width!=null&&t.width.toString().indexOf("px")!=-1?u=t.width:t.width==undefined||isNaN(t.width)||(u=t.width);t.height!=null&&t.height.toString().indexOf("px")!=-1?r=t.height:t.height==undefined||isNaN(t.height)||(r=t.height);t.width!=null&&t.width.toString().indexOf("%")!=-1&&(t.host.css("width",t.width),u=t.host.width());t.height!=null&&t.height.toString().indexOf("%")!=-1&&(t.host.css("height",t.height),r=k(r));u!=null&&(u=parseInt(u),parseInt(t.element.style.width)!=parseInt(t.width)&&t.host.width(t.width));t.autoHeight?t.virtualSize&&(t.hScrollBar.css("visibility")!="hidden"?(t.host.height(t.virtualSize.height+parseInt(t.scrollBarSize)+3),t.height=t.virtualSize.height+parseInt(t.scrollBarSize)+3,r=t.height):(t.host.height(t.virtualSize.height),t.height=t.virtualSize.height,r=t.virtualSize.height)):r!=null&&(r=parseInt(r),parseInt(t.element.style.height)!=parseInt(t.height)&&(t.host.height(t.height),k(r)));i=t.scrollBarSize;isNaN(i)&&(i=parseInt(i),i=isNaN(i)?"17px":i+"px");i=parseInt(i);var e=4,f=2,o=1;if(t.vScrollBar)t.vScrollBar[0].style.visibility!="hidden"?o=i+e:t.vScrollInstance.setPosition(0);else return;if(t.hScrollBar)t.hScrollBar[0].style.visibility!="hidden"?f=i+e:t.hScrollInstance.setPosition(0);else return;t.autoItemsHeight&&(t.hScrollBar[0].style.visibility="hidden",f=0);r==null&&(r=0);s=parseInt(r)-e-i;s<0&&(s=0);parseInt(t.hScrollBar[0].style.height)!=i&&(parseInt(i)<0&&(i=0),t.hScrollBar[0].style.height=parseInt(i)+"px");t.hScrollBar[0].style.top!=s+"px"&&(t.hScrollBar[0].style.top=s+"px",t.hScrollBar[0].style.left="0px");c=u-i-e;c<0&&(c=0);p=c+"px";t.hScrollBar[0].style.width!=p&&(t.hScrollBar[0].style.width=p);o<=1&&u>=2&&(t.hScrollBar[0].style.width=parseInt(u-2)+"px");i!=parseInt(t.vScrollBar[0].style.width)&&(t.vScrollBar[0].style.width=parseInt(i)+"px");parseInt(r)-f!=parseInt(t.vScrollBar[0].style.height)&&(l=parseInt(r)-f,l<0&&(l=0),t.vScrollBar[0].style.height=l+"px");u==null&&(u=0);a=parseInt(u)-parseInt(i)-e+"px";a!=t.vScrollBar[0].style.left&&(parseInt(a)>=0&&(t.vScrollBar[0].style.left=a),t.vScrollBar[0].style.top="0px");w=t.vScrollInstance;w.disabled=t.disabled;n&&w._arrange();b=t.hScrollInstance;b.disabled=t.disabled;n&&b._arrange();t.vScrollBar[0].style.visibility!="hidden"&&t.hScrollBar[0].style.visibility!="hidden"?(t.bottomRight[0].style.visibility="inherit",t.bottomRight[0].style.left=1+parseInt(t.vScrollBar[0].style.left)+"px",t.bottomRight[0].style.top=1+parseInt(t.hScrollBar[0].style.top)+"px",t.rtl&&t.bottomRight.css({left:0}),t.bottomRight[0].style.width=parseInt(i)+3+"px",t.bottomRight[0].style.height=parseInt(i)+3+"px"):t.bottomRight[0].style.visibility="hidden";parseInt(t.content[0].style.width)!=parseInt(u)-o&&(v=parseInt(u)-o,v<0&&(v=0),t.content[0].style.width=v+"px");t.rtl&&(t.vScrollBar.css({left:"0px",top:"0px"}),t.hScrollBar.css({left:t.vScrollBar.width()+2+"px"}),t.vScrollBar[0].style.visibility!="hidden"?t.content.css("margin-left",4+t.vScrollBar.width()):(t.content.css("margin-left",0),t.hScrollBar.css({left:"0px"})),t.filterable&&t.filterInput&&t.filterInput.css({left:t.vScrollBar.width()+6+"px"}));parseInt(t.content[0].style.height)!=parseInt(r)-f&&(y=parseInt(r)-f,y<0&&(y=0),t.content[0].style.height=y+"px",t.content[0].style.top="0px");h>0&&(t.content[0].style.top=h+"px",t.content[0].style.height=parseInt(t.content[0].style.height)-h+"px");t.filterable?(t.filterInput[0].style.height=h-6+"px",t.filterInput[0].style.top="3px",t.rtl||(t.filterInput[0].style.left=parseInt(t.content.css("left"))+3+"px"),t.filterInput[0].style.width=parseInt(t.content.css("width"))-7+"px",t.filter[0].style.display="block"):t.filter[0].style.display="none";t.overlayContent&&(t.overlayContent.width(parseInt(u)-o),t.overlayContent.height(parseInt(r)-f))},ensureVisible:function(t,i){var s,u,o,r,f,e;if(isNaN(t)&&(r=this.getItemByValue(t),r&&(t=r.index)),s=this.isIndexInView(t),s){if(i)for(indx=0;indx<this.visibleItems.length;indx++)r=this.visibleItems[indx],r.visibleIndex!=t||r.isGroup||(f=this.vScrollInstance.value,e=r.initialTop,this.filterable&&(e=this.filterHeight+2+r.initialTop),f+this.host.height()<this.vScrollInstance.max&&this.vScrollInstance.setPosition(e))}else{if(t<0)return;if(this.autoHeight)u=n.data(this.vScrollBar[0],"jqxScrollBar").instance,u.setPosition(0);else for(indx=0;indx<this.visibleItems.length;indx++)if(r=this.visibleItems[indx],r.visibleIndex==t&&!r.isGroup){var u=n.data(this.vScrollBar[0],"jqxScrollBar").instance,f=u.value,c=this.filterable?this.filterHeight+2:0,l=this.hScrollBar.css("visibility")==="hidden",h=l?0:this.scrollBarSize+4;r.initialTop<f?(u.setPosition(r.initialTop),indx==0&&u.setPosition(0)):r.initialTop+r.height>f+this.host.height()-c&&(o=this.host.height(),this.filterable?u.setPosition(this.filterHeight+2+r.initialTop+r.height+2-o+h):(u.setPosition(r.initialTop+r.height+2-o+h),indx===this.visibleItems.length-1&&u.setPosition(u.max)),i&&(f=u.value,e=r.initialTop,this.filterable&&(e=this.filterHeight+2+r.initialTop),f+o<u.max&&u.setPosition(e)));break}}this._renderItems()},scrollTo:function(n,t){this.vScrollBar.css("visibility")!="hidden"&&this.vScrollInstance.setPosition(t);this.hScrollBar.css("visibility")!="hidden"&&this.hScrollInstance.setPosition(n)},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var n=this.vScrollInstance;return n.value+n.largestep<=n.max?(n.setPosition(n.value+n.largestep),!0):(n.setPosition(n.max),!0)},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var n=this.vScrollInstance;return n.value-n.largestep>=n.min?(n.setPosition(n.value-n.largestep),!0):n.value!=n.min?(n.setPosition(n.min),!0):!1},databind:function(t,i){var o,r,s,u,f,e,h;this.records=[];o=t._source?!0:!1;r=new n.jqx.dataAdapter(t,{autoBind:!1});o&&(r=t,t=t._source);s=function(){t.type!=undefined&&(r._options.type=t.type);t.formatdata!=undefined&&(r._options.formatData=t.formatdata);t.contenttype!=undefined&&(r._options.contentType=t.contenttype);t.async!=undefined&&(r._options.async=t.async)};u=function(t,i){var o=function(i){var o=null,e,u,f,s,h,c,l,a,r;if(typeof i=="string")var u=i,f=i,e="";else t.displayMember!=undefined&&t.displayMember!=""&&(f=i[t.valueMember],u=i[t.displayMember]);return e="",t.groupMember?e=i[t.groupMember]:i&&i.group!=undefined&&(e=i.group),t.searchMember?o=i[t.searchMember]:i&&i.searchLabel!=undefined&&(o=i.searchLabel),t.valueMember||t.displayMember||n.type(i)=="string"&&(u=f=i.toString()),i&&i.label!=undefined&&(u=i.label),i&&i.value!=undefined&&(f=i.value),s=!1,i&&i.checked!=undefined&&(s=i.checked),h="",i&&i.html!=undefined&&(h=i.html),c=!0,i&&i.visible!=undefined&&(c=i.visible),l=!1,i&&i.disabled!=undefined&&(l=i.disabled),a=!1,i&&i.hasThreeStates!=undefined&&(a=i.hasThreeStates),r={},r.label=u,r.value=f,r.searchLabel=o,r.html=h,r.visible=c,r.originalItem=i,r.group=e,r.groupHtml="",r.disabled=l,r.checked=s,r.hasThreeStates=a,r},s,h,f,u,c,e;if(i!=undefined&&(s=r._changedrecords[0],s)){n.each(r._changedrecords,function(){var n=this.index,u=this.record,r;i!="remove"&&(r=o(u));switch(i){case"update":t.updateAt(r,n);break;case"add":t.insertAt(r,n);break;case"remove":t.removeAt(n)}});return}for(t.records=r.records,h=t.records.length,f=[],u=0;u<h;u++)c=t.records[u],e=o(c),e.index=u,f[u]=e;t.items=t.loadItems(f,!0);t._render();t._raiseEvent("6")};s(this);f=this;switch(t.datatype){case"local":case"array":default:(t.localdata!=null||n.isArray(t))&&(r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||i)||r.dataBind(),u(this),r.bindBindingUpdate(this.element.id,function(n){u(f,n)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){r.unbindBindingUpdate(this.element.id);!this.autoBind&&(this.autoBind||i)||r.dataBind();u(this);r.bindBindingUpdate(this.element.id,function(){u(f)});return}e={};r._options.data?n.extend(r._options.data,e):(t.data&&n.extend(e,t.data),r._options.data=e);h=function(){u(f)};r.unbindDownloadComplete(f.element.id);r.bindDownloadComplete(f.element.id,h);!this.autoBind&&(this.autoBind||i)||r.dataBind()}},loadItems:function(t,i){var p,s,l,e,c,o,h,f,w;if(t==null){this.groups=[];this.items=[];this.visualItems=[];return}var u=this,v=0,a=0,y=0;if(this.groups=[],this.items=[],this.visualItems=[],p=[],this.itemsByValue=[],n.map(t,function(t){var c,s;if(t==undefined)return null;var r=new n.jqx._jqxListBox.item,f=t.group,o=t.groupHtml,e=t.title,h=null;return u.searchMember?h=t[u.searchMember]:t&&t.searchLabel!=undefined&&(h=t.searchLabel),(e==null||e==undefined)&&(e=""),(f==null||f==undefined)&&(f=""),u.groupMember&&(f=t[u.groupMember]),(o==null||o==undefined)&&(o=""),u.groups[f]||(u.groups[f]={items:[],index:-1,caption:f,captionHtml:o},v++,c=v+"jqxGroup",u.groups[c]=u.groups[f],a++,u.groups.length=a),s=u.groups[f],s.index++,s.items[s.index]=r,typeof t=="string"?(r.label=t,r.value=t,arguments.length>1&&arguments[1]&&n.type(arguments[1])=="string"&&(r.label=t,r.value=arguments[1])):t.label==null&&t.value==null&&t.html==null&&t.group==null&&t.groupHtml==null?(r.label=t.toString(),r.value=t.toString()):(r.label=t.label,r.value=t.value,r.label===undefined&&(r.label=t.value),r.value===undefined&&(r.value=t.label)),typeof t!="string"&&(t.label===undefined&&u.displayMember!=""&&(r.label=t[u.displayMember]!=undefined?t[u.displayMember]:""),t.value===undefined&&u.valueMember!=""&&(r.value=t[u.valueMember])),r.hasThreeStates=t.hasThreeStates!=undefined?t.hasThreeStates:!0,r.originalItem=t,i&&(r.originalItem=t.originalItem),r.title=e,e&&r.value===undefined&&r.label===undefined&&(r.value=r.label=e),r.html=t.html||"",t.html&&t.html!=""&&e&&e!="",r.group=f,r.checked=t.checked||!1,r.groupHtml=t.groupHtml||"",r.disabled=t.disabled||!1,r.visible=t.visible!=undefined?t.visible:!0,r.searchLabel=h,r.index=y,p[y]=r,y++,r}),s=[],f=0,this.fromSelect==undefined||this.fromSelect==!1)for(l=0;l<a;l++){var v=l+1,b=v+"jqxGroup",r=this.groups[b];if(r==undefined||r==null)break;if(l==0&&r.caption==""&&r.captionHtml==""&&a<=1){for(e=0;e<r.items.length;e++)h=r.items[e].value,(r.items[e].value==undefined||r.items[e].value==null)&&(h=e),this.itemsByValue[n.trim(h).split(" ").join("?")]=r.items[e];return r.items}for(c=new n.jqx._jqxListBox.item,c.isGroup=!0,c.label=r.caption,r.caption==""&&r.captionHtml==""&&(r.caption=this.emptyGroupText,c.label=r.caption),c.html=r.captionHtml,s[f]=c,f++,o=0;o<r.items.length;o++)s[f]=r.items[o],h=r.items[o].value,(r.items[o].value==""||r.items[o].value==null)&&(h=f),u.itemsByValue[n.trim(h).split(" ").join("?")]=r.items[o],f++}else f=0,w=[],n.each(p,function(){var t,i;w[this.group]||this.group!=""&&(t=new n.jqx._jqxListBox.item,t.isGroup=!0,t.label=this.group,s[f]=t,f++,w[this.group]=!0);s[f]=this;i=this.value;(this.value==""||this.value==null)&&(i=f-1);u.itemsByValue[n.trim(i).split(" ").join("?")]=this;f++});return s},_mapItem:function(t){var i=new n.jqx._jqxListBox.item;return this.displayMember&&(t.label==undefined&&(t.label=t[this.displayMember]),t.value==undefined&&(t.value=t[this.valueMember])),typeof t=="string"?(i.label=t,i.value=t):typeof t=="number"?(i.label=t.toString(),i.value=t.toString()):(i.label=t.label!==undefined?t.label:t.value,i.value=t.value!==undefined?t.value:t.label),i.label==undefined&&i.value==undefined&&i.html==undefined&&(i.label=i.value=t),i.html=t.html||"",i.group=t.group||"",i.checked=t.checked||!1,i.title=t.title||"",i.groupHtml=t.groupHtml||"",i.disabled=t.disabled||!1,i.visible=t.visible||!0,i},addItem:function(n){return this.insertAt(n,this.items?this.items.length:0)},_getItemByParam:function(n){if(n!=null&&n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return n},insertItem:function(n,t){var i=this._getItemByParam(n);return this.insertAt(i,t)},updateItem:function(n,t){var i=this._getItemByParam(t);return i&&i.index!=undefined?this.updateAt(n,i.index):!1},updateAt:function(t,i){if(t!=null){var r=this._mapItem(t);this.itemsByValue[n.trim(r.value).split(" ").join("?")]=this.items[i];this.items[i].value=r.value;this.items[i].label=r.label;this.items[i].html=r.html;this.items[i].disabled=r.disabled}this._cachedItemHtml=[];this._renderItems();this.rendered&&this.rendered()},insertAt:function(t,i){var r,f,u,h,l;if(t==null)return!1;if(this._cachedItemHtml=[],this.items==undefined||this.items.length==0)return this.source=[],this.refresh(),r=this._mapItem(t),r.index=0,this.items[this.items.length]=r,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),u=r.value,(r.value==""||r.value==null)&&(u=i),this.itemsByValue[n.trim(u).split(" ").join("?")]=r,!1;if(r=this._mapItem(t),i==-1||i==undefined||i==null||i>=this.items.length)r.index=this.items.length,this.items[this.items.length]=r;else{var e=[],o=0,c=!1,s=0;for(f=0;f<this.items.length;f++)this.items[f].isGroup==!1&&s>=i&&!c&&(e[o++]=r,r.index=i,s++,c=!0),e[o]=this.items[f],this.items[f].isGroup||(e[o].index=s,s++),o++;this.items=e}return u=r.value,(r.value==""||r.value==null)&&(u=i),this.itemsByValue[n.trim(u).split(" ").join("?")]=r,this.visibleItems=[],this.renderedVisibleItems=[],h=n.data(this.vScrollBar[0],"jqxScrollBar").instance,l=h.value,h.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this.groups.length>1,this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),h.setPosition(l),this.rendered&&this.rendered(),!0},removeAt:function(t){var c,f,i,h,u,r;if(t<0||t>this.items.length-1||t==undefined)return!1;if(c=this.items[t].height,r=this.items[t].value,(r==""||r==null)&&(r=t),this.itemsByValue[n.trim(r).split(" ").join("?")]=null,this.groups.length>1){for(f=[],i=0;i<this.items.length;i++)this.items[i].isGroup||f.push({item:this.items[i],key:i});if(f[t])this.items.splice(f[t].key,1);else return!1}else this.items.splice(t,1);var o=[],s=0,l=0;for(i=0;i<this.items.length;i++)o[s]=this.items[i],this.items[i].isGroup||(o[s].index=l,l++),s++;this.items=o;var e=n.data(this.vScrollBar[0],"jqxScrollBar").instance,e=n.data(this.vScrollBar[0],"jqxScrollBar").instance,a=e.value;for(e.setPosition(0),this.visibleItems=[],this.renderedVisibleItems=[],this.items.length>0?(this.virtualSize&&(this.virtualSize.height-=c,h=this.virtualSize.itemsPerPage*2,this.autoHeight&&(h=this.items.length),this.virtualItemsCount=Math.min(h,this.items.length)),this._updatescrollbars()):this._addItems(),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),this.vScrollBar.css("visibility")!="hidden"?e.setPosition(a):e.setPosition(0),this.itemsByValue=[],u=0;u<this.items.length;u++)r=this.items[u].value,(this.items[u].value==""||this.items[u].value==null)&&(r=u),this.itemsByValue[n.trim(r).split(" ").join("?")]=this.items[u];return this.rendered&&this.rendered(),!0},removeItem:function(n,t){var r=this._getItemByParam(n),u=-1,i;if(r&&r.index!=undefined&&t!==!0){for(i=0;i<this.items.length;i++)if(this.items[i].label==r.label&&this.items[i].value==r.value){u=i;break}if(u!=-1)return this.removeAt(u)}if(u==-1)return this.removeAt(r.index)},getItems:function(){return this.items},disableItem:function(n){var t=this._getItemByParam(n);this.disableAt(t.index)},enableItem:function(n){var t=this._getItemByParam(n);this.enableAt(t.index)},disableAt:function(n){return this.items?n<0||n>this.items.length-1?!1:(this.items[n].disabled=!0,this._renderItems(),!0):!1},enableAt:function(n){return this.items?n<0||n>this.items.length-1?!1:(this.items[n].disabled=!1,this._renderItems(),!0):!1},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id);this._removeHandlers();this.vScrollBar.jqxScrollBar("destroy");this.hScrollBar.jqxScrollBar("destroy");this.vScrollBar.remove();this.hScrollBar.remove();this.content.remove();n.jqx.utilities.resize(this.host,null,!0);var t=n.data(this.element,"jqxListBox");delete this.hScrollInstance;delete this.vScrollInstance;delete this.vScrollBar;delete this.hScrollBar;delete this.content;delete this.bottomRight;delete this.itemswrapper;delete this.visualItems;delete this.visibleItems;delete this.items;delete this.groups;delete this.renderedVisibleItems;delete this._mousewheelfunc;delete this._mousemovefunc;delete this._cachedItemHtml;delete this.itemsByValue;delete this._activeElement;delete this.source;delete this.events;this.input&&(this.input.remove(),delete this.input);t&&delete t.instance;this.host.removeData();this.host.removeClass();this.host.remove();this.element=null;delete this.element;this.host=null;delete this.set;delete this.get;delete this.call;delete this.host},_raiseEvent:function(t,i){var u,r,f;return this._stopEvents==!0?!0:(i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,this._updateInputSelection(),r=new n.Event(u),r.owner=this,r.args=args,this.host!=null&&(f=this.host.trigger(r)),f)}})})(jqxBaseFramework),function(n){n.jqx.parseSourceTag=function(t){var c=[],e=n(t).find("option"),r=n(t).find("optgroup"),s=!1,f,o,l,u;e.length===0&&(e=n(t).find("li"),e.length>0&&(s=!0));var h=null,h=-1,a=this,i=[];if(n.each(e,function(t){var o=r.find(this).length>0,f=null,u,e;this.text!=null&&(this.label==null||this.label=="")&&(this.label=this.text);s===!0&&(this.label=n(this).text(),this.selected=n(this).attr("data-selected"),this.checked=this.selected,this.value=n(this).attr("data-value")||t,this.disabled=n(this).attr("disabled"));u={style:this.style.cssText,selected:this.selected,html:this.innerHTML,classes:this.className,disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this};e=n.jqx.browser.msie&&n.jqx.browser.version<8;e&&!s&&u.value==""&&this.text!=null&&this.text.length>0&&(u.value=this.text);o&&(f=r.find(this).parent()[0].label,u.group=f,i[f]||(i[f]=[],i.length++),i[f].push(u));this.selected&&(h=t);u.checked=this.selected;u.label!==undefined&&c.push(u)}),i.length>0){f=[];for(o in i)if(o!=="indexOf"){for(l=null,u=0;u<r.length;u++)if(o===r[u].label||r[u].text){l=r[u];break}n.each(i[o],function(){this.label!==undefined&&f.push(this)})}}return f&&f.length>0?{items:f,index:h}:{items:c,index:h}};n.jqx._jqxListBox.item=function(){return{group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1}}}(jqxBaseFramework);